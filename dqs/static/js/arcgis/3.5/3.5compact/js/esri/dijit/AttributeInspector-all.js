/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_1(null,{declaredClass:"esri.layers.FeatureType",constructor:function(_d){if(_d&&_2.isObject(_d)){this.id=_d.id;this.name=_d.name;var _e=_d.symbol;if(_e){this.symbol=_7.fromJson(_e);}var _f=_d.domains,_10,i;var _11=this.domains={};for(_10 in _f){if(_f.hasOwnProperty(_10)){var _12=_f[_10];switch(_12.type){case "range":_11[_10]=new _8(_12);break;case "codedValue":_11[_10]=new _9(_12);break;case "inherited":_11[_10]=new _a(_12);break;}}}var _13=_d.templates;if(_13){var _14=this.templates=[];for(i=0;i<_13.length;i++){_14.push(new _b(_13[i]));}}}},toJson:function(){var _15={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _16,_17=this.domains,_18=this.templates,_19=_6.fixJson;if(_17){var _1a=_15.domains={};for(_16 in _17){if(_17.hasOwnProperty(_16)){_1a[_16]=_17[_16]&&_17[_16].toJson();}}_19(_1a);}if(_18){_15.templates=_3.map(_18,function(_1b){return _1b.toJson();});}return _19(_15);}});if(_4("extend-esri")){_2.setObject("layers.FeatureType",_c,_5);}return _c;});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_1c,_1d,_1e,_1f,_20,_21,_22,_23,_24){return _1c("dijit.form.ComboBoxMixin",[_23,_21],{dropDownClass:_22,hasDownArrow:true,templateString:_24,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_25){if(!_25.get){_1f.mixin(_25,{_oldAPI:true,get:function(id){var _26=new _1d();this.fetchItemByIdentity({identity:id,onItem:function(_27){_26.resolve(_27);},onError:function(_28){_26.reject(_28);}});return _26.promise;},query:function(_29,_2a){var _2b=new _1d(function(){_2c.abort&&_2c.abort();});_2b.total=new _1d();var _2c=this.fetch(_1f.mixin({query:_29,onBegin:function(_2d){_2b.total.resolve(_2d);},onComplete:function(_2e){_2b.resolve(_2e);},onError:function(_2f){_2b.reject(_2f);}},_2a));return _20(_2b);}});}this._set("store",_25);},postMixInProperties:function(){var _30=this.params.store||this.store;if(_30){this._setStoreAttr(_30);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _31=this.declaredClass;_1f.mixin(this.store,{getValue:function(_32,_33){_1e.deprecated(_31+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return _32[_33];},getLabel:function(_34){_1e.deprecated(_31+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return _34.name;},fetch:function(_35){_1e.deprecated(_31+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var _36=["dojo/data/ObjectStore"];require(_36,_1f.hitch(this,function(_37){new _37({objectStore:this}).fetch(_35);}));}});}}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_38,_39,_3a){var _3b=_38("dijit.form.RangeBoundTextBox",_3a,{rangeMessage:"",rangeCheck:function(_3c,_3d){return ("min" in _3d?(this.compare(_3c,_3d.min)>=0):true)&&("max" in _3d?(this.compare(_3c,_3d.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _3e=false;if("min" in this.constraints){var min=this.constraints.min;_3e=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_3e&&("max" in this.constraints)){var max=this.constraints.max;_3e=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _3e;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_3f){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_3f));},getErrorMessage:function(_40){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_40)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=_39.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _3b;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_41,has,_42,win){_42(90,function(){if(has("highcontrast")){_41.add(win.body(),"dijit_a11y");}});return has;});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_43,_44){return _43("dijit._Contained",null,{_getSibling:function(_45){var _46=this.domNode;do{_46=_46[_45+"Sibling"];}while(_46&&_46.nodeType!=1);return _46&&_44.byNode(_46);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_47,_48,dom,_49,_4a,_4b,on,_4c){var _4d=_48("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_4e,_4f,_50){var _51;if(_4e!==undefined){_51=this.filter(_4e);if(typeof _50!="string"){if(_51!==null&&((typeof _51!="number")||!isNaN(_51))){_50=this.filter(this.format(_51,this.constraints));}else{_50="";}}}if(_50!=null&&((typeof _50)!="number"||!isNaN(_50))&&this.textbox.value!=_50){this.textbox.value=_50;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_50);}this.inherited(arguments,[_51,_4f]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_52){if(_52==null){_52="";}else{if(typeof _52!="string"){_52=String(_52);}}this.textbox.value=_52;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_52);}},format:function(_53){return _53==null?"":(_53.toString?_53.toString():_53);},parse:function(_54){return _54;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _55=function(e){var _56;if(e.type=="keydown"){_56=e.keyCode;switch(_56){case _4a.SHIFT:case _4a.ALT:case _4a.CTRL:case _4a.META:case _4a.CAPS_LOCK:case _4a.NUM_LOCK:case _4a.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_56){case _4a.NUMPAD_0:case _4a.NUMPAD_1:case _4a.NUMPAD_2:case _4a.NUMPAD_3:case _4a.NUMPAD_4:case _4a.NUMPAD_5:case _4a.NUMPAD_6:case _4a.NUMPAD_7:case _4a.NUMPAD_8:case _4a.NUMPAD_9:case _4a.NUMPAD_MULTIPLY:case _4a.NUMPAD_PLUS:case _4a.NUMPAD_ENTER:case _4a.NUMPAD_MINUS:case _4a.NUMPAD_PERIOD:case _4a.NUMPAD_DIVIDE:return;}if((_56>=65&&_56<=90)||(_56>=48&&_56<=57)||_56==_4a.SPACE){return;}var _57=false;for(var i in _4a){if(_4a[i]===e.keyCode){_57=true;break;}}if(!_57){return;}}}_56=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_56){_56=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==_4a.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_56){_56=229;}if(e.type=="keypress"){if(typeof _56!="string"){return;}if((_56>="a"&&_56<="z")||(_56>="A"&&_56<="Z")||(_56>="0"&&_56<="9")||(_56===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var _58={faux:true},_59;for(_59 in e){if(_59!="layerX"&&_59!="layerY"){var v=e[_59];if(typeof v!="function"&&typeof v!="undefined"){_58[_59]=v;}}}_4b.mixin(_58,{charOrCode:_56,_wasConsumed:false,preventDefault:function(){_58._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(_58)===false){_58.preventDefault();_58.stopPropagation();}if(_58._wasConsumed){return;}this.defer(function(){this._onInput(_58);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",_4b.hitch(this,_55)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=_4b.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(_5a){return _5a.substring(0,1).toUpperCase()+_5a.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_4d.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_5b){if(!this._created||this.textDir!=_5b){this._set("textDir",_5b);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_4d._setSelectionRange=_4c._setSelectionRange=function(_5c,_5d,_5e){if(_5c.setSelectionRange){_5c.setSelectionRange(_5d,_5e);}};_4d.selectInputText=_4c.selectInputText=function(_5f,_60,_61){_5f=dom.byId(_5f);if(isNaN(_60)){_60=0;}if(isNaN(_61)){_61=_5f.value?_5f.value.length:0;}try{_5f.focus();_4d._setSelectionRange(_5f,_60,_61);}catch(e){}};return _4d;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_62){return function(_63,_64){switch(typeof _63){default:throw new Error("Can not query with a "+typeof _63);case "object":case "undefined":var _65=_63;_63=function(_66){for(var key in _65){var _67=_65[key];if(_67&&_67.test){if(!_67.test(_66[key],_66)){return false;}}else{if(_67!=_66[key]){return false;}}}return true;};break;case "string":if(!this[_63]){throw new Error("No filter function "+_63+" was found in store");}_63=this[_63];case "function":}function _68(_69){var _6a=_62.filter(_69,_63);var _6b=_64&&_64.sort;if(_6b){_6a.sort(typeof _6b=="function"?_6b:function(a,b){for(var _6c,i=0;_6c=_6b[i];i++){var _6d=a[_6c.attribute];var _6e=b[_6c.attribute];if(_6d!=_6e){return !!_6c.descending==(_6d==null||_6d>_6e)?-1:1;}}return 0;});}if(_64&&(_64.start||_64.count)){var _6f=_6a.length;_6a=_6a.slice(_64.start||0,(_64.start||0)+(_64.count||Infinity));_6a.total=_6f;}return _6a;};_68.matches=_63;return _68;};});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_70,_71,_72,_73){return _70("dijit.form.ToggleButton",[_72,_73],{baseClass:"dijitToggleButton",setChecked:function(_74){_71.deprecated("setChecked("+_74+") is deprecated. Use set('checked',"+_74+") instead.","","2.0");this.set("checked",_74);}});});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_75,_76,has,_77,_78,_79,_7a,_7b){if(has("dijit-legacy-requires")){_78(0,function(){var _7c=["dijit/ToolbarSeparator"];_75(_7c);});}return _76("dijit.Toolbar",[_79,_7b,_7a],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[_77.LEFT_ARROW]:[_77.RIGHT_ARROW],this.isLeftToRight()?[_77.RIGHT_ARROW]:[_77.LEFT_ARROW]);}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_7d,on,_7e,has,win,_7f){var _80=new _7d();_7e(200,function(){var _81=_7f.getBox();_80._rlh=on(win.global,"resize",function(){var _82=_7f.getBox();if(_81.h==_82.h&&_81.w==_82.w){return;}_81=_82;_80.emit("resize");});if(has("ie")==8){var _83=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_83){_83=screen.deviceXDPI;_80.emit("resize");}},500);}});return _80;});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_84,_85,_86,_87,_88,_89,_8a,_8b,_8c,_8d,_8e,_8f,has,_90,don,_91){new Date("X");var _92=0;_8d.after(_86,"extend",function(){_92++;},true);function _93(_94){var map=_94._nameCaseMap,_95=_94.prototype;if(!map||map._extendCnt<_92){map=_94._nameCaseMap={};for(var _96 in _95){if(_96.charAt(0)==="_"){continue;}map[_96.toLowerCase()]=_96;}map._extendCnt=_92;}return map;};var _97={};function _98(_99){var ts=_99.join();if(!_97[ts]){var _9a=[];for(var i=0,l=_99.length;i<l;i++){var t=_99[i];_9a[_9a.length]=(_97[t]=_97[t]||(_86.getObject(t)||(~t.indexOf("/")&&_84(t))));}var _9b=_9a.shift();_97[ts]=_9a.length?(_9b.createSubclass?_9b.createSubclass(_9a):_9b.extend.apply(_9b,_9a)):_9b;}return _97[ts];};var _9c={_clearCache:function(){_92++;_97={};},_functionFromScript:function(_9d,_9e){var _9f="",_a0="",_a1=(_9d.getAttribute(_9e+"args")||_9d.getAttribute("args")),_a2=_9d.getAttribute("with");var _a3=(_a1||"").split(/\s*,\s*/);if(_a2&&_a2.length){_87.forEach(_a2.split(/\s*,\s*/),function(_a4){_9f+="with("+_a4+"){";_a0+="}";});}return new Function(_a3,_9f+_9d.innerHTML+_a0);},instantiate:function(_a5,_a6,_a7){_a6=_a6||{};_a7=_a7||{};var _a8=(_a7.scope||_85._scopeName)+"Type",_a9="data-"+(_a7.scope||_85._scopeName)+"-",_aa=_a9+"type",_ab=_a9+"mixins";var _ac=[];_87.forEach(_a5,function(_ad){var _ae=_a8 in _a6?_a6[_a8]:_ad.getAttribute(_aa)||_ad.getAttribute(_a8);if(_ae){var _af=_ad.getAttribute(_ab),_b0=_af?[_ae].concat(_af.split(/\s*,\s*/)):[_ae];_ac.push({node:_ad,types:_b0});}});return this._instantiate(_ac,_a6,_a7);},_instantiate:function(_b1,_b2,_b3){var _b4=_87.map(_b1,function(obj){var _b5=obj.ctor||_98(obj.types);if(!_b5){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(_b5,obj.node,_b2,_b3,obj.scripts,obj.inherited);},this);if(!_b2._started&&!_b3.noStart){_87.forEach(_b4,function(_b6){if(typeof _b6.startup==="function"&&!_b6._started){_b6.startup();}});}return _b4;},construct:function(_b7,_b8,_b9,_ba,_bb,_bc){var _bd=_b7&&_b7.prototype;_ba=_ba||{};var _be={};if(_ba.defaults){_86.mixin(_be,_ba.defaults);}if(_bc){_86.mixin(_be,_bc);}var _bf;if(has("dom-attributes-explicit")){_bf=_b8.attributes;}else{if(has("dom-attributes-specified-flag")){_bf=_87.filter(_b8.attributes,function(a){return a.specified;});}else{var _c0=/^input$|^img$/i.test(_b8.nodeName)?_b8:_b8.cloneNode(false),_c1=_c0.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_bf=_87.map(_c1.split(/\s+/),function(_c2){var _c3=_c2.toLowerCase();return {name:_c2,value:(_b8.nodeName=="LI"&&_c2=="value")||_c3=="enctype"?_b8.getAttribute(_c3):_b8.getAttributeNode(_c3).value};});}}var _c4=_ba.scope||_85._scopeName,_c5="data-"+_c4+"-",_c6={};if(_c4!=="dojo"){_c6[_c5+"props"]="data-dojo-props";_c6[_c5+"type"]="data-dojo-type";_c6[_c5+"mixins"]="data-dojo-mixins";_c6[_c4+"type"]="dojoType";_c6[_c5+"id"]="data-dojo-id";}var i=0,_c7,_c8=[],_c9,_ca;while(_c7=_bf[i++]){var _cb=_c7.name,_cc=_cb.toLowerCase(),_cd=_c7.value;switch(_c6[_cc]||_cc){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_ca=_cd;break;case "data-dojo-id":case "jsid":_c9=_cd;break;case "data-dojo-attach-point":case "dojoattachpoint":_be.dojoAttachPoint=_cd;break;case "data-dojo-attach-event":case "dojoattachevent":_be.dojoAttachEvent=_cd;break;case "class":_be["class"]=_b8.className;break;case "style":_be["style"]=_b8.style&&_b8.style.cssText;break;default:if(!(_cb in _bd)){var map=_93(_b7);_cb=map[_cc]||_cb;}if(_cb in _bd){switch(typeof _bd[_cb]){case "string":_be[_cb]=_cd;break;case "number":_be[_cb]=_cd.length?Number(_cd):NaN;break;case "boolean":_be[_cb]=_cd.toLowerCase()!="false";break;case "function":if(_cd===""||_cd.search(/[^\w\.]+/i)!=-1){_be[_cb]=new Function(_cd);}else{_be[_cb]=_86.getObject(_cd,false)||new Function(_cd);}_c8.push(_cb);break;default:var _ce=_bd[_cb];_be[_cb]=(_ce&&"length" in _ce)?(_cd?_cd.split(/\s*,\s*/):[]):(_ce instanceof Date)?(_cd==""?new Date(""):_cd=="now"?new Date():_8e.fromISOString(_cd)):(_ce instanceof _8b)?(_85.baseUrl+_cd):_8c.fromJson(_cd);}}else{_be[_cb]=_cd;}}}for(var j=0;j<_c8.length;j++){var _cf=_c8[j].toLowerCase();_b8.removeAttribute(_cf);_b8[_cf]=null;}if(_ca){try{_ca=_8c.fromJson.call(_ba.propsThis,"{"+_ca+"}");_86.mixin(_be,_ca);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_ca+"'");}}_86.mixin(_be,_b9);if(!_bb){_bb=(_b7&&(_b7._noScript||_bd._noScript)?[]:_90("> script[type^='dojo/']",_b8));}var _d0=[],_d1=[],_d2=[],ons=[];if(_bb){for(i=0;i<_bb.length;i++){var _d3=_bb[i];_b8.removeChild(_d3);var _d4=(_d3.getAttribute(_c5+"event")||_d3.getAttribute("event")),_d5=_d3.getAttribute(_c5+"prop"),_d6=_d3.getAttribute(_c5+"method"),_d7=_d3.getAttribute(_c5+"advice"),_d8=_d3.getAttribute("type"),nf=this._functionFromScript(_d3,_c5);if(_d4){if(_d8=="dojo/connect"){_d0.push({method:_d4,func:nf});}else{if(_d8=="dojo/on"){ons.push({event:_d4,func:nf});}else{_be[_d4]=nf;}}}else{if(_d8=="dojo/aspect"){_d0.push({method:_d6,advice:_d7,func:nf});}else{if(_d8=="dojo/watch"){_d2.push({prop:_d5,func:nf});}else{_d1.push(nf);}}}}}var _d9=_b7.markupFactory||_bd.markupFactory;var _da=_d9?_d9(_be,_b8,_b7):new _b7(_be,_b8);if(_c9){_86.setObject(_c9,_da);}for(i=0;i<_d0.length;i++){_8d[_d0[i].advice||"after"](_da,_d0[i].method,_86.hitch(_da,_d0[i].func),true);}for(i=0;i<_d1.length;i++){_d1[i].call(_da);}for(i=0;i<_d2.length;i++){_da.watch(_d2[i].prop,_d2[i].func);}for(i=0;i<ons.length;i++){don(_da,ons[i].event,ons[i].func);}return _da;},scan:function(_db,_dc){var _dd=[],_de=[],_df={};var _e0=(_dc.scope||_85._scopeName)+"Type",_e1="data-"+(_dc.scope||_85._scopeName)+"-",_e2=_e1+"type",_e3=_e1+"textdir",_e4=_e1+"mixins";var _e5=_db.firstChild;var _e6=_dc.inherited;if(!_e6){function _e7(_e8,_e9){return (_e8.getAttribute&&_e8.getAttribute(_e9))||(_e8.parentNode&&_e7(_e8.parentNode,_e9));};_e6={dir:_e7(_db,"dir"),lang:_e7(_db,"lang"),textDir:_e7(_db,_e3)};for(var key in _e6){if(!_e6[key]){delete _e6[key];}}}var _ea={inherited:_e6};var _eb;var _ec;function _ed(_ee){if(!_ee.inherited){_ee.inherited={};var _ef=_ee.node,_f0=_ed(_ee.parent);var _f1={dir:_ef.getAttribute("dir")||_f0.dir,lang:_ef.getAttribute("lang")||_f0.lang,textDir:_ef.getAttribute(_e3)||_f0.textDir};for(var key in _f1){if(_f1[key]){_ee.inherited[key]=_f1[key];}}}return _ee.inherited;};while(true){if(!_e5){if(!_ea||!_ea.node){break;}_e5=_ea.node.nextSibling;_ec=false;_ea=_ea.parent;_eb=_ea.scripts;continue;}if(_e5.nodeType!=1){_e5=_e5.nextSibling;continue;}if(_eb&&_e5.nodeName.toLowerCase()=="script"){_f2=_e5.getAttribute("type");if(_f2&&/^dojo\/\w/i.test(_f2)){_eb.push(_e5);}_e5=_e5.nextSibling;continue;}if(_ec){_e5=_e5.nextSibling;continue;}var _f2=_e5.getAttribute(_e2)||_e5.getAttribute(_e0);var _f3=_e5.firstChild;if(!_f2&&(!_f3||(_f3.nodeType==3&&!_f3.nextSibling))){_e5=_e5.nextSibling;continue;}var _f4;var _f5=null;if(_f2){var _f6=_e5.getAttribute(_e4),_f7=_f6?[_f2].concat(_f6.split(/\s*,\s*/)):[_f2];try{_f5=_98(_f7);}catch(e){}if(!_f5){_87.forEach(_f7,function(t){if(~t.indexOf("/")&&!_df[t]){_df[t]=true;_de[_de.length]=t;}});}var _f8=_f5&&!_f5.prototype._noScript?[]:null;_f4={types:_f7,ctor:_f5,parent:_ea,node:_e5,scripts:_f8};_f4.inherited=_ed(_f4);_dd.push(_f4);}else{_f4={node:_e5,scripts:_eb,parent:_ea};}_e5=_f3;_eb=_f8;_ec=_f5&&_f5.prototype.stopParser&&!(_dc.template);_ea=_f4;}var d=new _8f();if(_de.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+_de.join(", "));}_84(_de,function(){d.resolve(_87.filter(_dd,function(_f9){if(!_f9.ctor){try{_f9.ctor=_98(_f9.types);}catch(e){}}var _fa=_f9.parent;while(_fa&&!_fa.types){_fa=_fa.parent;}var _fb=_f9.ctor&&_f9.ctor.prototype;_f9.instantiateChildren=!(_fb&&_fb.stopParser&&!(_dc.template));_f9.instantiate=!_fa||(_fa.instantiate&&_fa.instantiateChildren);return _f9.instantiate;}));});}else{d.resolve(_dd);}return d.promise;},_require:function(_fc){var _fd=_8c.fromJson("{"+_fc.innerHTML+"}"),_fe=[],_ff=[],d=new _8f();for(var name in _fd){_fe.push(name);_ff.push(_fd[name]);}_84(_ff,function(){for(var i=0;i<_fe.length;i++){_86.setObject(_fe[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _100=new _8f(),_101=_100.promise;_100.resolve(true);var self=this;_90("script[type='dojo/require']",root).forEach(function(node){_101=_101.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _101;},parse:function(_102,_103){var root;if(!_103&&_102&&_102.rootNode){_103=_102;root=_103.rootNode;}else{if(_102&&_86.isObject(_102)&&!("nodeType" in _102)){_103=_102;}else{root=_102;}}root=root?_89.byId(root):_8a.body();_103=_103||{};var _104=_103.template?{template:true}:{},_105=[],self=this;var p=this._scanAmd(root,_103).then(function(){return self.scan(root,_103);}).then(function(_106){return _105=_105.concat(self._instantiate(_106,_104,_103));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_86.mixin(_105,p);return _105;}};if(1){_85.parser=_9c;}if(_88.parseOnLoad){_91(100,_9c,"parse");}return _9c;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_107,_108,_109){return _108("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_10a,_10b){var _10c=this.containerNode;if(_10b&&typeof _10b=="number"){var _10d=this.getChildren();if(_10d&&_10d.length>=_10b){_10c=_10d[_10b-1].domNode;_10b="after";}}_109.place(_10a.domNode,_10c,_10b);if(this._started&&!_10a._started){_10a.startup();}},removeChild:function(_10e){if(typeof _10e=="number"){_10e=this.getChildren()[_10e];}if(_10e){var node=_10e.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_10f,dir){var _110=this.getChildren(),idx=_107.indexOf(this.getChildren(),_10f);return _110[idx+dir];},getIndexOfChild:function(_111){return _107.indexOf(this.getChildren(),_111);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_112,keys,_113,has,_114,win){var _115=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_115=evt.target;},true);}else{(function(){var _116=function(evt){_115=evt.srcElement;};win.doc.attachEvent("onkeydown",_116);_114.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_116);});})();}function _117(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_118){if(/input|button/i.test(node.nodeName)){return on(node,"click",_118);}else{var _119=[on(node,"keydown",function(e){if(_117(e)){_115=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_117(e)&&e.target==_115){_115=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_118.call(this,e);})];if(has("touch")){var _11a;_119.push(on(node,"touchend",function(e){var _11b=e.target;_11a=setTimeout(function(){_11a=null;on.emit(_11b,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_11a){clearTimeout(_11a);}}));}return {remove:function(){_112.forEach(_119,function(h){h.remove();});if(_11a){clearTimeout(_11a);_11a=null;}}};}};return ret;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_11c,_11d,_11e,_11f,i18n,_120,_121,_122,_123,_124,keys,lang,has,_125,_126,win,_127,_128,_129,_12a,_12b,_12c,_12d,_12e,html,_12f,_130,_131){var _132=_11e("dijit.Editor",_130,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_12e];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _11f();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _129({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_11d.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_121.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_121.add(this.iframe,"dijitEditorIFrame");_120.set(this.iframe,"allowTransparency",true);if(has("webkit")){_123.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_11d.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_133,_134){var args=lang.isString(_133)?{name:_133}:lang.isFunction(_133)?{ctor:_133}:_133;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_12d.registry[args.name]){o.plugin=_12d.registry[args.name](args);}else{_126.publish(_131._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_11c(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_133=o.plugin;}if(arguments.length>1){this._plugins[_134]=_133;}else{this._plugins.push(_133);}_133.setEditor(this);if(lang.isFunction(_133.setToolbar)){_133.setToolbar(this.toolbar);}},resize:function(size){if(size){_12b.prototype.resize.apply(this,arguments);}},layout:function(){var _135=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_122.getPadBorderExtents(this.iframe.parentNode).h+_122.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_135+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _136;var b=this.document.body;var _137=b.clientWidth;var _138=b.clientHeight;var _139=b.clientLeft;var _13a=b.offsetWidth;var _13b=b.offsetHeight;var _13c=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_137<_13a&&e.x>_137&&e.x<_13a){_136=true;}}else{if(e.x<_139&&e.x>_13c){_136=true;}}if(!_136){if(_138<_13b&&e.y>_138&&e.y<_13b){_136=true;}}if(!_136){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_125.substitute,_13d={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_13d[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _13e=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_13f,_140,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_13e=[];_11d.forEach(mark,function(n){_13e.push(_12f.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_127,[{mark:_13e,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_12f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_12f.create(this.window);_13f=_12f.getNode(mark.startContainer,this.editNode);_140=_12f.getNode(mark.endContainer,this.editNode);if(_13f&&_140){r.setStart(_13f,mark.startOffset);r.setEnd(_140,mark.endOffset);sel.addRange(r);}}}}}else{sel=_12f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_12f.create(this.window);_13f=_12f.getNode(mark.startContainer,this.editNode);_140=_12f.getNode(mark.endContainer,this.editNode);if(_13f&&_140){r.setStart(_13f,mark.startOffset);r.setEnd(_140,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_141){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_141);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_127.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_12f.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _142;if(sel.rangeCount){_142=sel.getRangeAt(0);}if(_142){b.mark=_142.cloneRange();}else{b.mark=win.withGlobal(this.window,_127.getBookmark);}}}else{_11d.forEach(b.mark,function(n){tmp.push(_12f.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_12f.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_12f.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_124.stop(e);this.undo();return;}else{if(k==89||k==121){_124.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_127)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_143){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_143)||(!this._buttonEnabledPlugins&&_143)){_11d.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_143){_11d.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_123.set(this.document.body,"color",_123.get(this.iframe,"color"));}}catch(e){}}});function _144(args){return new _12d({command:args.name});};function _145(args){return new _12d({buttonClass:_12c,command:args.name});};lang.mixin(_12d.registry,{"undo":_144,"redo":_144,"cut":_144,"copy":_144,"paste":_144,"insertOrderedList":_144,"insertUnorderedList":_144,"indent":_144,"outdent":_144,"justifyCenter":_144,"justifyFull":_144,"justifyLeft":_144,"justifyRight":_144,"delete":_144,"selectAll":_144,"removeFormat":_144,"unlink":_144,"insertHorizontalRule":_144,"bold":_145,"italic":_145,"underline":_145,"strikethrough":_145,"subscript":_145,"superscript":_145,"|":function(){return new _12d({setEditor:function(_146){this.editor=_146;this.button=new _12a({ownerDocument:_146.ownerDocument});}});}});return _132;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_147,_148,_149,_14a,lang,has,_14b,_14c,_14d,_14e){var _14f=_147("dijit.form.TextBox",[_14b,_14c],{templateString:_14d,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_149.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _150=this.domNode.getElementsByTagName("INPUT");if(_150){for(var i=0;i<_150.length;i++){_150[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_148.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_151,_152,_153){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_14a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_154){_14a.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_154);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")){_14f.prototype._isTextSelected=function(){var _155=this.ownerDocument.selection.createRange();var _156=_155.parentElement();return _156==this.textbox&&_155.text.length>0;};_14e._setSelectionRange=_14c._setSelectionRange=function(_157,_158,stop){if(_157.createTextRange){var r=_157.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_158);r.moveEnd("character",stop-_158);r.select();}};}return _14f;});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_159,_15a,_15b,_15c,_15d,_15e,_15f,_160){return _15d("dijit.layout._LayoutWidget",[_159,_15a,_15b],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_15e.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _161=this.getParent&&this.getParent();if(!(_161&&_161.isLayoutContainer)){this.resize();this.own(_15c.on("resize",lang.hitch(this,"resize")));}},resize:function(_162,_163){var node=this.domNode;if(_162){_15f.setMarginBox(node,_162);}var mb=_163||{};lang.mixin(mb,_162||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_15f.getMarginBox(node),mb);}var cs=_160.getComputedStyle(node);var me=_15f.getMarginExtents(node,cs);var be=_15f.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_15f.getPadExtents(node,cs);this._contentBox={l:_160.toPixelValue(node,cs.paddingLeft),t:_160.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_164){var cls=this.baseClass+"-child "+(_164.baseClass?this.baseClass+"-"+_164.baseClass:"");_15e.add(_164.domNode,cls);},addChild:function(_165,_166){this.inherited(arguments);if(this._started){this._setupChild(_165);}},removeChild:function(_167){var cls=this.baseClass+"-child"+(_167.baseClass?" "+this.baseClass+"-"+_167.baseClass:"");_15e.remove(_167.domNode,cls);this.inherited(arguments);}});});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_168,_169,lang,_16a,has,_16b,_16c){var _16d=_169(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_168._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_16e){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _16f=this._featureMap[oid];if(_16f){_16f._count++;}},_decRefCount:function(oid){var _170=this._featureMap[oid];if(_170){_170._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_171){var fmap=this._featureMap,_172=fmap[oid],_173=this.featureLayer;if(!_172){fmap[oid]=_171;_173._add(_171);_171._count=0;}return _172||_171;},_removeFeatureIIf:function(oid){var _174=this._featureMap[oid],_175=this.featureLayer;if(_174){if(_174._count){return;}delete this._featureMap[oid];_175._remove(_174);}return _174;},_clearIIf:function(){var i,_176=this.featureLayer,_177=_176.graphics,_178=_176._selectedFeatures,_179=_176.objectIdField;for(i=_177.length-1;i>=0;i--){var _17a=_177[i];var oid=_17a.attributes[_179];if(oid in _178){_17a._count=1;continue;}_17a._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_16b[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_16b[this._prefix+id];if(dfd){try{dfd.cancel();_16b._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_16b._validCheck(null);},_toggleVisibility:function(show){var _17b=this.featureLayer,_17c=_17b.graphics,_17d=show?"show":"hide",i,len=_17c.length;show=show&&_17b._ager;for(i=0;i<len;i++){var _17e=_17c[i];_17e[_17d]();if(show){_17b._repaint(_17e);}}},_applyTimeFilter:function(_17f){var _180=this.featureLayer;if(!_180.timeInfo||_180.suspended){return;}if(!_17f){_180._fireUpdateStart();}var _181=_180._trackManager;if(_181){_181.clearTracks();}var defn=_180.getTimeDefinition(),_182=_180._getOffsettedTE(_180._mapTimeExtent);if(_182){_182=_180._getTimeOverlap(defn,_182);if(_182){var _183=_180._filterByTime(_180.graphics,_182.startTime,_182.endTime);if(_181){_181.addFeatures(_183.match);}_16a.forEach(_183.match,function(_184){var _185=_184._shape;if(!_184.visible){_184.show();_185=_184._shape;_185&&_185._moveToFront();}if(_180._ager&&_185){_180._repaint(_184);}});_16a.forEach(_183.noMatch,function(_186){if(_186.visible){_186.hide();}});}else{this._toggleVisibility(false);}}else{if(_181){_181.addFeatures(_180.graphics);}this._toggleVisibility(true);}if(_181){_181.moveLatestToFront();_181.drawTracks();}if(!_17f){_180._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_16d,_16c);}return _16d;});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_187,_188,_189,keys,lang,_18a,has,_18b,when,_18c){return _188("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _18d=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_18d=true;break;default:_18d=typeof key=="string"||key==229;}if(_18d){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _18e=this,_18a=lang.clone(this.query),_18f={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_18b.substitute(this.queryExpr,[text]),q,_190=function(){var _191=_18e._fetchHandle=_18e.store.query(_18a,_18f);if(_18e.disabled||_18e.readOnly||(q!==_18e._lastQuery)){return;}when(_191,function(res){_18e._fetchHandle=null;if(!_18e.disabled&&!_18e.readOnly&&(q===_18e._lastQuery)){when(_191.total,function(_192){res.total=_192;var _193=_18e.pageSize;if(isNaN(_193)||_193>res.total){_193=res.total;}res.nextPage=function(_194){_18f.direction=_194=_194!==false;_18f.count=_193;if(_194){_18f.start+=res.length;if(_18f.start>=res.total){_18f.count=0;}}else{_18f.start-=_193;if(_18f.start<0){_18f.count=Math.max(_193+_18f.start,0);_18f.start=0;}}if(_18f.count<=0){res.length=0;_18e.onSearch(res,_18a,_18f);}else{_190();}};_18e.onSearch(res,_18a,_18f);});}},function(err){_18e._fetchHandle=null;if(!_18e._cancelingQuery){console.error(_18e.declaredClass+" "+err.toString());}});};lang.mixin(_18f,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_187.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_18a[this.searchAttr]=q;this._queryDeferHandle=this.defer(_190,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_18c.byId(list);}}this.inherited(arguments);}});});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_195,_196,_197){return _195("dijit.form.DateTextBox",_197,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_196,_selector:"date",value:new Date("")});});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_198,_199,_19a,_19b,lang,_19c,has,_19d,a11y){return _199("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_19e){this._set("disabled",_19e);_19a.set(this.focusNode,"disabled",_19e);if(this.valueNode){_19a.set(this.valueNode,"disabled",_19e);}this.focusNode.setAttribute("aria-disabled",_19e?"true":"false");if(_19e){this._set("hovering",false);this._set("active",false);var _19f="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_198.forEach(lang.isArray(_19f)?_19f:[_19f],function(_1a0){var node=this[_1a0];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _1a1=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_1a2);this.disconnect(_1a1);});var _1a2=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_1a2);this.disconnect(_1a1);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_19d.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_19b.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_1a3,_1a4){if(this._lastValueReported==undefined&&(_1a4===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_1a3;}this._pendingOnChange=this._pendingOnChange||(typeof _1a3!=typeof this._lastValueReported)||(this.compare(_1a3,this._lastValueReported)!=0);if((this.intermediateChanges||_1a4||_1a4===undefined)&&this._pendingOnChange){this._lastValueReported=_1a3;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_1a3);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_1a5,_1a6,_1a7,_1a8,_1a9,lang,on,has,win){var _1aa=new function(){var _1ab=[];this.pop=function(){var _1ac;if(_1ab.length){_1ac=_1ab.pop();_1ac.style.display="";}else{if(has("ie")<9){var burl=_1a7["dojoBlankHtmlUrl"]||_1a5.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1ac=win.doc.createElement(html);}else{_1ac=_1a8.create("iframe");_1ac.src="javascript:\"\"";_1ac.className="dijitBackgroundIframe";_1ac.setAttribute("role","presentation");_1a9.set(_1ac,"opacity",0.1);}_1ac.tabIndex=-1;}return _1ac;};this.push=function(_1ad){_1ad.style.display="none";_1ab.push(_1ad);};}();_1a6.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _1ae=(this.iframe=_1aa.pop());node.appendChild(_1ae);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_1a9.set(_1ae,{width:"100%",height:"100%"});}}};lang.extend(_1a6.BackgroundIframe,{resize:function(node){if(this.iframe){_1a9.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_1aa.push(this.iframe);delete this.iframe;}}});return _1a6.BackgroundIframe;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_1af,_1b0,i18n,_1b1,_1b2,_1b3){var _1b4;return _1b4=_1af("dijit.form.ValidationTextBox",_1b1,{templateString:_1b3,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_1b5){if(_1b5!=_1b4.prototype[attr]){_1b0.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_1b5);}},_setRegExpGenAttr:function(_1b6){this._deprecateRegExp("regExpGen",_1b6);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_1b7){this._deprecateRegExp("regExp",_1b7);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_1b8,_1b9){return (new RegExp("^(?:"+this._getPatternAttr(_1b9)+")"+(this.required?"":"?")+"$")).test(_1b8)&&(!this.required||!this._isEmpty(_1b8))&&(this._isEmpty(_1b8)||this.parse(_1b8,_1b9)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_1ba){return (this.trim?/^\s*$/:/^$/).test(_1ba);},getErrorMessage:function(){var _1bb=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _1bc=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_1bb:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_1bc:_1bb;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_1bd){var _1be="";var _1bf=this.disabled||this.isValid(_1bd);if(_1bf){this._maskValidSubsetError=true;}var _1c0=this._isEmpty(this.textbox.value);var _1c1=!_1bf&&_1bd&&this._isValidSubset();this._set("state",_1bf?"":(((((!this._hasBeenBlurred||_1bd)&&_1c0)||_1c1)&&(this._maskValidSubsetError||(_1c1&&!this._hasBeenBlurred&&_1bd)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_1bf?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_1bd&&_1c1;_1be=this.getErrorMessage(_1bd);}else{if(this.state=="Incomplete"){_1be=this.getPromptMessage(_1bd);this._maskValidSubsetError=!this._hasBeenBlurred||_1bd;}else{if(_1c0){_1be=this.getPromptMessage(_1bd);}}}this.set("message",_1be);return _1bf;},displayMessage:function(_1c2){if(_1c2&&this.focused){_1b2.show(_1c2,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_1b2.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_1c3){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_1c4){if(!_1c4.locale&&this.lang){_1c4.locale=this.lang;}this._set("constraints",_1c4);this._refreshState();},_setPatternAttr:function(_1c5){this._set("pattern",_1c5);},_getPatternAttr:function(_1c6){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_1c6||this.constraints);}if(p!=this._lastRegExp){var _1c7="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_1c7+=re;break;case ")":_1c7+="|$)";break;default:_1c7+="(?:"+re+"|$)";break;}});}try{"".search(_1c7);}catch(e){_1c7=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_1c7+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_1c8){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_1c9){this._set("required",_1c9);this.focusNode.setAttribute("aria-required",_1c9);this._refreshState();},_setMessageAttr:function(_1ca){this._set("message",_1ca);this.displayMessage(_1ca);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_1cb){return _1cb;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_1cc,_1cd,_1ce){return _1cd("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_1ce.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_1cc.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_1cf,_1d0,keys,has,_1d1){return _1cf("dijit.form._FormValueMixin",_1d1,{readOnly:false,_setReadOnlyAttr:function(_1d2){_1d0.set(this.focusNode,"readOnly",_1d2);this._set("readOnly",_1d2);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_1d3,_1d4){this._handleOnChange(_1d3,_1d4);},_handleOnChange:function(_1d5,_1d6){this._set("value",_1d5);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_1d7,lang,_1d8,_1d9,has,_1da,_1db,_1dc){var _1dd=_1d7(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_1dd.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,toJson:function(_1de){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_1de&&_1de["geometry"]||this.geometry,ids=this.objectIds,_1df=this.outFields,_1e0=this.outSpatialReference,_1e1=this.groupByFieldsForStatistics,_1e2=this.orderByFields,_1e3=this.outStatistics;if(g){json.geometry=g;json.geometryType=_1db.getJsonType(g);json.inSR=g.spatialReference.wkid||_1d9.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_1df){json.outFields=_1df.join(",");}if(_1e1){json.groupByFieldsForStatistics=_1e1.join(",");}if(_1e2){json.orderByFields=_1e2.join(",");}if(_1e3){var _1e4=[];_1d8.forEach(_1e3,function(item,idx){_1e4.push(item.toJson());});json.outStatistics=_1d9.toJson(_1e4);}if(_1e0!==null){json.outSR=_1e0.wkid||_1d9.toJson(_1e0.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_1d9.toJson(g.spatialReference.toJson());}}var _1e5=this.timeExtent;json.time=_1e5?_1e5.toJson().join(","):null;var _1e6=this.relationParam;if(_1e6&&this.spatialRelationship===_1dd.SPATIAL_REL_RELATION){json.relationParam=_1e6;}json.pixelSize=this.pixelSize?_1d9.toJson(this.pixelSize.toJson()):null;json._ts=this._ts;return json;}});lang.mixin(_1dd,_1dc);if(has("extend-esri")){lang.setObject("tasks.Query",_1dd,_1da);}return _1dd;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_1e7,lang,has,_1e8,_1e9,_1ea){var _1eb=_1e7(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _1ec=json.prototype;this.prototype=new _1ea(_1ec.geometry,null,_1ec.attributes);}},toJson:function(){return _1e9.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_1eb,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_1eb,_1e8);}return _1eb;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_1ed,_1ee,_1ef,lang,_1f0,_1f1,_1f2){new Date("X");var _1f3=_1ef("dijit.form._DateTimeTextBox",[_1f0,_1f1],{templateString:_1f2,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_1ed.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _1f4=this._isInvalidDate(val1);var _1f5=this._isInvalidDate(val2);return _1f4?(_1f5?0:-1):(_1f5?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_1f6,_1f7){if(!_1f6){return "";}return this.dateLocaleModule.format(_1f6,_1f7);},"parse":function(_1f8,_1f9){return this.dateLocaleModule.parse(_1f8,_1f9)||(this._isEmpty(_1f8)?null:undefined);},serialize:function(val,_1fa){if(val.toGregorian){val=val.toGregorian();}return _1ee.toISOString(val,_1fa);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_1fb){this.dateModule=_1fb.datePackage?lang.getObject(_1fb.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_1fb.datePackage?lang.getObject(_1fb.datePackage+".locale",false):_1ed;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_1fc){_1fc.selector=this._selector;_1fc.fullYear=true;var _1fd=_1ee.fromISOString;if(typeof _1fc.min=="string"){_1fc.min=_1fd(_1fc.min);}if(typeof _1fc.max=="string"){_1fc.max=_1fd(_1fc.max);}this.inherited(arguments);},_isInvalidDate:function(_1fe){return !_1fe||isNaN(_1fe)||typeof _1fe!="object"||_1fe.toString()==this._invalidDate;},_setValueAttr:function(_1ff,_200,_201){if(_1ff!==undefined){if(typeof _1ff=="string"){_1ff=_1ee.fromISOString(_1ff);}if(this._isInvalidDate(_1ff)){_1ff=null;}if(_1ff instanceof Date&&!(this.dateClassObj instanceof Date)){_1ff=new this.dateClassObj(_1ff);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_1ff,false);}},_set:function(attr,_202){if(attr=="value"&&this.value instanceof Date&&this.compare(_202,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_203){if(this.dropDown){this.dropDown.destroy();}var _204=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_205=this,_206=this.get("value");this.dropDown=new _204({onChange:function(_207){_205.set("value",_207,true);},id:this.id+"_popup",dir:_205.dir,lang:_205.lang,value:_206,currentFocus:!this._isInvalidDate(_206)?_206:this.dropDownDefaultValue,constraints:_205.constraints,filterString:_205.filterString,datePackage:_205.params.datePackage,isDisabledDate:function(date){return !_205.rangeCheck(date,_205.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_208,_209){this._setValueAttr(this.parse(_208,this.constraints),_209,_208);}});return _1f3;});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_20a,_20b,lang,_20c){var _20d=_20b("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_20c,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _20e=this.getLabel(this.command),_20f=this.editor,_210=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _211=lang.mixin({label:_20e,ownerDocument:_20f.ownerDocument,dir:_20f.dir,lang:_20f.lang,showLabel:false,iconClass:_210,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_211);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_20a.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_212,_213;if(!e||!e.isLoaded||!c.length){return;}var _214=this.get("disabled");if(this.button){try{_213=!_214&&e.queryCommandEnabled(c);if(this.enabled!==_213){this.enabled=_213;this.button.set("disabled",!_213);}if(_213){if(typeof this.button.checked=="boolean"){_212=e.queryCommandState(c);if(this.checked!==_212){this.checked=_212;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_215){this.editor=_215;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_216){if(this.button){_216.addChild(this.button);}},set:function(name,_217){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _218=this._getAttrNames(name);if(this[_218.s]){var _219=this[_218.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_217);}return _219||this;},get:function(name){var _21a=this._getAttrNames(name);return this[_21a.g]?this[_21a.g]():this[name];},_setDisabledAttr:function(_21b){this.disabled=_21b;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_21c){this[name]=_21c;}});_20d.registry={};return _20d;});},"esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_21d,lang,has,_21e){var _21f=_21d(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(json){if(json&&lang.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});if(has("extend-esri")){lang.setObject("layers.FeatureEditResult",_21f,_21e);}return _21f;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _220={};lang.setObject("dojo.data.util.sorter",_220);_220.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_220.createSortFunction=function(_221,_222){var _223=[];function _224(attr,dir,comp,s){return function(_225,_226){var a=s.getValue(_225,attr);var b=s.getValue(_226,attr);return dir*comp(a,b);};};var _227;var map=_222.comparatorMap;var bc=_220.basicComparator;for(var i=0;i<_221.length;i++){_227=_221[i];var attr=_227.attribute;if(attr){var dir=(_227.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_223.push(_224(attr,dir,comp,_222));}}return function(rowA,rowB){var i=0;while(i<_223.length){var ret=_223[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _220;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_228,lang,_229){var _22a=function(_22b){if(!_22b){return _22b;}if(_22b.then){_22b=lang.delegate(_22b);}function _22c(_22d){if(!_22b[_22d]){_22b[_22d]=function(){var args=arguments;return _229.when(_22b,function(_22e){Array.prototype.unshift.call(args,_22e);return _22a(_228[_22d].apply(_228,args));});};}};_22c("forEach");_22c("filter");_22c("map");if(!_22b.total){_22b.total=_229.when(_22b,function(_22f){return _22f.length;});}return _22b;};lang.setObject("dojo.store.util.QueryResults",_22a);return _22a;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_230,dom,lang,on,has,_231,_232,win){var _233=navigator.msPointerEnabled;var _234;function _235(_236,_237,_238){if(_233&&_238){return function(node,_239){return on(node,_238,_239);};}else{if(has("touch")){return function(node,_23a){var _23b=on(node,_237,_23a),_23c=on(node,_236,function(evt){if(!_234||(new Date()).getTime()>_234+1000){_23a.call(this,evt);}});return {remove:function(){_23b.remove();_23c.remove();}};};}else{return function(node,_23d){return on(node,_236,_23d);};}}};var _23e,_23f,_240;if(has("touch")&&!_233){_232(function(){_240=win.body();win.doc.addEventListener("touchstart",function(_241){_234=(new Date()).getTime();var _242=_240;_240=_241.target;if(_240.dojoElementFromPoint){_240=_240.dojoElementFromPoint(_241.changedTouches[0].clientX,_241.changedTouches[0].clientY);}if(_242){on.emit(_242,"dojotouchout",{target:_242,relatedTarget:_240,bubbles:true});}if(_240){on.emit(_240,"dojotouchover",{target:_240,relatedTarget:_242,bubbles:true});}},true);on(win.doc,"touchmove",function(_243){_234=(new Date()).getTime();_23f=_243;var _244=win.doc.elementFromPoint(_243.clientX,_243.clientY);if(_244){var _245=_244;if(_244.dojoElementFromPoint){_244=_244.dojoElementFromPoint(_243.clientX,_243.clientY);}if(_240!==_244){if(_240){on.emit(_245,"dojotouchout",{target:_240,relatedTarget:_244,bubbles:true});}if(_244){on.emit(_245,"dojotouchover",{target:_244,relatedTarget:_240,bubbles:true});}_240=_244;}on.emit(_245,"dojotouchmove",{target:_244,bubbles:true});}});on(win.doc,"touchend",function(_246){var node=win.doc.elementFromPoint(_246.clientX,_246.clientY);var _247=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(_246.clientX,_246.clientY);}if(node){on.emit(_247,"dojotouchend",lang.delegate(_246,{target:node,bubbles:true}));}});});_23e=function(node,_248){return on(node,"dojotouchmove",function(_249){_248(lang.delegate(_23f,{target:_249.target,preventDefault:function(){_23f.preventDefault();},stopPropagation:function(){_249.stopPropagation();}}));});};}var _24a={press:_235("mousedown","touchstart","MSPointerDown"),move:_235("mousemove",_23e,"MSPointerMove"),release:_235("mouseup","dojotouchend","MSPointerUp"),cancel:_235(_231.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_235("mouseover","dojotouchover","MSPointerOver"),out:_235("mouseout","dojotouchout","MSPointerOut"),enter:_231._eventHandler(_235("mouseover","dojotouchover","MSPointerOver")),leave:_231._eventHandler(_235("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=_24a);return _24a;});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_24b,_24c,dom,_24d,has,lang,on,_24e,win,_24f){var _250=_24c("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_24b.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_251){if(!this.disabled){switch(_251.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _252=this.baseClass.split(" ");function _253(_254){_252=_252.concat(_24b.map(_252,function(c){return c+_254;}),"dijit"+_254);};if(!this.isLeftToRight()){_253("Rtl");}var _255=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_253(_255);}if(this.state){_253(this.state);}if(this.selected){_253("Selected");}if(this._opened){_253("Opened");}if(this.disabled){_253("Disabled");}else{if(this.readOnly){_253("ReadOnly");}else{if(this.active){_253("Active");}else{if(this.hovering){_253("Hover");}}}}if(this.focused){_253("Focused");}var tn=this.stateNode||this.domNode,_256={};_24b.forEach(tn.className.split(" "),function(c){_256[c]=true;});if("_stateClasses" in this){_24b.forEach(this._stateClasses,function(c){delete _256[c];});}_24b.forEach(_252,function(c){_256[c]=true;});var _257=[];for(var c in _256){_257.push(c);}tn.className=_257.join(" ");this._stateClasses=_252;},_subnodeCssMouseEvent:function(node,_258,evt){if(this.disabled||this.readOnly){return;}function _259(_25a){_24d.toggle(node,_258+"Hover",_25a);};function _25b(_25c){_24d.toggle(node,_258+"Active",_25c);};function _25d(_25e){_24d.toggle(node,_258+"Focused",_25e);};switch(evt.type){case "mouseover":_259(true);break;case "mouseout":_259(false);_25b(false);break;case "mousedown":case "touchstart":_25b(true);break;case "mouseup":case "touchend":_25b(false);break;case "focus":case "focusin":_25d(true);break;case "blur":case "focusout":_25d(false);break;}},_trackMouseState:function(node,_25f){node._cssState=_25f;}});_24e(function(){function _260(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _261=_24f.getEnclosingWidget(node);if(_261){if(node==_261.domNode){_261._cssMouseEvent(evt);}else{_261._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _262(evt){evt.target=evt.srcElement;_260(evt);};var body=win.body(),_263=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_24b.forEach(_263,function(type){if(body.addEventListener){body.addEventListener(type,_260,true);}else{body.attachEvent("on"+type,_262);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _264=_24f.getEnclosingWidget(node);_264._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _250;});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_265,_266,lang,_267,_268,_269,has,_26a,_26b,_26c,_26d,_26e,_26f,_270,_271,_272,_273){var AE=_266([_26d,_26e],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_272,basePath:_265.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_274,_275){lang.mixin(this,_273.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_267.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_267.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_271.hide(this._attachmentError);}));},destroy:function(){_268.forEach(this._aeConnects,_267.disconnect);_267.disconnect(this._uploadField_connect);_267.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_276,_277){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_268.forEach(this.domNode.children,function(_278,idx){_271.show(_278);});_271.hide(this._attachmentError);if(!_276){return;}this._featureLayer=_276.getLayer()||_277;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_271.hide(this._uploadForm);_268.forEach(this.domNode.children,function(_279,idx){_271.hide(_279);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_276}).canUpdate;this._oid=_276.attributes[this._featureLayer.objectIdField];this._getAttachments(_276);},_getAttachments:function(_27a){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_271.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_27b){this._featureLayer.deleteAttachments(oid,[_27b],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_27c){var _27d=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_27d=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_27d=this._listHtml+this._endHtml;}}var list=this._attachmentList,_27e=_268.map(_27c,lang.hitch(this,function(info){return _270.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_27d);}));list.innerHTML=_27e.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_27f){var _280=this._uploadField;var _281=_280.value;var pos=_281.lastIndexOf("\\");if(pos>-1){_281=_281.substring(pos+1,_281.length);}_281=_281.replace(/\ /g,"_");var list=this._attachmentList,_282=_26b.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _283=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_283=this._listHtml+this._endHtml;}var link=_270.substitute({href:this._featureLayer._url.path+"/"+_27f.objectId+"/attachments/"+_27f.attachmentId+(_282?("?"+_282):""),name:_281,oid:_27f.objectId,attid:_27f.attachmentId},_283);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_280.value="";},_onAddAttachmentError:function(_284){if(_284&&_270.isDefined(_284.code)){var _285,_286=this._attachmentError;if(_284.code===400){_285=this.NLS_fileNotSupported;}else{_285=_284.message||(_284.details&&_284.details.length&&_284.details[0]);}_26c.set(_286,"innerHTML",(_285||this.NLS_error));_271.show(_286);}},_onDeleteAttachmentComplete:function(_287){var _288=_268.every(_287,function(_289){return _289.success;}),list=this._attachmentList;if(_288){_269.query("#node_"+_287[0].objectId+"_"+_287[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_268.forEach(this._aeConnects,_267.disconnect);_269.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_267.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_26f);}return AE;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_28a,_28b,_28c,_28d,has,_28e,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_28b.blankGif||_28a.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_28d.getComputedStyle(div),_28f=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_28f&&(_28f=="none"||_28f=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_28e(90,function(){if(has("highcontrast")){_28c.add(win.body(),"dj_a11y");}});return has;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_290,has,_291,_292){return _290("dijit.form._FormValueWidget",[_291,_292],{_layoutHackIE7:function(){if(has("ie")==7){var _293=this.domNode;var _294=_293.parentNode;var _295=_293.firstChild||_293;var _296=_295.style.filter;var _297=this;while(_294&&_294.clientHeight==0){(function ping(){var _298=_297.connect(_294,"onscroll",function(){_297.disconnect(_298);_295.style.filter=(new Date()).getMilliseconds();_297.defer(function(){_295.style.filter=_296;});});})();_294=_294.parentNode;}}}});});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_299,dom,_29a,_29b){return _299("dijit.ToolbarSeparator",[_29a,_29b],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _29c={};lang.setObject("dojo.data.util.filter",_29c);_29c.patternToRegExp=function(_29d,_29e){var rxp="^";var c=null;for(var i=0;i<_29d.length;i++){c=_29d.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_29d.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_29e){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _29c;});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_29f,_2a0,_2a1,has,_2a2,lang,_2a3,_2a4,_2a5,_2a6){if(has("dijit-legacy-requires")){_2a3(0,function(){var _2a7=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_29f(_2a7);});}return _2a0("dijit.form.Button",[_2a4,_2a5],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_2a6,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_2a8){if(_2a8&&(!this.params||!("label" in this.params))){var _2a9=lang.trim(_2a8.innerHTML);if(_2a9){this.label=_2a9;}}},_setShowLabelAttr:function(val){if(this.containerNode){_2a1.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_2aa){_2a2.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2aa);},_setLabelAttr:function(_2ab){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_2ac,lang,has){var _2ad={};lang.setObject("dijit._editor.html",_2ad);var _2ae=_2ad.escapeXml=function(str,_2af){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_2af){str=str.replace(/'/gm,"&#39;");}return str;};_2ad.getNodeHtml=function(node){var _2b0=[];_2ad.getNodeHtmlHelper(node,_2b0);return _2b0.join("");};_2ad.getNodeHtmlHelper=function(node,_2b1){switch(node.nodeType){case 1:var _2b2=node.nodeName.toLowerCase();if(!_2b2||_2b2.charAt(0)=="/"){return "";}_2b1.push("<",_2b2);var _2b3=[],_2b4={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _2b4)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_2b3.push([n,v]);_2b4[n]=v;}}}else{var _2b5=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_2b5.outerHTML;var _2b6=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _2b7=s.match(_2b6);s=s.substr(0,s.indexOf(">"));_2ac.forEach(_2b7,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_2b3.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_2b8;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_2b2==="img"){_2b8=/width=(\S+)/i.exec(s);if(_2b8){val=_2b8[1];}break;}case "height":if(_2b2==="img"){_2b8=/height=(\S+)/i.exec(s);if(_2b8){val=_2b8[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_2b3.push([key,val.toString()]);}}}}},this);}_2b3.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_2b3[j++])){_2b1.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_2ae(attr[1],true):attr[1]),"\"");}switch(_2b2){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_2b1.push(" />");break;case "script":_2b1.push(">",node.innerHTML,"</",_2b2,">");break;default:_2b1.push(">");if(node.hasChildNodes()){_2ad.getChildrenHtmlHelper(node,_2b1);}_2b1.push("</",_2b2,">");}break;case 4:case 3:_2b1.push(_2ae(node.nodeValue,true));break;case 8:_2b1.push("<!--",_2ae(node.nodeValue,true),"-->");break;default:_2b1.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_2ad.getChildrenHtml=function(node){var _2b9=[];_2ad.getChildrenHtmlHelper(node,_2b9);return _2b9.join("");};_2ad.getChildrenHtmlHelper=function(dom,_2ba){if(!dom){return;}var _2bb=dom["childNodes"]||dom;var _2bc=!has("ie")||_2bb!==dom;var node,i=0;while((node=_2bb[i++])){if(!_2bc||node.parentNode==dom){_2ad.getNodeHtmlHelper(node,_2ba);}}};return _2ad;});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_2bd,_2be,_2bf,_2c0,keys,_2c1,_2c2,_2c3,lang){return _2c1("dijit._KeyNavContainer",[_2bf,_2be],{tabIndex:"0",connectKeyNavHandlers:function(_2c4,_2c5){var _2c6=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_2c0.forEach(_2c4,function(code){_2c6[code]=prev;});_2c0.forEach(_2c5,function(code){_2c6[code]=next;});_2c6[keys.HOME]=lang.hitch(this,"focusFirstChild");_2c6[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_2bd.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_2c0.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_2c7,_2c8){this.inherited(arguments);this._startupChild(_2c7);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_2c9,last){if(!_2c9){return;}if(this.focusedChild&&_2c9!==this.focusedChild){this._onChildBlur(this.focusedChild);}_2c9.set("tabIndex",this.tabIndex);_2c9.focus(last?"end":"start");this._set("focusedChild",_2c9);},_startupChild:function(_2ca){_2ca.set("tabIndex","-1");this.connect(_2ca,"_onFocus",function(){_2ca.set("tabIndex",this.tabIndex);});this.connect(_2ca,"_onBlur",function(){_2ca.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_2c3.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_2c3.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_2c2.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_2cb,dir){if(_2cb){_2cb=this._getSiblingOfChild(_2cb,dir);}var _2cc=this.getChildren();for(var i=0;i<_2cc.length;i++){if(!_2cb){_2cb=_2cc[(dir>0)?0:(_2cc.length-1)];}if(_2cb.isFocusable()){return _2cb;}_2cb=this._getSiblingOfChild(_2cb,dir);}return null;}});});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_2cd,lang,_2ce,_2cf,_2d0,_2d1,has,_2d2,_2d3,_2d4,_2d5,_2d6,_2d7,_2d8,_2d9,fx,gfx,_2da,_2db,_2dc,_2dd,_2de,_2df,Util,_2e0,_2e1,_2e2,_2e3,_2e4,_2e5,_2e6,_2e7,_2e8,_2e9,_2ea,_2eb,_2ec,_2ed){var ATI=_2cd([_2da,_2db],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_2ed,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_2ee,_2ef){lang.mixin(this,_2d9.widgets.attributeInspector);_2ee=_2ee||{};if(!_2ee.featureLayer&&!_2ee.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_2ee.featureLayer&&_2ee.featureLayer.credential){var _2f0=_2ee.featureLayer.id;this._userIds[_2f0]=_2ee.featureLayer.credential.userId;}else{if(_2ee.layerInfos){var _2f1=_2ee.layerInfos;_2ce.forEach(_2f1,function(_2f2){if(_2f2.featureLayer){var _2f3=_2f2.featureLayer.id;if(_2f2.featureLayer.credential){this._userIds[_2f3]=_2f2.featureLayer.credential.userId;}if(_2f2.userId){this._userIds[_2f3]=_2f2.userId;}}},this);}}this._datePackage=this._getDatePackage(_2ee);this._layerInfos=_2ee.layerInfos||[{featureLayer:_2ee.featureLayer,options:_2ee.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_2ee.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_2ce.forEach(this._aiConnects,_2cf.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_2f4,_2f5){if(_2f5){this._createOnlyFirstTime=true;}this._updateSelection([_2f4],_2f5);this._updateUI();},onLayerSelectionChange:function(_2f6,_2f7,_2f8){this._createOnlyFirstTime=false;this._featureIdx=(_2f8===_2d8.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_2f9,adds,_2fa,_2fb){_2fb=_2fb||[];if(_2fb.length){var _2fc=this._selection;var _2fd=_2f9.featureLayer.objectIdField;_2ce.forEach(_2fb,lang.hitch(this,function(del){_2ce.some(_2fc,lang.hitch(this,function(item,idx){if(item.attributes[_2fd]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_2f9.featureLayer);this._featureIdx=0;}var _2fe=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _2ff=_2fe?this._selection[this._featureIdx]:null;if(_2ff){var _300=_2ff.getLayer();var _301=_300.getEditCapabilities();if(!(_301.canCreate&&!_301.canUpdate)){this._showFeature(_2ff);}}}this._updateUI();},onFieldValueChange:function(_302,_303){_303=(typeof _303==="undefined")?null:_303;var _304=_302.field;if(_304.type==="esriFieldTypeDate"){_303=(_303&&_303.getTime)?_303.getTime():(_303&&_303.toGregorian?_303.toGregorian().getTime():_303);}if(this._currentFeature.attributes[_304.name]===_303){return;}var _305=this._currentLInfo;var _306=this._currentFeature;var _307=_304.name;if(_307===_305.typeIdField){var type=this._findFirst(_305.types,"id",_303);var _308=_305.fieldInfos;_2ce.forEach(_308,function(_309){_304=_309.field;if(!_304||_304.name===_305.typeIdField){return;}var node=_309.dijit;var _30a=this._setFieldDomain(node,type,_304);if(_30a&&node){this._setValue(node,_306.attributes[_304.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_306,_307,_303);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _30b=this._layerInfos;this._editorTrackingInfos={};_2ce.forEach(_30b,this._initLayerInfo,this);},_initLayerInfo:function(_30c){var _30d=_30c.featureLayer,_30e,_30f;this._connect(_30d,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_30c));this._connect(_30d,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_30c));this._connect(_30d,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_30c));_30c.showAttachments=_30d.hasAttachments?(_2d5.isDefined(_30c.showAttachments)?_30c.showAttachments:true):false;_30c.hideFields=_30c.hideFields||[];_30c.htmlFields=_30c.htmlFields||[];_30c.isEditable=_30d.isEditable()?(_2d5.isDefined(_30c.isEditable)?_30c.isEditable:true):false;_30c.typeIdField=_30d.typeIdField;_30c.layerId=_30d.id;_30c.types=_30d.types;if(_30d.globalIdField){_30e=this._findFirst(_30c.fieldInfos,"fieldName",_30d.globalIdField);if(!_30e&&!_30c.showGlobalID){_30c.hideFields.push(_30d.globalIdField);}}_30f=this._findFirst(_30c.fieldInfos,"fieldName",_30d.objectIdField);if(!_30f&&!_30c.showObjectID){_30c.hideFields.push(_30d.objectIdField);}var _310=this._getFields(_30c.featureLayer);if(!_310){return;}var _311=_30c.fieldInfos||[];_311=_2ce.map(_311,function(_312){return lang.mixin({},_312);});if(!_311.length){_310=_2ce.filter(_310,lang.hitch(this,function(_313){return !this._isInFields(_313.name,_30c.hideFields);}));_30c.fieldInfos=_2ce.map(_310,lang.hitch(this,function(_314){var _315=(this._isInFields(_314.name,_30c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_314.name,"field":_314,"stringFieldOption":_315};}));}else{_30c.fieldInfos=_2ce.filter(_2ce.map(_311,lang.hitch(this,function(_316){var _317=_316.stringFieldOption||(this._isInFields(_316.fieldName,_30c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_316,{"field":this._findFirst(_310,"name",_316.fieldName),"stringFieldOption":_317});})),"return item.field;");}if(_30c.showGlobalID&&!_30e){_311.push(this._findFirst(_310,"name",_30d.globalIdField));}if(_30c.showObjectID&&!_30f){_311.push(this._findFirst(_310,"name",_30d.objectIdField));}var _318=[];if(_30d.editFieldsInfo){if(_30d.editFieldsInfo.creatorField){_318.push(_30d.editFieldsInfo.creatorField);}if(_30d.editFieldsInfo.creationDateField){_318.push(_30d.editFieldsInfo.creationDateField);}if(_30d.editFieldsInfo.editorField){_318.push(_30d.editFieldsInfo.editorField);}if(_30d.editFieldsInfo.editDateField){_318.push(_30d.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_30d.id]=_318;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _319=this._layerInfos;var _31a=_2ce.filter(_319,function(item){return item.showAttachments;});if(!_31a||!_31a.length){return;}this._attachmentEditor=new _2df({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_31b){var _31c=this._currentLInfo?this._currentLInfo.featureLayer:null;var _31d=_31b.featureLayer;if(_31c&&_31c.id===_31d.id&&!_31c.ownershipBasedAccessControlForFeatures){var _31e=_31d.getEditCapabilities();if(!(_31e.canCreate&&!_31e.canUpdate)){return;}}this._currentLInfo=_31b;this._createTable();},_updateSelection:function(_31f,_320){this._selection=_31f||[];var _321=this._layerInfos;_2ce.forEach(_321,this._getSelection,this);var _322=this._numFeatures=this._selection.length;var _323=_322?this._selection[this._featureIdx]:null;this._showFeature(_323,_320);},_getSelection:function(_324){var _325=_324.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_325);},_updateUI:function(){var _326=this._numFeatures;var _327=this._currentLInfo;this.layerName.innerHTML=(!_327||_326===0)?this.NLS_noFeaturesSelected:(_327.featureLayer?_327.featureLayer.name:"");_2d2.set(this.attributeTable,"display",_326?"":"none");_2d2.set(this.editButtons,"display",_326?"":"none");_2d2.set(this.navButtons,"display",(!this._hideNavButtons&&(_326>1)?"":"none"));this.navMessage.innerHTML=_2d5.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_2d2.set(this._attachmentEditor.domNode,"display",((_327&&_327.showAttachments)&&_326)?"":"none");}var _328=((_327&&_327.showDeleteButton===false)||!this._canDelete)?false:true;_2d2.set(this.deleteBtn.domNode,"display",_328?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_329){this._featureIdx+=_329;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _32a=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_32a);this._updateUI();this.onNext(_32a);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_32b,_32c){if(!_32b){return;}this._currentFeature=_32b;var _32d=_32c?_32c:_32b.getLayer();var _32e=_32d.getEditCapabilities({feature:_32b,userId:this._userIds[_32d.id]});this._canUpdate=_32e.canUpdate;this._canDelete=_32e.canDelete;var _32f=this._getLInfoFromFeatureLayer(_32d);if(!_32f){return;}this._setCurrentLInfo(_32f);var _330=_32b.attributes;var type=this._findFirst(_32f.types,"id",_330[_32f.typeIdField]);var node,_331=null;var _332=_32f.fieldInfos;_2ce.forEach(_332,function(_333){_331=_333.field;node=_333.dijit||null;if(!node){return;}var _334=this._setFieldDomain(node,type,_331);var _335=_330[_331.name];_335=(_335&&_334&&_334.codedValues&&_334.codedValues.length)?(_334.codedValues[_335]?_334.codedValues[_335].name:_335):_335;if(!_2d5.isDefined(_335)){_335="";}if(node.declaredClass==="dijit.form.DateTextBox"){_335=(_335==="")?null:new Date(_335);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_335=_330[_331.name]+"";}}try{this._setValue(node,_335);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_32f.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _336=_32d.getEditSummary(_32b);if(_336){this.editorTrackingInfoDiv.innerHTML=_336;_2d6.show(this.editorTrackingInfoDiv);}else{_2d6.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_337){if(!node){return null;}var _338=_337.domain;if(type&&type.domains){if(type.domains[_337.name]&&type.domains[_337.name] instanceof _2d7===false){_338=type.domains[_337.name];}}if(!_338){return null;}if(_338.codedValues&&_338.codedValues.length>0){node.set("store",this._toStore(_2ce.map(_338.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_338.codedValues[0].code);}else{node.constraints={min:_2d5.isDefined(_338.minValue)?_338.minValue:Number.MIN_VALUE,max:_2d5.isDefined(_338.maxValue)?_338.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _338;},_setValue:function(node,_339){if(!node.set){return;}node._onChangeActive=false;node.set("value",_339,true);node._onChangeActive=true;},_getFields:function(_33a){var _33b=_33a._getOutFields();if(!_33b){return null;}var _33c=_33a.fields;return (_33b=="*")?_33c:_2ce.filter(_2ce.map(_33b,lang.hitch(this,"_findFirst",_33c,"name")),_2d5.isDefined);},_isInFields:function(_33d,_33e){if(!_33d||!_33e&&!_33e.length){return false;}return _2ce.some(_33e,function(name){return name.toLowerCase()===_33d.toLowerCase();});},_findFirst:function(_33f,_340,_341){var _342=_2ce.filter(_33f,function(item){return item.hasOwnProperty(_340)&&item[_340]===_341;});return (_342&&_342.length)?_342[0]:null;},_getLInfoFromFeatureLayer:function(_343){var _344=_343?_343.id:null;return this._findFirst(this._layerInfos,"layerId",_344);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_2d3.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _345=_2d3.create("tbody",null,this._attributes);var _346=this._currentFeature;var _347=this._currentLInfo;var type=this._findFirst(_347.types,"id",_346.attributes[_347.typeIdField]);var _348=_347.fieldInfos;_2ce.forEach(_348,lang.hitch(this,"_createField",type,_345),this);this._createOnlyFirstTime=false;},_createField:function(type,_349,_34a){var _34b=this._currentLInfo;var _34c=_34a.field;if(this._isInFields(_34c.name,_34b.hideFields)){return;}if(this._isInFields(_34c.name,this._editorTrackingInfos[_34b.featureLayer.id])){return;}var node=_2d3.create("tr",null,_349);var td=_2d3.create("td",{innerHTML:_34a.label||_34c.alias||_34c.name,"class":"atiLabel"},node);td=_2d3.create("td",null,node);var _34d=null;var _34e=false;if(_34a.customField){_2d3.place(_34a.customField.domNode||_34a.customField,_2d3.create("div",null,td),"first");_34d=_34a.customField;}else{if(_34b.isEditable===false||_34c.editable===false||_34a.isEditable===false||_34c.type==="esriFieldTypeOID"||_34c.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_34e=true;}}if(!_34d&&(_34b.typeIdField&&_34c.name.toLowerCase()==_34b.typeIdField.toLowerCase())){_34d=this._createTypeField(_34c,_34a,td);}else{if(!_34d){_34d=this._createDomainField(_34c,_34a,type,td);}}if(!_34d){switch(_34c.type){case "esriFieldTypeString":_34d=this._createStringField(_34c,_34a,td);break;case "esriFieldTypeDate":_34d=this._createDateField(_34c,_34a,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_34d=this._createIntField(_34c,_34a,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_34d=this._createFltField(_34c,_34a,td);break;default:_34d=this._createStringField(_34c,_34a,td);break;}}if(_34a.tooltip&&_34a.tooltip.length){this._toolTips.push(new _2e8({connectId:[_34d.id],label:_34a.tooltip}));}_34d.onChange=lang.hitch(this,"onFieldValueChange",_34a);_34d.set("disabled",_34e);_34a.dijit=_34d;},_createTypeField:function(_34f,_350,node){return new _2e4({"class":"atiField",name:_34f.alias||_34f.name,store:this._toStore(_2ce.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_2d3.create("div",null,node));},_createDomainField:function(_351,_352,type,node){var _353=_351.domain;if(type&&type.domains){if(type.domains[_351.name]&&type.domains[_351.name] instanceof _2d7===false){_353=type.domains[_351.name];}}if(!_353){return null;}if(_353.codedValues){return new _2e4({"class":"atiField",name:_351.alias||_351.name,searchAttr:"name",required:_351.nullable||false},_2d3.create("div",null,node));}else{return new _2e5({"class":"atiField"},_2d3.create("div",null,node));}},_createStringField:function(_354,_355,node){var _356={"class":"atiField",trim:true,maxLength:_354.length};if(_355.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_356["class"]+=" atiTextAreaField";return new _2e7(_356,_2d3.create("div",null,node));}else{if(_355.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_356["class"]+=" atiRichTextField";_356.height="100%";_356.width="100%";_356.plugins=_355.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _2dc(_356,_2d3.create("div",null,node));}else{return new _2e2(_356,_2d3.create("div",null,node));}}},_createDateField:function(_357,_358,node){var _359={"class":"atiField","trim":true};if(this._datePackage){_359.datePackage=this._datePackage;}return new _2e1(_359,_2d3.create("div",null,node));},_createIntField:function(_35a,_35b,node){return new _2e3({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_2d3.create("div",null,node));},_createFltField:function(_35c,_35d,node){return new _2e3({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_2d3.create("div",null,node));},_toStore:function(_35e){return new _2e9({data:{identifier:"id",label:"name",items:_35e}});},_connect:function(node,evt,func){this._aiConnects.push(_2cf.connect(node,evt,func));},_getDatePackage:function(_35f){if(_35f.datePackage===null){return null;}else{if(_35f.datePackage){return _35f.datePackage;}else{if(_2d1.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _360=this._layerInfos;_2ce.forEach(_360,function(_361){var _362=_361.fieldInfos;_2ce.forEach(_362,function(_363){var _364=_363.dijit;if(_364){_364._onChangeHandle=null;if(_363.customField){return;}if(_364.destroyRecursive){_364.destroyRecursive();}else{if(_364.destroy){_364.destroy();}}}_363.dijit=null;},this);},this);var _365=this._toolTips;_2ce.forEach(_365,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_2d3.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_2d4);}return ATI;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_366,_367,_368){return _368("dijit.Destroyable",null,{destroy:function(_369){this._destroyed=true;},own:function(){_366.forEach(arguments,function(_36a){var _36b="destroyRecursive" in _36a?"destroyRecursive":"destroy" in _36a?"destroy":"remove";var odh=_367.before(this,"destroy",function(_36c){_36a[_36b](_36c);});var hdh=_367.after(_36a,_36b,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_36d,lang,arr,dd,i18n,_36e,_36f,_370,_371){var _372=lang.getObject("date.islamic.locale",true,_36d);function _373(_374,_375,_376,_377,_378){return _378.replace(/([a-z])\1*/ig,function(_379){var s,pad;var c=_379.charAt(0);var l=_379.length;var _37a=["abbr","wide","narrow"];switch(c){case "G":s=_375["eraAbbr"][0];break;case "y":s=String(_374.getFullYear());break;case "M":var m=_374.getMonth();if(l<3){s=m+1;pad=true;}else{var _37b=["months","format",_37a[l-3]].join("-");s=_375[_37b][m];}break;case "d":s=_374.getDate(true);pad=true;break;case "E":var d=_374.getDay();if(l<3){s=d+1;pad=true;}else{var _37c=["days","format",_37a[l-3]].join("-");s=_375[_37c][d];}break;case "a":var _37d=(_374.getHours()<12)?"am":"pm";s=_375["dayPeriods-format-wide-"+_37d];break;case "h":case "H":case "K":case "k":var h=_374.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_374.getMinutes();pad=true;break;case "s":s=_374.getSeconds();pad=true;break;case "S":s=Math.round(_374.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_374.toGregorian());if(s){break;}l=4;case "Z":var _37e=_374.toGregorian().getTimezoneOffset();var tz=[(_37e<=0?"+":"-"),_36f.pad(Math.floor(Math.abs(_37e)/60),2),_36f.pad(Math.abs(_37e)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_378);}if(pad){s=_36f.pad(s,l);}return s;});};_372.format=function(_37f,_380){_380=_380||{};var _381=i18n.normalizeLocale(_380.locale);var _382=_380.formatLength||"short";var _383=_372._getIslamicBundle(_381);var str=[];var _384=lang.hitch(this,_373,_37f,_383,_381,_380.fullYear);if(_380.selector=="year"){var year=_37f.getFullYear();return year;}if(_380.selector!="time"){var _385=_380.datePattern||_383["dateFormat-"+_382];if(_385){str.push(_386(_385,_384));}}if(_380.selector!="date"){var _387=_380.timePattern||_383["timeFormat-"+_382];if(_387){str.push(_386(_387,_384));}}var _388=str.join(" ");return _388;};_372.regexp=function(_389){return _372._parseInfo(_389).regexp;};_372._parseInfo=function(_38a){_38a=_38a||{};var _38b=i18n.normalizeLocale(_38a.locale);var _38c=_372._getIslamicBundle(_38b);var _38d=_38a.formatLength||"short";var _38e=_38a.datePattern||_38c["dateFormat-"+_38d];var _38f=_38a.timePattern||_38c["timeFormat-"+_38d];var _390;if(_38a.selector=="date"){_390=_38e;}else{if(_38a.selector=="time"){_390=_38f;}else{_390=(typeof (_38f)=="undefined")?_38e:_38e+" "+_38f;}}var _391=[];var re=_386(_390,lang.hitch(this,_392,_391,_38c,_38a));return {regexp:re,tokens:_391,bundle:_38c};};_372.parse=function(_393,_394){_393=_393.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_394){_394={};}var info=_372._parseInfo(_394);var _395=info.tokens,_371=info.bundle;var _396=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_396+"$");var _397=re.exec(_393);var _398=i18n.normalizeLocale(_394.locale);if(!_397){return null;}var date,_399;var _39a=[1389,0,1,0,0,0,0];var amPm="";var _39b=0;var _39c=["abbr","wide","narrow"];var _39d=arr.every(_397,function(v,i){if(!i){return true;}var _39e=_395[i-1];var l=_39e.length;switch(_39e.charAt(0)){case "y":_39a[0]=Number(v);break;case "M":if(l>2){var _39f=_371["months-format-"+_39c[l-3]].concat();if(!_394.strict){v=v.replace(".","").toLowerCase();_39f=arr.map(_39f,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_39f,v);if(v==-1){return false;}_39b=l;}else{v--;}_39a[1]=Number(v);break;case "D":_39a[1]=0;case "d":_39a[2]=Number(v);break;case "a":var am=_394.am||_371["dayPeriods-format-wide-am"],pm=_394.pm||_371["dayPeriods-format-wide-pm"];if(!_394.strict){var _3a0=/\./g;v=v.replace(_3a0,"").toLowerCase();am=am.replace(_3a0,"").toLowerCase();pm=pm.replace(_3a0,"").toLowerCase();}if(_394.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_39a[3]=Number(v);break;case "m":_39a[4]=Number(v);break;case "s":_39a[5]=Number(v);break;case "S":_39a[6]=Number(v);}return true;});var _3a1=+_39a[3];if(amPm==="p"&&_3a1<12){_39a[3]=_3a1+12;}else{if(amPm==="a"&&_3a1==12){_39a[3]=0;}}var _3a2=new _370(_39a[0],_39a[1],_39a[2],_39a[3],_39a[4],_39a[5],_39a[6]);return _3a2;};function _386(_3a3,_3a4,_3a5,_3a6){var _3a7=function(x){return x;};_3a4=_3a4||_3a7;_3a5=_3a5||_3a7;_3a6=_3a6||_3a7;var _3a8=_3a3.match(/(''|[^'])+/g);var _3a9=_3a3.charAt(0)=="'";arr.forEach(_3a8,function(_3aa,i){if(!_3aa){_3a8[i]="";}else{_3a8[i]=(_3a9?_3a5:_3a4)(_3aa);_3a9=!_3a9;}});return _3a6(_3a8.join(""));};function _392(_3ab,_3ac,_3ad,_3ae){_3ae=_36e.escapeString(_3ae);var _3af=i18n.normalizeLocale(_3ad.locale);return _3ae.replace(/([a-z])\1*/ig,function(_3b0){var s;var c=_3b0.charAt(0);var l=_3b0.length;var p2="",p3="";if(_3ad.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_3ad.am||_3ac["dayPeriods-format-wide-am"],pm=_3ad.pm||_3ac["dayPeriods-format-wide-pm"];if(_3ad.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_3ab){_3ab.push(_3b0);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _3b1=[];_372.addCustomFormats=function(_3b2,_3b3){_3b1.push({pkg:_3b2,name:_3b3});};_372._getIslamicBundle=function(_3b4){var _3b5={};arr.forEach(_3b1,function(desc){var _3b6=i18n.getLocalization(desc.pkg,desc.name,_3b4);_3b5=lang.mixin(_3b5,_3b6);},this);return _3b5;};_372.addCustomFormats("dojo.cldr","islamic");_372.getNames=function(item,type,_3b7,_3b8,date){var _3b9;var _3ba=_372._getIslamicBundle(_3b8);var _3bb=[item,_3b7,type];if(_3b7=="standAlone"){var key=_3bb.join("-");_3b9=_3ba[key];if(_3b9[0]==1){_3b9=undefined;}}_3bb[1]="format";return (_3b9||_3ba[_3bb.join("-")]).concat();};_372.weekDays=_372.getNames("days","wide","format");_372.months=_372.getNames("months","wide","format");return _372;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_3bc,_3bd,lang,_3be,_3bf,_3c0,_3c1,has,ioq,_3c2,i18n,_3c3,_3c4,_3c5,_3c6,_3c7,_3c8,_3c9,_3ca,_3cb,_3cc,_3cd,_3ce,_3cf,_3d0,_3d1,_3d2,_3d3,_3d4,_3d5,_3d6,_3d7,_3d8,_3d9,_3da,_3db,_3dc,_3dd,_3de){var _3df=_3bc(_3d5,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",constructor:function(url,_3e0){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_3e0&&_3e0.outFields;this._loadCallback=_3e0&&_3e0.loadCallback;var _3e1=_3e0&&_3e0._usePatch;this._usePatch=(_3e1===null||_3e1===undefined)?true:_3e1;this._trackIdField=_3e0&&_3e0.trackIdField;this.objectIdField=_3e0&&_3e0.objectIdField;this._maxOffset=_3e0&&_3e0.maxAllowableOffset;this._optEditable=_3e0&&_3e0.editable;this._optAutoGen=_3e0&&_3e0.autoGeneralize;this.editSummaryCallback=_3e0&&_3e0.editSummaryCallback;this.userId=_3e0&&_3e0.userId;this.userIsAdmin=_3e0&&_3e0.userIsAdmin;this.useMapTime=(_3e0&&_3e0.hasOwnProperty("useMapTime"))?(!!_3e0.useMapTime):true;this.source=_3e0&&_3e0.source;this.gdbVersion=_3e0&&_3e0.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_3c4.isDefined(_3e0&&_3e0.mode)?_3e0.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _3db(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_3e0&&_3e0.tileWidth)||512;this._tileHeight=(_3e0&&_3e0.tileHeight)||512;this._mode=new _3dc(this);var _3e2=_3e0&&_3e0.latticeTiling;this.latticeTiling=_3e2;break;case ctor.MODE_SELECTION:this._mode=new _3dd(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _3cf(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _3e3=this._url.path;this._fserver=false;if(_3e3.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _3e4=_3e0&&_3e0.resourceInfo;if(_3e4){this._initLayer(_3e4);}else{if(this.source){var _3e5={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_3bf.toJson(_3e5)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_3c5({url:_3e3,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}this.registerConnectEvents("esri.layers.FeatureLayer",{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]});},_initLayer:function(_3e6,io){if(_3e6||io){this._json=_3e6;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_3e6&&_3e6._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _3db(this);this._isSnapshot=true;this._featureSet=_3e6.featureSet;this._nextId=_3e6.nextObjectId;_3e6=_3e6.layerDefinition;}if(_3e6.hasOwnProperty("capabilities")){var _3e7=(this.capabilities=_3e6.capabilities);if(_3e7&&_3e7.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_3c4.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_3bf.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_3e6.geometryType==="esriGeometryPolyline")||(_3e6.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_3c4.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _3e8=_3e6.effectiveMinScale||_3e6.minScale,_3e9=_3e6.effectiveMaxScale||_3e6.maxScale;if(!this._hasMin&&_3e8){this.setMinScale(_3e8);}if(!this._hasMax&&_3e9){this.setMaxScale(_3e9);}this.layerId=_3e6.id;this.name=_3e6.name;this.description=_3e6.description;this.copyright=_3e6.copyrightText;this.type=_3e6.type;this.geometryType=_3e6.geometryType;this.displayField=_3e6.displayField;this.defaultDefinitionExpression=_3e6.definitionExpression;this.fullExtent=new _3d2(_3e6.extent);this.initialExtent=new _3d2(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _3c7(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_3e6.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_3e6.indexedFields;this.maxRecordCount=_3e6.maxRecordCount;this.canModifyLayer=_3e6.canModifyLayer;this.supportsStatistics=_3e6.supportsStatistics;this.supportsAdvancedQueries=_3e6.supportsAdvancedQueries;this.hasLabels=_3e6.hasLabels;this.canScaleSymbols=_3e6.canScaleSymbols;this.supportsRollbackOnFailure=_3e6.supportsRollbackOnFailure;this.syncCanReturnChanges=_3e6.syncCanReturnChanges;this.isDataVersioned=_3e6.isDataVersioned;this.editFieldsInfo=_3e6.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_3e6.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_3e6.relationships;this.allowGeometryUpdates=_3c4.isDefined(_3e6.allowGeometryUpdates)?_3e6.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _3ea=(this.fields=[]),_3eb=_3e6.fields,i;for(i=0;i<_3eb.length;i++){_3ea.push(new _3d6(_3eb[i]));}if(!this.objectIdField){this.objectIdField=_3e6.objectIdField;if(!this.objectIdField){_3eb=_3e6.fields;for(i=0;i<_3eb.length;i++){var _3ec=_3eb[i];if(_3ec.type==="esriFieldTypeOID"){this.objectIdField=_3ec.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_3c4.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_3c4.isDefined(this._nextId)){var _3ed=this.objectIdField,_3ee=-1;if(this._collection&&_3ed){var fset=this._featureSet,_3ef=fset&&fset.features,il=_3ef?_3ef.length:0,oid,attr;for(i=0;i<il;i++){attr=_3ef[i].attributes;oid=attr&&attr[_3ed];if(oid>_3ee){_3ee=oid;}}}this._nextId=(_3ee+1);}this.globalIdField=_3e6.globalIdField;var _3f0=(this.typeIdField=_3e6.typeIdField),_3f1;if(_3f0){_3f1=!this._getField(_3f0)&&this._getField(_3f0,true);if(_3f1){this.typeIdField=_3f1.name;}}this.visibilityField=_3e6.visibilityField;var _3f2=_3e6.defaultSymbol;if(_3f2){this.defaultSymbol=_3cb.fromJson(_3f2);}var _3f3=this.types=[],_3f4=_3e6.types,_3f5,_3f6,_3f7,_3f8=this.editFieldsInfo,_3f9=_3f8&&_3f8.creatorField,_3fa=_3f8&&_3f8.editorField,fix=(_3f9||_3fa),_3fb=[];if(_3f4){for(i=0;i<_3f4.length;i++){_3f5=new _3d8(_3f4[i]);_3f6=_3f5.templates;if(fix&&_3f6&&_3f6.length){_3fb=_3fb.concat(_3f6);}_3f3.push(_3f5);}}var _3fc=_3e6.templates,_3fd,_3fe=this.templates=[];if(_3fc){for(i=0;i<_3fc.length;i++){_3fd=new _3d9(_3fc[i]);if(fix){_3fb.push(_3fd);}_3fe.push(_3fd);}}for(i=0;i<_3fb.length;i++){_3f7=lang.getObject("prototype.attributes",false,_3fb[i]);if(_3f7){if(_3f9){delete _3f7[_3f9];}if(_3fa){delete _3f7[_3fa];}}}var _3ff=_3e6.timeInfo;if(_3ff){this.timeInfo=new _3d7(_3ff);this._startTimeField=_3ff.startTimeField;this._endTimeField=_3ff.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_3ff.trackIdField=this._trackIdField;}else{this._trackIdField=_3ff.trackIdField;}}this.hasAttachments=(!this._collection&&_3e6.hasAttachments)?true:false;this.htmlPopupType=_3e6.htmlPopupType;var _400=_3e6.drawingInfo,_401;if(!this.renderer){if(_400&&_400.renderer){_401=_400.renderer;this.setRenderer(_3ce.fromJson(_401));if(_401.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _402=_401.type,_403=[];_401=this.renderer;switch(_402){case "simple":_403.push(_401.symbol);break;case "uniqueValue":case "classBreaks":_403.push(_401.defaultSymbol);_403=_403.concat(_3be.map(_401.infos,function(info){return info.symbol;}));break;}_403=_3be.filter(_403,_3c4.isDefined);var _404=this._url.path+"/images/",_405=this._getToken();_3be.forEach(_403,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_404+url;}if(_405&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_405);}}});}}else{if(_3f2){_3f4=this.types;if(_3f4.length>0){_401=new _3cd(this.defaultSymbol,this.typeIdField);_3be.forEach(_3f4,function(type){_401.addValue(type.id,type.symbol);});}else{_401=new _3cc(this.defaultSymbol);}this.setRenderer(_401);}else{if(!this._isTable){var _406;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_406=new _3c8();break;case "esriGeometryPolyline":_406=new _3c9();break;case "esriGeometryPolygon":_406=new _3ca();break;}this.setRenderer(_406?new _3cc(_406):null);}}}}var _407=(_400&&_400.transparency)||0;if(!_3c4.isDefined(this.opacity)&&_407>0){this.opacity=1-(_407/100);}this.version=_3e6.currentVersion;if(!this.version){var ver;if("capabilities" in _3e6||"drawingInfo" in _3e6||"hasAttachments" in _3e6||"htmlPopupType" in _3e6||"relationships" in _3e6||"timeInfo" in _3e6||"typeIdField" in _3e6||"types" in _3e6){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _408=function(){this.onLoad(this);var _409=this._loadCallback;if(_409){delete this._loadCallback;_409(this);}};if(this._collection){this._fireUpdateStart();var _40a=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _3d1(_40a));this._fcAdded=true;_408.call(this);}else{this._forceIdentity(_408);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _40b=this.renderer;if(_40b){this._ager=(_40b.declaredClass.indexOf("TemporalRenderer")!==-1&&_40b.observationAger&&_40b.observationRenderer);var _40c=_3be.filter([_40b,_40b.observationRenderer,_40b.latestObservationRenderer,_40b.trackRenderer],_3c4.isDefined);var _40d=[];_3be.forEach(_40c,function(rnd){if(!lang.isFunction(rnd.attributeField)){_40d.push(rnd.attributeField);}_40d.push(rnd.attributeField2);_40d.push(rnd.attributeField3);},this);this._rendererFields=_3be.filter(_40d,_3c4.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_3bd.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},getOutFields:function(){return _3be.filter(this._getOutFields(),function(_40e){return (_40e==="*"||!!this._getField(_40e));},this);},setEditable:function(_40f){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_40f;return this;}var _410=this._editable;this._editable=_40f;this._updateCaps();if(_410!==_40f){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_411){var _412={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _412;}var _413=_411&&_411.feature,_414=_411&&_411.userId,caps=_3be.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_415=_3be.indexOf(caps,"editing")>-1,_416=_415&&(_3be.indexOf(caps,"create")>-1),_417=_415&&(_3be.indexOf(caps,"update")>-1),_418=_415&&(_3be.indexOf(caps,"delete")>-1),_419=this.ownershipBasedAccessControlForFeatures,_41a=this.editFieldsInfo,_41b=_41a&&_41a.creatorField,_41c=_41a&&_41a.realm,_41d=_413&&_413.attributes,_41e=(_41d&&_41b)?_41d[_41b]:undefined,_41f,_420=!!this.userIsAdmin,_421=!_419||_420||!!(_419.allowOthersToUpdate||_419.allowUpdateToOthers),_422=!_419||_420||!!(_419.allowOthersToDelete||_419.allowDeleteToOthers);if(_420||(_415&&!(_416||_417||_418))){_416=_417=_418=true;}_41f={"canCreate":_416,"canUpdate":_417,"canDelete":_418};if(_41e===null){_41f.canUpdate=_417&&_421;_41f.canDelete=_418&&_422;}else{if(_41e===""){return _41f;}else{if(_41e){_414=_414||this.getUserId();if(_414&&_41c){_414=_414+"@"+_41c;}if(_414.toLowerCase()===_41e.toLowerCase()){return _41f;}else{_41f.canUpdate=_417&&_421;_41f.canDelete=_418&&_422;}}}}return _41f;},getUserId:function(){var _423;if(this.loaded){_423=(this.credential&&this.credential.userId)||this.userId||"";}return _423;},setUserIsAdmin:function(_424){this.userIsAdmin=_424;},setEditSummaryCallback:function(_425){this.editSummaryCallback=_425;},getEditSummary:function(_426,_427,_428){_428=_3c4.isDefined(_428)?_428:(new Date()).getTime();var _429="",info=this.getEditInfo(_426,_427,_428),_42a=(_427&&_427.callback)||this.editSummaryCallback;if(_42a){info=_42a(_426,info)||"";}if(lang.isString(info)){_429=info;}else{if(info){var _42b=info.action,_42c=info.userId,_42d=info.timeValue,_42e=0;if(_42b){_42e++;}if(_42c){_42e++;}if(_3c4.isDefined(_42d)){_42e++;}if(_42e>1){_429=(_42b==="edit"?"edit":"create")+(_42c?"User":"")+(_3c4.isDefined(_42d)?info.displayPattern:"");}}_429=_429&&_3c4.substitute(info,this.i18n.layers.FeatureLayer[_429]);}return _429;},getEditInfo:function(_42f,_430,_431){if(!this.loaded){return;}_431=_3c4.isDefined(_431)?_431:(new Date()).getTime();var _432=(_430&&_430.action)||"last",_433=this.editFieldsInfo,_434=_433&&_433.creatorField,_435=_433&&_433.creationDateField,_436=_433&&_433.editorField,_437=_433&&_433.editDateField,_438=_433&&_433.realm,_439=_42f&&_42f.attributes,_43a=(_439&&_434)?_439[_434]:undefined,_43b=(_439&&_435)?_439[_435]:null,_43c=(_439&&_436)?_439[_436]:undefined,_43d=(_439&&_437)?_439[_437]:null,_43e=this._getEditData(_43a,_43b,_431),_43f=this._getEditData(_43c,_43d,_431),_440;switch(_432){case "creation":_440=_43e;break;case "edit":_440=_43f;break;case "last":_440=_43f||_43e;break;}if(_440){_440.action=(_440===_43f)?"edit":"creation";}return _440;},_getEditData:function(_441,_442,_443){var data,_444,_445,_446=60000,_447=3600000,_448=2*_447,_449=24*_447,_44a=7*_449;if(_3c4.isDefined(_442)){_444=_443-_442;if(_444<0){_445="Full";}else{if(_444<_446){_445="Seconds";}else{if(_444<(2*_446)){_445="Minute";}else{if(_444<_447){_445="Minutes";}else{if(_444<_448){_445="Hour";}else{if(_444<_449){_445="Hours";}else{if(_444<_44a){_445="WeekDay";}else{_445="Full";}}}}}}}}if((_441!==undefined)||_445){data=data||{};data.userId=_441;if(_445){var _44b=_3c1.format,_44c=new Date(_442);data.minutes=Math.floor(_444/_446);data.hours=Math.floor(_444/_447);data.weekDay=_44b(_44c,{datePattern:"EEEE",selector:"date"});data.formattedDate=_44b(_44c,{selector:"date"});data.formattedTime=_44b(_44c,{selector:"time"});data.displayPattern=_445;data.timeValue=_442;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_44d){if(!this.isEditable()){this._maxOffset=_44d;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_44e){if(!this.loaded){this._optAutoGen=_44e;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_44e;if(_44e){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_44f){if(!this._collection&&(_44f!==this.gdbVersion)&&(_44f||this.gdbVersion)){this.gdbVersion=_44f;this._task.gdbVersion=_44f;this._url.query=lang.mixin(this._url.query,{gdbVersion:_44f});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_450){if(this._isSnapshot){this._timeDefn=_450;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_451,_452){this._timeOffset=_451;this._timeOffsetUnits=_452;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_453,_454,_455,_456){_454=_454||this.constructor.SELECTION_NEW;var _457=this._getShallowClone(_453),map=this._map,_458,dfd=_3c6._fixDfd(new _3c0(_3c6._dfdCanceller));_457.outFields=this.getOutFields();_457.returnGeometry=true;if(map){_457.outSpatialReference=new _3c7(map.spatialReference.toJson());}if(!this._applyQueryFilters(_457)){_458={features:[]};this._selectHandler(_458,_454,_455,_456,dfd);return dfd;}var _459=this._canDoClientSideQuery(_457);if(_459){_458={features:this._doQuery(_457,_459)};this._selectHandler(_458,_454,_455,_456,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_456,dfd,true);return dfd;}var self=this;if(this._ts){_457._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_457);temp.addCallbacks(function(_45a){self._selectHandler(_45a,_454,_455,_456,dfd);},function(err){self._resolve([err],null,_456,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _45b=this._selectedFeatures,_45c=[],item;for(item in _45b){if(_45b.hasOwnProperty(item)){_45c.push(_45b[item]);}}return _45c;},clearSelection:function(_45d){var _45e=this._selectedFeatures,mode=this._mode,item;for(item in _45e){if(_45e.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_45d){this.onSelectionClear();}return this;},setSelectionSymbol:function(_45f){this._selectionSymbol=_45f;if(_45f){var _460=this._selectedFeatures,item;for(item in _460){if(_460.hasOwnProperty(item)){_460[item].setSymbol(_45f);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_461,_462,_463,_464,_465){var _466=_465.assembly,dfd=_465.dfd;this._applyNormalized(adds,_466&&_466[0]);this._applyNormalized(_461,_466&&_466[1]);this.onBeforeApplyEdits(adds,_461,_462);var i,_467={},_468=this.objectIdField,_469={f:"json"},_46a=false;if(this._collection){var _46b={};_46b.addResults=adds?_3be.map(adds,function(){_46a=true;return {objectId:this._nextId++,success:true};},this):null;_46b.updateResults=_461?_3be.map(_461,function(_46c){_46a=true;var oid=_46c.attributes[_468];_467[oid]=_46c;return {objectId:oid,success:true};},this):null;_46b.deleteResults=_462?_3be.map(_462,function(_46d){_46a=true;return {objectId:_46d.attributes[_468],success:true};},this):null;if(_46a){this._editHandler(_46b,adds,_467,_463,_464,dfd);}return;}if(adds&&adds.length>0){_469.adds=this._convertFeaturesToJson(adds,0,1);_46a=true;}if(_461&&_461.length>0){for(i=0;i<_461.length;i++){var _46e=_461[i];_467[_46e.attributes[_468]]=_46e;}_469.updates=this._convertFeaturesToJson(_461,0,0,1);_46a=true;}if(_462&&_462.length>0){var ids=[];for(i=0;i<_462.length;i++){ids.push(_462[i].attributes[_468]);}_469.deletes=ids.join(",");_46a=true;}if(_46a){var self=this;return _3c5({url:this._url.path+"/applyEdits",content:lang.mixin(_469,this._url.query),callbackParamName:"callback",load:function(_46f){self._editHandler(_46f,adds,_467,_463,_464,dfd);},error:function(err){self._resolve([err],null,_464,dfd,true);}},{usePost:true});}},queryFeatures:function(_470,_471,_472){return this._query("execute","onQueryFeaturesComplete",_470,_471,_472);},queryRelatedFeatures:function(_473,_474,_475){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_473,_474,_475);},queryIds:function(_476,_477,_478){return this._query("executeForIds","onQueryIdsComplete",_476,_477,_478);},queryCount:function(_479,_47a,_47b){return this._query("executeForCount","onQueryCountComplete",_479,_47a,_47b);},queryAttachmentInfos:function(_47c,_47d,_47e){var url=this._url.path+"/"+_47c+"/attachments",dfd=new _3c0(_3c6._dfdCanceller),self=this;dfd._pendingDfd=_3c5({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_47f){var _480=_47f.attachmentInfos,_481;_3be.forEach(_480,function(info){_481=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_481?("?"+_481):"");info.objectId=_47c;});self._resolve([_480],"onQueryAttachmentInfosComplete",_47d,dfd);},error:function(err){self._resolve([err],null,_47e,dfd,true);}});return dfd;},addAttachment:function(_482,_483,_484,_485){return this._sendAttachment("add",_482,_483,_484,_485);},updateAttachment:function(_486,_487,_488,_489,_48a){_488.appendChild(_3c2.create("input",{type:"hidden",name:"attachmentId",value:_487}));return this._sendAttachment("update",_486,_488,_489,_48a);},deleteAttachments:function(_48b,_48c,_48d,_48e){var url=this._url.path+"/"+_48b+"/deleteAttachments",dfd=new _3c0(_3c6._dfdCanceller),self=this,_48f={f:"json",attachmentIds:_48c.join(",")};dfd._pendingDfd=_3c5({url:url,content:lang.mixin(_48f,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_490){var _491=_490.deleteAttachmentResults;_491=_3be.map(_491,function(_492){var res=new _3da(_492);res.attachmentId=res.objectId;res.objectId=_48b;return res;});self._resolve([_491],"onDeleteAttachmentsComplete",_48d,dfd);}),error:function(err){self._resolve([err],null,_48e,dfd,true);}},{usePost:true});return dfd;},addType:function(_493){var _494=this.types;if(_494){var _495=_3be.some(_494,function(type){if(type.id==_493.id){return true;}return false;});if(_495){return false;}else{_494.push(_493);}}else{this.types=[_493];}this._typesDirty=true;return true;},deleteType:function(_496){if(!this._collection){return;}var _497=this.types;if(_497){var _498=-1;_3be.some(_497,function(type,_499){if(type.id==_496){_498=_499;return true;}return false;});if(_498>-1){this._typesDirty=true;return _497.splice(_498,1)[0];}}},toJson:function(){var _49a=this._json,json=lang.isString(_49a)?_3bf.fromJson(_49a):lang.clone(_49a);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _49b=json.layerDefinition,_49c=this._collection;if(_49c&&this._typesDirty){_49b.types=_3be.map(this.types||[],function(type){return type.toJson();});var _49d=this.renderer,_49e=_49b.drawingInfo;if(_49e&&_49d&&_49d.declaredClass.indexOf("TemporalRenderer")===-1){_49e.renderer=_49d.toJson();}}var _49f=null;if(!(_49c&&!this._fcAdded)){_49f={geometryType:_49b.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_49f);if(_49c){json.nextObjectId=this._nextId;_49b.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_4a0){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_3c3.id&&_3c3.id._hasPortalSession()&&_3c3.id._doPortalSignIn(path)){_3c3.id.getCredential(path).then(function(){self._findCredential();_4a0.call(self);},function(){_4a0.call(self);});}else{_4a0.call(this);}},_updateCaps:function(){var _4a1=this._editable,_4a2=lang.trim(this.capabilities||""),_4a3=_3be.map((_4a2?_4a2.split(","):[]),lang.trim),caps=_3be.map((_4a2?_4a2.toLowerCase().split(","):[]),lang.trim),_4a4=_3be.indexOf(caps,"editing"),cap,i,_4a5,_4a6={"Create":_3be.indexOf(caps,"create"),"Update":_3be.indexOf(caps,"update"),"Delete":_3be.indexOf(caps,"delete")};if(_4a1&&_4a4===-1){_4a3.push("Editing");}else{if(!_4a1&&_4a4>-1){_4a5=[_4a4];for(cap in _4a6){if(_4a6[cap]>-1){_4a5.push(_4a6[cap]);}}_4a5.sort();for(i=_4a5.length-1;i>=0;i--){_4a3.splice(_4a5[i],1);}}}this.capabilities=_4a3.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_4a7=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_4a7&&(_4a7.latestObservationRenderer||_4a7.trackRenderer))){this._trackManager=new _3de(this);this._trackManager.initialize(map);}}this._zoomConnect=_3bd.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_4a8){var map=this._map;if(_4a8&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_3bd.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_3bd.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_4a9){this._mapTimeExtent=_4a9;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_4aa){var _4ab=this._timeOffset,_4ac=this._timeOffsetUnits;return (_4aa&&_4ab&&_4ac)?_4aa.offset(-1*_4ab,_4ac):_4aa;},_getTimeOverlap:function(_4ad,_4ae){if(_4ad&&_4ae){return _4ad.intersection(_4ae);}else{return _4ad||_4ae;}},_getTimeFilter:function(_4af){var _4b0=this.getTimeDefinition(),_4b1=null,_4b2;if(_4b0||_4b1){_4b2=this._getTimeOverlap(_4b0,_4b1);if(!_4b2){return [false];}}if(_4af){_4af=_4b2?this._getTimeOverlap(_4af,_4b2):_4af;if(!_4af){return [false];}}else{_4af=_4b2;}return [true,_4af];},_getAttributeFilter:function(_4b3){var _4b4=this.getDefinitionExpression();if(_4b3){_4b3=_4b4?"("+_4b4+") AND ("+_4b3+")":_4b3;}else{_4b3=_4b4;}return _4b3;},_applyQueryFilters:function(_4b5){_4b5.where=this._getAttributeFilter(_4b5.where);_4b5.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _4b6=this._getTimeFilter(_4b5.timeExtent);if(!_4b6[0]){return false;}else{_4b5.timeExtent=_4b6[1];}}return true;},_add:function(_4b7){var _4b8=this._selectionSymbol,attr=_4b7.attributes,_4b9=this.visibilityField;if(_4b8&&this._isSelOnly){_4b7.setSymbol(_4b8);}if(_4b9&&attr&&attr.hasOwnProperty(_4b9)){_4b7[attr[_4b9]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_4ba){var _4bb=[],map=this._map;if(this._isTable||!map){return;}if(_4ba.text||(_4ba.where&&_4ba.where!==this.getDefinitionExpression())){return;}var _4bc=this._isSnapshot,_4bd=this._isSelOnly;var _4be=_4ba.geometry;if(_4be){if(!_4bd&&_4ba.spatialRelationship===_3d0.SPATIAL_REL_INTERSECTS&&(_4be.type==="extent"&&(_4bc||map.extent.contains(_4be)))){_4bb.push(1);}else{return;}}var ids=_4ba.objectIds;if(ids){if(_4bc){_4bb.push(2);}else{var len=ids.length,mode=this._mode,_4bf=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_4bf++;}}if(_4bf===len){_4bb.push(2);}else{return;}}}if(this.timeInfo){var _4c0=_4ba.timeExtent,_4c1=this._mapTimeExtent;if(_4bc){if(_4c0){_4bb.push(3);}}else{if(_4bd){if(_4c0){return;}}else{if(_4c1){if(_3be.indexOf(_4bb,2)!==-1){if(_4c0){_4bb.push(3);}}else{return;}}else{if(_4bb.length>0){if(_4c0){_4bb.push(3);}}else{if(_4c0){return;}}}}}}return _4bb.length>0?_4bb:null;},_doQuery:function(_4c2,_4c3,_4c4){var _4c5=[],mode=this._mode,_4c6=this.objectIdField,i,len,_4c7;if(_3be.indexOf(_4c3,2)!==-1){_4c5=[];var ids=_4c2.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_4c5.push(obj);}}if(_4c5.length===0){return [];}}if(_3be.indexOf(_4c3,1)!==-1){_4c7=_4c5.length>0?_4c5:this.graphics;len=_4c7.length;var _4c8=_4c2.geometry._normalize(null,true);_4c5=[];for(i=0;i<len;i++){var _4c9=_4c7[i],_4ca=_4c9.geometry;if(_4ca){if(this.normalization&&_4c8.length){if(_4c8[0].intersects(_4ca)||_4c8[1].intersects(_4ca)){_4c5.push(_4c9);}}else{if(_4c8.intersects(_4ca)){_4c5.push(_4c9);}}}}if(_4c5.length===0){return [];}}if(_3be.indexOf(_4c3,3)!==-1){if(this.timeInfo){_4c7=_4c5.length>0?_4c5:this.graphics;var time=_4c2.timeExtent,_4cb=this._filterByTime(_4c7,time.startTime,time.endTime);_4c5=_4cb.match;}}if(_4c4){return _3be.map(_4c5,function(obj){return obj.attributes[_4c6];},this);}else{return _4c5;}},_filterByTime:function(_4cc,_4cd,_4ce){var _4cf=this._startTimeField,_4d0=this._endTimeField,_4d1;if(!this._twoTimeFields){_4d1=_4cf||_4d0;}var _4d2=_3c4.isDefined,yea=[],nay=[],i,len=_4cc.length,_4d3,_4d4;_4cd=_4cd?_4cd.getTime():-Infinity;_4ce=_4ce?_4ce.getTime():Infinity;if(_4d1){for(i=0;i<len;i++){_4d3=_4cc[i];_4d4=_4d3.attributes;var time=_4d4[_4d1];if(time>=_4cd&&time<=_4ce){yea.push(_4d3);}else{nay.push(_4d3);}}}else{for(i=0;i<len;i++){_4d3=_4cc[i];_4d4=_4d3.attributes;var _4d5=_4d4[_4cf],end=_4d4[_4d0];_4d5=_4d2(_4d5)?_4d5:-Infinity;end=_4d2(end)?end:Infinity;if((_4d5>=_4cd&&_4d5<=_4ce)||(end>=_4cd&&end<=_4ce)||(_4cd>=_4d5&&_4ce<=end)){yea.push(_4d3);}else{nay.push(_4d3);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_4d6,_4d7,dfd,_4d8){if(_4d6){this[_4d6].apply(this,args);}if(_4d7){_4d7.apply(null,args);}if(dfd){_3c6._resDfd(dfd,args,_4d8);}},_getShallowClone:function(_4d9){var _4da=new _3d0(),prop;for(prop in _4d9){if(_4d9.hasOwnProperty(prop)){_4da[prop]=_4d9[prop];}}return _4da;},_query:function(type,_4db,_4dc,_4dd,_4de){var that=this,map=this._map,dfd=new _3c0(_3c6._dfdCanceller),_4df=_4dc;var _4e0=function(_4e1,_4e2){if(!_4e2&&type==="execute"&&!that._isTable){var _4e3=_4e1.features,mode=that._mode,_4e4=that.objectIdField,il=_4e3.length,i;for(i=il-1;i>=0;i--){var oid=_4e3[i].attributes[_4e4];var _4e5=mode._getFeature(oid);if(_4e5){_4e3.splice(i,1,_4e5);}}}that._resolve([_4e1],_4db,_4dd,dfd);};if(type!=="executeRelationshipQuery"){_4df=this._getShallowClone(_4dc);_4df.outFields=this.getOutFields();_4df.returnGeometry=_4dc.hasOwnProperty("returnGeometry")?_4dc.returnGeometry:true;var _4e6;if(map){_4df.outSpatialReference=new _3c7(map.spatialReference.toJson());}if(!this._applyQueryFilters(_4df)){switch(type){case "execute":_4e6=new _3d1({features:[]});break;case "executeForIds":_4e6=[];break;case "executeForCount":_4e6=0;break;}_4e0(_4e6,true);return dfd;}var _4e7=this._canDoClientSideQuery(_4df);if(_4e7){var _4e8=this._doQuery(_4df,_4e7,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_4e6=new _3d1();_4e6.features=_4e8;break;case "executeForIds":_4e6=_4e8;break;case "executeForCount":_4e6=_4e8.length;break;}_4e0(_4e6,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_4de,dfd,true);return dfd;}if(this._ts){_4df._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_4df);temp.addCallbacks(_4e0,function(err){that._resolve([err],null,_4de,dfd,true);});return dfd;},_convertFeaturesToJson:function(_4e9,_4ea,_4eb,_4ec){var json=[],_4ed=this._selectionSymbol,_4ee=this.visibilityField,i,_4ef,_4f0=this.objectIdField;if(this.loaded&&(_4eb||_4ec)){_4ef=_3be.filter(this.fields,function(_4f1){return (_4f1.editable===false)&&(!_4ec||(_4f1.name!==_4f0));});}for(i=0;i<_4e9.length;i++){var _4f2=_4e9[i],_4f3={},_4f4=_4f2.geometry,attr=_4f2.attributes,_4f5=_4f2.symbol;if(_4f4&&(!_4ec||!this.loaded||this.allowGeometryUpdates)){_4f3.geometry=_4f4.toJson();}if(_4ee){_4f3.attributes=attr=lang.mixin({},attr);attr[_4ee]=_4f2.visible?1:0;}else{if(attr){_4f3.attributes=lang.mixin({},attr);}}if(_4f3.attributes&&_4ef&&_4ef.length){_3be.forEach(_4ef,function(_4f6){delete _4f3.attributes[_4f6.name];});}if(_4f5&&(_4f5!==_4ed)){_4f3.symbol=_4f5.toJson();}json.push(_4f3);}return _4ea?json:_3bf.toJson(json);},_selectHandler:function(_4f7,_4f8,_4f9,_4fa,dfd){var _4fb,ctor=this.constructor;switch(_4f8){case ctor.SELECTION_NEW:this.clearSelection(true);_4fb=true;break;case ctor.SELECTION_ADD:_4fb=true;break;case ctor.SELECTION_SUBTRACT:_4fb=false;break;}var i,_4fc=_4f7.features,mode=this._mode,_4fd=[],_4fe=this.objectIdField,_4ff,oid;if(_4fb){for(i=0;i<_4fc.length;i++){_4ff=_4fc[i];oid=_4ff.attributes[_4fe];var _500=mode._addFeatureIIf(oid,_4ff);_4fd.push(_500);this._selectFeatureIIf(oid,_500,mode);}}else{for(i=0;i<_4fc.length;i++){_4ff=_4fc[i];oid=_4ff.attributes[_4fe];this._unSelectFeatureIIf(oid,mode);var _501=mode._removeFeatureIIf(oid);_4fd.push(_501||_4ff);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_4fd,_4f8,_4f7.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_4f9,dfd);if(_4f7.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_502,mode){var _503=this._selectedFeatures,_504=_503[oid];if(!_504){mode._incRefCount(oid);_503[oid]=_502;if(!this._isTable){this._setSelectSymbol(_502);}}return _504||_502;},_unSelectFeatureIIf:function(oid,mode){var _505=this._selectedFeatures[oid];if(_505){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_505);}}return _505;},_isSelected:function(_506){},_setSelectSymbol:function(_507){var _508=this._selectionSymbol;if(_508&&!this._isSelOnly){_507.setSymbol(_508);}},_setUnSelectSymbol:function(_509){var _50a=this._selectionSymbol;if(_50a&&!this._isSelOnly){if(_50a===_509.symbol){_509.setSymbol(null,true);}}},_getOutFields:function(){var _50b=_3be.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_50c,_50d,arr){return !!_50c&&(_3be.indexOf(arr,_50c)===_50d);});var _50e=lang.clone(this._outFields);if(_50e){if(_3be.indexOf(_50e,"*")!==-1){return _50e;}_3be.forEach(_50b,function(_50f){if(_3be.indexOf(_50e,_50f)===-1){_50e.push(_50f);}});return _50e;}else{return _50b;}},_checkFields:function(_510){var _511=_510||this._getOutFields();_3be.forEach(_511,function(_512){if(_512==="*"){return;}if(!this._getField(_512)){console.debug("esri.layers.FeatureLayer: "+_3c4.substitute({url:this.url,field:_512},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_510&&!this._isTable&&!this._fserver&&!this._collection){var _513=_3be.some(this.fields,function(_514){return (_514&&_514.type==="esriFieldTypeGeometry")?true:false;});if(!_513){console.debug("esri.layers.FeatureLayer: "+_3c4.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _515=this.renderer;if(_515&&this.fields.length>0){var _516=_3be.filter([_515,_515.observationRenderer,_515.latestObservationRenderer,_515.trackRenderer],_3c4.isDefined);var _517=[];_3be.forEach(_516,function(rnd){var _518,_519;_519=rnd.attributeField;if(_519&&!lang.isFunction(_519)){_518=!this._getField(_519)&&this._getField(_519,true);if(_518){rnd.attributeField=_518.name;}}_519=rnd.attributeField2;if(_519){_518=!this._getField(_519)&&this._getField(_519,true);if(_518){rnd.attributeField2=_518.name;}}_519=rnd.attributeField3;if(_519){_518=!this._getField(_519)&&this._getField(_519,true);if(_518){rnd.attributeField3=_518.name;}}if(!lang.isFunction(rnd.attributeField)){_517.push(rnd.attributeField);}_517.push(rnd.attributeField2);_517.push(rnd.attributeField3);},this);this._rendererFields=_3be.filter(_517,_3c4.isDefined);}},_getField:function(_51a,_51b){var _51c=this.fields;if(!_51c||_51c.length===0){return null;}var _51d;if(_51b){_51a=_51a.toLowerCase();}_3be.some(_51c,function(_51e){var _51f=false;if(_51b){_51f=(_51e&&_51e.name.toLowerCase()===_51a)?true:false;}else{_51f=(_51e&&_51e.name===_51a)?true:false;}if(_51f){_51d=_51e;}return _51f;});return _51d;},_getDateOpts:function(){if(!this._dtOpts){var _520=_3be.map(_3be.filter(this.fields,function(_521){return !!(_521&&_521.type==="esriFieldTypeDate");}),function(_522){return _522.name;});this._dtOpts={properties:_520};}return this._dtOpts;},_applyNormalized:function(_523,_524){if(_523&&_524){_3be.forEach(_523,function(_525,_526){if(_525&&_524[_526]){_525.setGeometry(_524[_526]);}});}},_editHandler:function(_527,adds,_528,_529,_52a,dfd){var _52b=_527.addResults,_52c=_527.updateResults,_52d=_527.deleteResults,i,_52e,oid,_52f,attr,_530=this.objectIdField,mode=this._mode,_531=this._isTable;var _532=this.editFieldsInfo,_533=this.getOutFields()||[],_534=_532&&_532.creatorField,_535=_532&&_532.creationDateField,_536=_532&&_532.editorField,_537=_532&&_532.editDateField,_538=_532&&_532.realm;if(_3be.indexOf(_533,"*")===-1){if(_534&&_3be.indexOf(_533,_534)===-1){_534=null;}if(_535&&_3be.indexOf(_533,_535)===-1){_535=null;}if(_536&&_3be.indexOf(_533,_536)===-1){_536=null;}if(_537&&_3be.indexOf(_533,_537)===-1){_537=null;}}var _539=(_535||_537)?(new Date()).getTime():null,_53a=(_534||_536)?this.getUserId():undefined;if(_53a&&_538){_53a=_53a+"@"+_538;}if(_52b){for(i=0;i<_52b.length;i++){_52b[i]=new _3da(_52b[i]);if(_531){continue;}_52e=_52b[i];if(_52e.success){oid=_52e.objectId;_52f=adds[i];var gl=_52f._graphicsLayer;if(gl&&gl!==this){gl.remove(_52f);}attr=_52f.attributes||{};attr[_530]=oid;if(_534){attr[_534]=_53a;}if(_536){attr[_536]=_53a;}if(_535){attr[_535]=_539;}if(_537){attr[_537]=_539;}_52f.setAttributes(attr);if(mode._init){mode.drawFeature(_52f);}}}}if(_52c){for(i=0;i<_52c.length;i++){_52c[i]=new _3da(_52c[i]);if(_531){continue;}_52e=_52c[i];if(_52e.success){oid=_52e.objectId;_52f=_528[oid];var _53b=mode._getFeature(oid);if(_53b){if(_53b.geometry!==_52f.geometry){_53b.setGeometry(_3d3.fromJson(_52f.geometry.toJson()));}this._repaint(_53b,oid);}_52f=_53b||_52f;attr=_52f.attributes||{};if(_536){attr[_536]=_53a;}if(_537){attr[_537]=_539;}_52f.setAttributes(attr);}}}if(_52d){var _53c=[];for(i=0;i<_52d.length;i++){_52d[i]=new _3da(_52d[i]);if(_531){continue;}_52e=_52d[i];if(_52e.success){oid=_52e.objectId;_52f=mode._getFeature(oid);if(_52f){if(this._unSelectFeatureIIf(oid,mode)){_53c.push(_52f);}_52f._count=0;mode._removeFeatureIIf(oid);}}}if(_53c.length>0){this.onSelectionComplete(_53c,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_52b,_52c,_52d],"onEditsComplete",_529,dfd);},_sendAttachment:function(type,_53d,_53e,_53f,_540){var _541=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_53d+"/"+_541,self=this;var dfd=_3c5({url:url,form:_53e,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_542){var _543=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_544=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_545=new _3da(_542[_543]);_545.attachmentId=_545.objectId;_545.objectId=_53d;self._resolve([_545],_544,_53f);return _545;}).addErrback(function(_546){self._resolve([_546],null,_540,null,true);});return dfd;},_repaint:function(_547,oid,_548){oid=_3c4.isDefined(oid)?oid:_547.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_547.setSymbol(_547.symbol,_548);}},_getKind:function(_549){var _54a=this._trackManager;if(_54a){return _54a.isLatestObservation(_549)?1:0;}return 0;}});lang.mixin(_3df,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_3d4._createWrappers(_3df);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_3df,_3c3);}return _3df;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_54b,_54c,on,_54d,_54e){return _54b("dijit.form._ListMouseMixin",_54e,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_54d.press,function(evt){evt.preventDefault();}));this._listConnect(_54d.press,"_onMouseDown");this._listConnect(_54d.release,"_onMouseUp");this._listConnect(_54c.enter,"_onMouseOver");this._listConnect(_54c.leave,"_onMouseOut");},_onMouseDown:function(evt,_54f){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_54f);},_onMouseUp:function(evt,_550){this._isDragging=false;var _551=this.selected;var _552=this._hoveredNode;if(_551&&_550==_551){this.onClick(_551);}else{if(_552&&_550==_552){this._setSelectedAttr(_552);this.onClick(_552);}}},_onMouseOut:function(evt,_553){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_554){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_554;this.onHover(_554);if(this._isDragging){this._setSelectedAttr(_554);}}});});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_555,_556,_557,_558,dom,_559,_55a,_55b,_55c,_55d,_55e,_55f,keys,lang,on,_560,_561,has,_562,_563,_564,win,_565,_566,_567,_568,_569,_56a,_56b){var _56c=_557("dijit._editor.RichText",[_565,_566],{constructor:function(_56d){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_56d&&lang.isString(_56d.value)){this.value=_56d.value;}this.onLoadDeferred=new _558();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_562.publish(_56b._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _56e={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_56e.Z=exec("redo");}var key;for(key in _56e){this.addKeyHandler(key,true,false,_56e[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_56c._editorCommandsLocalized){this._local2NativeFormatNames=_56c._local2NativeFormatNames;this._native2LocalFormatNames=_56c._native2LocalFormatNames;return;}_56c._editorCommandsLocalized=true;_56c._local2NativeFormatNames={};_56c._native2LocalFormatNames={};this._local2NativeFormatNames=_56c._local2NativeFormatNames;this._native2LocalFormatNames=_56c._native2LocalFormatNames;var _56f=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _570="",_571,i=0;while((_571=_56f[i++])){if(_571.charAt(1)!=="l"){_570+="<"+_571+"><span>content</span></"+_571+"><br/>";}else{_570+="<"+_571+"><li>content</li></"+_571+"><br/>";}}var _572={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_55b.create("div",{style:_572,innerHTML:_570});this.ownerDocumentBody.appendChild(div);var _573=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _574=node.tagName.toLowerCase();this._local2NativeFormatNames[_574]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_574]]=_574;node=node.nextSibling.nextSibling;}catch(e){}}_55b.destroy(div);});this.defer(_573);},open:function(_575){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _558();}if(!this.isClosed){this.close();}_562.publish(_56b._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_575.nodeName){this.domNode=_575;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_55b.place(dn,ta,"before");var _576=lang.hitch(this,function(){_55d.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_576,10);}else{_576();}if(ta.form){var _577=ta.value;this.reset=function(){var _578=this.getValue();if(_578!==_577){this.replaceValue(_577);}};on(ta.form,"submit",lang.hitch(this,function(){_559.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_569.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_556["useXDomain"]||_556["allowXdRichTextSave"])){var _579=dom.byId(_56b._scopeName+"._editor.RichText.value");if(_579&&_579.value!==""){var _57a=_579.value.split(this._SEPARATOR),i=0,dat;while((dat=_57a[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_57a=_57a.splice(i,1);_579.value=_57a.join(this._SEPARATOR);break;}}}if(!_56c._globalSaveHandler){_56c._globalSaveHandler={};_563.addOnUnload(function(){var id;for(id in _56c._globalSaveHandler){var f=_56c._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_56c._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_55a.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _57b=_55d.getComputedStyle(this.domNode);var html="";var _57c=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_57c=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_57b.fontWeight,_57b.fontSize,_57b.fontFamily].join(" ");var _57d=_57b.lineHeight;if(_57d.indexOf("px")>=0){_57d=parseFloat(_57d)/parseFloat(_57b.fontSize);}else{if(_57d.indexOf("em")>=0){_57d=parseFloat(_57d);}else{_57d="normal";}}var _57e="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_57f){_57f=_57f.replace(/^;/ig,"")+";";var s=_57f.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_55d.set(self.domNode,sC,"");}_57e+=_57f+";";});var _580=_560("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_580.length?"<title>"+_580[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_57d,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_57c&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_57c?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_57e+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _581=[];if(this.styleSheets){_581=this.styleSheets.split(";");this.styleSheets="";}_581=_581.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_581[i++])){var _582=(new _564(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_582);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_582+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _564(win.global.location,url)).toString();}if(_555.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _583=this.document.createElement("link");_583.rel="stylesheet";_583.type="text/css";_583.href=url;head.appendChild(_583);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _564(win.global.location,url)).toString();}var _584=_555.indexOf(this.editingAreaStyleSheets,url);if(_584===-1){return;}delete this.editingAreaStyleSheets[_584];_560("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_585){_585=!!_585;this._set("disabled",_585);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _586=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_586){this.editNode.unselectable="on";}this.editNode.contentEditable=!_585;if(_586){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_585?"off":"on");}catch(e){return;}if(!_585&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_56a.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _587=this;if(has("ie")){this.tabStop=_55b.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_587.editNode.setActive();};}}this.focusNode=this.editNode;var _588=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_555.forEach(_588,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _589=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_561(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_589);}else{_589();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_55e.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_55e.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_58a){_55f.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_58a);},_setValueAttr:function(_58b){this.setValue(_58b);},_setDisableSpellCheckAttr:function(_58c){if(this.document){_559.set(this.document.body,"spellcheck",!_58c);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_559.set(this.document.body,"spellcheck",!_58c);}));}this._set("disableSpellCheck",_58c);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_58d=this._keyHandlers[c],args=arguments;if(_58d&&!e.altKey){_555.some(_58d,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_58e,_58f){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_58e||false,ctrl:ctrl||false,handler:_58f});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _590=this.getValue(true);if(_590!==this.value){this.onChange(_590);}this._set("value",_590);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_56a.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_591){var _592=cmd.toLowerCase();if(_592==="formatblock"){if(has("safari")&&_591===undefined){_592="heading";}}else{if(_592==="hilitecolor"&&!has("mozilla")){_592="backcolor";}}return _592;},_qcaCache:{},queryCommandAvailable:function(_593){var ca=this._qcaCache[_593];if(ca!==undefined){return ca;}return (this._qcaCache[_593]=this._queryCommandAvailable(_593));},_queryCommandAvailable:function(_594){var ie=1;var _595=1<<1;var _596=1<<2;var _597=1<<3;function _598(_599){return {ie:Boolean(_599&ie),mozilla:Boolean(_599&_595),webkit:Boolean(_599&_596),opera:Boolean(_599&_597)};};var _59a=null;switch(_594.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_59a=_598(_595|ie|_596|_597);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_59a=_598(_595|ie|_597|_596);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_59a=_598(ie);break;case "cut":case "copy":case "paste":_59a=_598(ie|_595|_596|_597);break;case "inserttable":_59a=_598(_595|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_59a=_598(ie|_595);break;default:return false;}return (has("ie")&&_59a.ie)||(has("mozilla")&&_59a.mozilla)||(has("webkit")&&_59a.webkit)||(has("opera")&&_59a.opera);},execCommand:function(_59b,_59c){var _59d;this.focus();_59b=this._normalizeCommand(_59b,_59c);if(_59c!==undefined){if(_59b==="heading"){throw new Error("unimplemented");}else{if((_59b==="formatblock")&&has("ie")){_59c="<"+_59c+">";}}}var _59e="_"+_59b+"Impl";if(this[_59e]){_59d=this[_59e](_59c);}else{_59c=arguments.length>1?_59c:null;if(_59c||_59b!=="createlink"){_59d=this.document.execCommand(_59b,false,_59c);}}this.onDisplayChanged();return _59d;},queryCommandEnabled:function(_59f){if(this.disabled||!this._disabledOK){return false;}_59f=this._normalizeCommand(_59f);var _5a0="_"+_59f+"EnabledImpl";if(this[_5a0]){return this[_5a0](_59f);}else{return this._browserQueryCommandEnabled(_59f);}},queryCommandState:function(_5a1){if(this.disabled||!this._disabledOK){return false;}_5a1=this._normalizeCommand(_5a1);try{return this.document.queryCommandState(_5a1);}catch(e){return false;}},queryCommandValue:function(_5a2){if(this.disabled||!this._disabledOK){return false;}var r;_5a2=this._normalizeCommand(_5a2);if(has("ie")&&_5a2==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_5a2)];}else{if(has("mozilla")&&_5a2==="hilitecolor"){var _5a3;try{_5a3=this.document.queryCommandValue("styleWithCSS");}catch(e){_5a3=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_5a2);this.document.execCommand("styleWithCSS",false,_5a3);}else{r=this.document.queryCommandValue(_5a2);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_567,args);},placeCursorAtStart:function(){this.focus();var _5a4=false;if(has("mozilla")){var _5a5=this.editNode.firstChild;while(_5a5){if(_5a5.nodeType===3){if(_5a5.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5a4=true;this._sCall("selectElement",[_5a5]);break;}}else{if(_5a5.nodeType===1){_5a4=true;var tg=_5a5.tagName?_5a5.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_5a5]);}else{this._sCall("selectElementChildren",[_5a5]);}break;}}_5a5=_5a5.nextSibling;}}else{_5a4=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5a4){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _5a6=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5a6=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_5a6=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_5a6=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5a6){this._sCall("collapse",[false]);}},getValue:function(_5a7){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_5a7);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_555.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_555.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_5a8){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_5a8){dom=lang.clone(dom);}_555.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_569.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_555.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _5a9=dom.byId(_56b._scopeName+"._editor.RichText.value");if(_5a9){if(_5a9.value){_5a9.value+=this._SEPARATOR;}_5a9.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_5aa){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_5aa){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_55f.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _569.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_55f.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _569.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_55b.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_55a.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_56c._globalSaveHandler){delete _56c._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_5ab){if(!_5ab){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_5ab);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _5ac=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_5ac=true;}else{_5ac=this.document.queryCommandEnabled("createlink");}}else{_5ac=this._browserQueryCommandEnabled("createlink");}return _5ac;},_unlinkEnabledImpl:function(){var _5ad=true;if(has("mozilla")||has("webkit")){_5ad=this._sCall("hasAncestorElement",["a"]);}else{_5ad=this._browserQueryCommandEnabled("unlink");}return _5ad;},_inserttableEnabledImpl:function(){var _5ae=true;if(has("mozilla")||has("webkit")){_5ae=true;}else{_5ae=this._browserQueryCommandEnabled("inserttable");}return _5ae;},_cutEnabledImpl:function(){var _5af=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5af=!!sel;}else{_5af=this._browserQueryCommandEnabled("cut");}return _5af;},_copyEnabledImpl:function(){var _5b0=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5b0=!!sel;}else{_5b0=this._browserQueryCommandEnabled("copy");}return _5b0;},_pasteEnabledImpl:function(){var _5b1=true;if(has("webkit")){return true;}else{_5b1=this._browserQueryCommandEnabled("paste");}return _5b1;},_inserthorizontalruleImpl:function(_5b2){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_5b2);},_unlinkImpl:function(_5b3){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_5b3);},_hilitecolorImpl:function(_5b4){var _5b5;var _5b6=this._handleTextColorOrProperties("hilitecolor",_5b4);if(!_5b6){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_5b5=this.document.execCommand("hilitecolor",false,_5b4);this.document.execCommand("styleWithCSS",false,false);}else{_5b5=this.document.execCommand("hilitecolor",false,_5b4);}}return _5b5;},_backcolorImpl:function(_5b7){if(has("ie")){_5b7=_5b7?_5b7:null;}var _5b8=this._handleTextColorOrProperties("backcolor",_5b7);if(!_5b8){_5b8=this.document.execCommand("backcolor",false,_5b7);}return _5b8;},_forecolorImpl:function(_5b9){if(has("ie")){_5b9=_5b9?_5b9:null;}var _5ba=false;_5ba=this._handleTextColorOrProperties("forecolor",_5b9);if(!_5ba){_5ba=this.document.execCommand("forecolor",false,_5b9);}return _5ba;},_inserthtmlImpl:function(_5bb){_5bb=this._preFilterContent(_5bb);var rv=true;if(has("ie")){var _5bc=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_5bc.item(0);while(_5bc.length){_5bc.remove(_5bc.item(0));}n.outerHTML=_5bb;}else{_5bc.pasteHTML(_5bb);}_5bc.select();}else{if(has("mozilla")&&!_5bb.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_5bb);}}return rv;},_boldImpl:function(_5bd){var _5be=false;if(has("ie")){this._adaptIESelection();_5be=this._adaptIEFormatAreaAndExec("bold");}if(!_5be){_5be=this.document.execCommand("bold",false,_5bd);}return _5be;},_italicImpl:function(_5bf){var _5c0=false;if(has("ie")){this._adaptIESelection();_5c0=this._adaptIEFormatAreaAndExec("italic");}if(!_5c0){_5c0=this.document.execCommand("italic",false,_5bf);}return _5c0;},_underlineImpl:function(_5c1){var _5c2=false;if(has("ie")){this._adaptIESelection();_5c2=this._adaptIEFormatAreaAndExec("underline");}if(!_5c2){_5c2=this.document.execCommand("underline",false,_5c1);}return _5c2;},_strikethroughImpl:function(_5c3){var _5c4=false;if(has("ie")){this._adaptIESelection();_5c4=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_5c4){_5c4=this.document.execCommand("strikethrough",false,_5c3);}return _5c4;},_superscriptImpl:function(_5c5){var _5c6=false;if(has("ie")){this._adaptIESelection();_5c6=this._adaptIEFormatAreaAndExec("superscript");}if(!_5c6){_5c6=this.document.execCommand("superscript",false,_5c5);}return _5c6;},_subscriptImpl:function(_5c7){var _5c8=false;if(has("ie")){this._adaptIESelection();_5c8=this._adaptIEFormatAreaAndExec("subscript");}if(!_5c8){_5c8=this.document.execCommand("subscript",false,_5c7);}return _5c8;},_fontnameImpl:function(_5c9){var _5ca;if(has("ie")){_5ca=this._handleTextColorOrProperties("fontname",_5c9);}if(!_5ca){_5ca=this.document.execCommand("fontname",false,_5c9);}return _5ca;},_fontsizeImpl:function(_5cb){var _5cc;if(has("ie")){_5cc=this._handleTextColorOrProperties("fontsize",_5cb);}if(!_5cc){_5cc=this.document.execCommand("fontsize",false,_5cb);}return _5cc;},_insertorderedlistImpl:function(_5cd){var _5ce=false;if(has("ie")){_5ce=this._adaptIEList("insertorderedlist",_5cd);}if(!_5ce){_5ce=this.document.execCommand("insertorderedlist",false,_5cd);}return _5ce;},_insertunorderedlistImpl:function(_5cf){var _5d0=false;if(has("ie")){_5d0=this._adaptIEList("insertunorderedlist",_5cf);}if(!_5d0){_5d0=this.document.execCommand("insertunorderedlist",false,_5cf);}return _5d0;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_55c.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_5d1){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_5d1);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_5d1)==="");}}return false;},_removeStartingRangeFromRange:function(node,_5d2){if(node.nextSibling){_5d2.setStart(node.nextSibling,0);}else{var _5d3=node.parentNode;while(_5d3&&_5d3.nextSibling==null){_5d3=_5d3.parentNode;}if(_5d3){_5d2.setStart(_5d3.nextSibling,0);}}return _5d2;},_adaptIESelection:function(){var _5d4=_568.getSelection(this.window);if(_5d4&&_5d4.rangeCount&&!_5d4.isCollapsed){var _5d5=_5d4.getRangeAt(0);var _5d6=_5d5.startContainer;var _5d7=_5d5.startOffset;while(_5d6.nodeType===3&&_5d7>=_5d6.length&&_5d6.nextSibling){_5d7=_5d7-_5d6.length;_5d6=_5d6.nextSibling;}var _5d8=null;while(this._isNodeEmpty(_5d6,_5d7)&&_5d6!==_5d8){_5d8=_5d6;_5d5=this._removeStartingRangeFromRange(_5d6,_5d5);_5d6=_5d5.startContainer;_5d7=0;}_5d4.removeAllRanges();_5d4.addRange(_5d5);}},_adaptIEFormatAreaAndExec:function(_5d9){var _5da=_568.getSelection(this.window);var doc=this.document;var rs,ret,_5db,txt,_5dc,_5dd,_5de,_5df;if(_5d9&&_5da&&_5da.isCollapsed){var _5e0=this.queryCommandValue(_5d9);if(_5e0){var _5e1=this._tagNamesForCommand(_5d9);_5db=_5da.getRangeAt(0);var fs=_5db.startContainer;if(fs.nodeType===3){var _5e2=_5db.endOffset;if(fs.length<_5e2){ret=this._adjustNodeAndOffset(rs,_5e2);fs=ret.node;_5e2=ret.offset;}}var _5e3;while(fs&&fs!==this.editNode){var _5e4=fs.tagName?fs.tagName.toLowerCase():"";if(_555.indexOf(_5e1,_5e4)>-1){_5e3=fs;break;}fs=fs.parentNode;}if(_5e3){rs=_5db.startContainer;var _5e5=doc.createElement(_5e3.tagName);_55b.place(_5e5,_5e3,"after");if(rs&&rs.nodeType===3){var _5e6,_5e7;var _5e8=_5db.endOffset;if(rs.length<_5e8){ret=this._adjustNodeAndOffset(rs,_5e8);rs=ret.node;_5e8=ret.offset;}txt=rs.nodeValue;_5dc=doc.createTextNode(txt.substring(0,_5e8));var _5e9=txt.substring(_5e8,txt.length);if(_5e9){_5dd=doc.createTextNode(_5e9);}_55b.place(_5dc,rs,"before");if(_5dd){_5de=doc.createElement("span");_5de.className="ieFormatBreakerSpan";_55b.place(_5de,rs,"after");_55b.place(_5dd,_5de,"after");_5dd=_5de;}_55b.destroy(rs);var _5ea=_5dc.parentNode;var _5eb=[];var _5ec;while(_5ea!==_5e3){var tg=_5ea.tagName;_5ec={tagName:tg};_5eb.push(_5ec);var _5ed=doc.createElement(tg);if(_5ea.style){if(_5ed.style){if(_5ea.style.cssText){_5ed.style.cssText=_5ea.style.cssText;_5ec.cssText=_5ea.style.cssText;}}}if(_5ea.tagName==="FONT"){if(_5ea.color){_5ed.color=_5ea.color;_5ec.color=_5ea.color;}if(_5ea.face){_5ed.face=_5ea.face;_5ec.face=_5ea.face;}if(_5ea.size){_5ed.size=_5ea.size;_5ec.size=_5ea.size;}}if(_5ea.className){_5ed.className=_5ea.className;_5ec.className=_5ea.className;}if(_5dd){_5e6=_5dd;while(_5e6){_5e7=_5e6.nextSibling;_5ed.appendChild(_5e6);_5e6=_5e7;}}if(_5ed.tagName==_5ea.tagName){_5de=doc.createElement("span");_5de.className="ieFormatBreakerSpan";_55b.place(_5de,_5ea,"after");_55b.place(_5ed,_5de,"after");}else{_55b.place(_5ed,_5ea,"after");}_5dc=_5ea;_5dd=_5ed;_5ea=_5ea.parentNode;}if(_5dd){_5e6=_5dd;if(_5e6.nodeType===1||(_5e6.nodeType===3&&_5e6.nodeValue)){_5e5.innerHTML="";}while(_5e6){_5e7=_5e6.nextSibling;_5e5.appendChild(_5e6);_5e6=_5e7;}}var _5ee;if(_5eb.length){_5ec=_5eb.pop();var _5ef=doc.createElement(_5ec.tagName);if(_5ec.cssText&&_5ef.style){_5ef.style.cssText=_5ec.cssText;}if(_5ec.className){_5ef.className=_5ec.className;}if(_5ec.tagName==="FONT"){if(_5ec.color){_5ef.color=_5ec.color;}if(_5ec.face){_5ef.face=_5ec.face;}if(_5ec.size){_5ef.size=_5ec.size;}}_55b.place(_5ef,_5e5,"before");while(_5eb.length){_5ec=_5eb.pop();var _5f0=doc.createElement(_5ec.tagName);if(_5ec.cssText&&_5f0.style){_5f0.style.cssText=_5ec.cssText;}if(_5ec.className){_5f0.className=_5ec.className;}if(_5ec.tagName==="FONT"){if(_5ec.color){_5f0.color=_5ec.color;}if(_5ec.face){_5f0.face=_5ec.face;}if(_5ec.size){_5f0.size=_5ec.size;}}_5ef.appendChild(_5f0);_5ef=_5f0;}_5df=doc.createTextNode(".");_5de.appendChild(_5df);_5ef.appendChild(_5df);_5ee=_568.create(this.window);_5ee.setStart(_5df,0);_5ee.setEnd(_5df,_5df.length);_5da.removeAllRanges();_5da.addRange(_5ee);this._sCall("collapse",[false]);_5df.parentNode.innerHTML="";}else{_5de=doc.createElement("span");_5de.className="ieFormatBreakerSpan";_5df=doc.createTextNode(".");_5de.appendChild(_5df);_55b.place(_5de,_5e5,"before");_5ee=_568.create(this.window);_5ee.setStart(_5df,0);_5ee.setEnd(_5df,_5df.length);_5da.removeAllRanges();_5da.addRange(_5ee);this._sCall("collapse",[false]);_5df.parentNode.innerHTML="";}if(!_5e5.firstChild){_55b.destroy(_5e5);}return true;}}return false;}else{_5db=_5da.getRangeAt(0);rs=_5db.startContainer;if(rs&&rs.nodeType===3){var _5e2=_5db.startOffset;if(rs.length<_5e2){ret=this._adjustNodeAndOffset(rs,_5e2);rs=ret.node;_5e2=ret.offset;}txt=rs.nodeValue;_5dc=doc.createTextNode(txt.substring(0,_5e2));var _5e9=txt.substring(_5e2);if(_5e9!==""){_5dd=doc.createTextNode(txt.substring(_5e2));}_5de=doc.createElement("span");_5df=doc.createTextNode(".");_5de.appendChild(_5df);if(_5dc.length){_55b.place(_5dc,rs,"after");}else{_5dc=rs;}_55b.place(_5de,_5dc,"after");if(_5dd){_55b.place(_5dd,_5de,"after");}_55b.destroy(rs);var _5ee=_568.create(this.window);_5ee.setStart(_5df,0);_5ee.setEnd(_5df,_5df.length);_5da.removeAllRanges();_5da.addRange(_5ee);doc.execCommand(_5d9);_55b.place(_5de.firstChild,_5de,"before");_55b.destroy(_5de);_5ee.setStart(_5df,0);_5ee.setEnd(_5df,_5df.length);_5da.removeAllRanges();_5da.addRange(_5ee);this._sCall("collapse",[false]);_5df.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_5f1){var _5f2=_568.getSelection(this.window);if(_5f2.isCollapsed){if(_5f2.rangeCount&&!this.queryCommandValue(_5f1)){var _5f3=_5f2.getRangeAt(0);var sc=_5f3.startContainer;if(sc&&sc.nodeType==3){if(!_5f3.startOffset){var _5f4="ul";if(_5f1==="insertorderedlist"){_5f4="ol";}var list=this.document.createElement(_5f4);var li=_55b.create("li",null,list);_55b.place(list,sc,"before");li.appendChild(sc);_55b.create("br",null,list,"after");var _5f5=_568.create(this.window);_5f5.setStart(sc,0);_5f5.setEnd(sc,sc.length);_5f2.removeAllRanges();_5f2.addRange(_5f5);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_5f6,_5f7){var _5f8=_568.getSelection(this.window);var doc=this.document;var rs,ret,_5f9,txt,_5fa,_5fb,_5fc,_5fd;_5f7=_5f7||null;if(_5f6&&_5f8&&_5f8.isCollapsed){if(_5f8.rangeCount){_5f9=_5f8.getRangeAt(0);rs=_5f9.startContainer;if(rs&&rs.nodeType===3){var _5fe=_5f9.startOffset;if(rs.length<_5fe){ret=this._adjustNodeAndOffset(rs,_5fe);rs=ret.node;_5fe=ret.offset;}txt=rs.nodeValue;_5fa=doc.createTextNode(txt.substring(0,_5fe));var _5ff=txt.substring(_5fe);if(_5ff!==""){_5fb=doc.createTextNode(txt.substring(_5fe));}_5fc=doc.createElement("span");_5fd=doc.createTextNode(".");_5fc.appendChild(_5fd);var _600=doc.createElement("span");_5fc.appendChild(_600);if(_5fa.length){_55b.place(_5fa,rs,"after");}else{_5fa=rs;}_55b.place(_5fc,_5fa,"after");if(_5fb){_55b.place(_5fb,_5fc,"after");}_55b.destroy(rs);var _601=_568.create(this.window);_601.setStart(_5fd,0);_601.setEnd(_5fd,_5fd.length);_5f8.removeAllRanges();_5f8.addRange(_601);if(has("webkit")){var _602="color";if(_5f6==="hilitecolor"||_5f6==="backcolor"){_602="backgroundColor";}_55d.set(_5fc,_602,_5f7);this._sCall("remove",[]);_55b.destroy(_600);_5fc.innerHTML="&#160;";this._sCall("selectElement",[_5fc]);this.focus();}else{this.execCommand(_5f6,_5f7);_55b.place(_5fc.firstChild,_5fc,"before");_55b.destroy(_5fc);_601.setStart(_5fd,0);_601.setEnd(_5fd,_5fd.length);_5f8.removeAllRanges();_5f8.addRange(_601);this._sCall("collapse",[false]);_5fd.parentNode.removeChild(_5fd);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_603){while(node.length<_603&&node.nextSibling&&node.nextSibling.nodeType===3){_603=_603-node.length;node=node.nextSibling;}return {"node":node,"offset":_603};},_tagNamesForCommand:function(_604){if(_604==="bold"){return ["b","strong"];}else{if(_604==="italic"){return ["i","em"];}else{if(_604==="strikethrough"){return ["s","strike"];}else{if(_604==="superscript"){return ["sup"];}else{if(_604==="subscript"){return ["sub"];}else{if(_604==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_560(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_55b.place(b.firstChild,b,"before");}_55b.destroy(b);});return node;}});return _56c;});},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_605,lang,has,_606,_607){var _608=_605([_607],{declaredClass:"esri.layers._SelectionMode",constructor:function(_609){this.featureLayer=_609;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_608,_606);}return _608;});},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_60a,_60b,_60c,_60d,keys,lang,_60e,_60f,has,_610,_611,_612,_613,_614){return _60b("dijit.form._AutoCompleterMixin",_614,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_615){var pos=0;if(typeof (_615.selectionStart)=="number"){pos=_615.selectionStart;}else{if(has("ie")){var tr=_615.ownerDocument.selection.createRange().duplicate();var ntr=_615.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_616,_617){_617=parseInt(_617);_613.selectInputText(_616,_617,_617);},_setDisabledAttr:function(_618){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_618?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _619=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_619=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_619);}_60d.stop(evt);break;case keys.ENTER:if(_619){if(_619==pw.nextButton){this._nextSearch(1);_60d.stop(evt);break;}else{if(_619==pw.previousButton){this._nextSearch(-1);_60d.stop(evt);break;}}_60d.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _61a=this.get("displayedValue");if(pw&&(_61a==pw._messages["previousMessage"]||_61a==pw._messages["nextMessage"])){break;}if(_619){this._selectOption(_619);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_613.selectInputText(fn,fn.value.length);var _61b=this.ignoreCase?"toLowerCase":"substr";if(text[_61b](0).indexOf(this.focusNode.value[_61b](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_613.selectInputText(fn,cpos);}}else{fn.value=text;_613.selectInputText(fn);}},_openResultList:function(_61c,_61d,_61e){var _61f=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_61c.length&&_61e.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_620){_61c.nextPage(_620!==-1);this.focus();});this.dropDown.createOptions(_61c,_61e,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _61e){if(_61e.direction){this.dropDown.highlightFirstOption();}else{if(!_61e.direction){this.dropDown.highlightLastOption();}}if(_61f){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_61d[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _621=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_621==pw._messages["previousMessage"]||_621==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_621);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_622,_623){var _624="";if(item){if(!_623){_623=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_624=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_623;}this.set("value",_624,_622,_623,item);},_announceOption:function(node){if(!node){return;}var _625;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_625=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_625=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_625);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_60c.get(node,"id"));this._autoCompleteText(_625);},_selectOption:function(_626){this.closeDropDown();if(_626){this._announceOption(_626);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _627=this.id+"_popup",_628=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _628({onChange:lang.hitch(this,this._selectOption),id:_627,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_627);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _629=this.srcNodeRef;this.store=new _611({},_629);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _62a=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_62a):item[_62a];}}}},postCreate:function(){var _62b=_60e("label[for=\""+this.id+"\"]");if(_62b.length){if(!_62b[0].id){_62b[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_62b[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _62c=this.labelFunc(item,this.store),_62d=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_62c=this.doHighlight(_62c,this._lastInput);_62d="html";}return {html:_62d=="html",label:_62c};},doHighlight:function(_62e,find){var _62f=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_60f.escapeString(find);return this._escapeHtml(_62e.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_62f),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_630){return (_630._oldAPI?_630.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_631,_632,_633,item){this._set("item",item||null);if(_631==null){_631="";}this.inherited(arguments);},_setTextDirAttr:function(_634){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_634);}}});});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_635,lang,_636,has,_637,_638,_639,_63a){var _63b=_635(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_63c){this.layer=_63c;this.trackMap={};},initialize:function(map){this.map=map;var _63d=this.layer,_63e=_63d.renderer.trackRenderer;if(_63e&&(_63d.geometryType==="esriGeometryPoint")){var _63f=(this.container=new _63a._GraphicsLayer({id:_63d.id+"_tracks",_child:true}));_63f.loaded=true;_63f.onLoad(_63f);_63f._setMap(map,_63d._div);_63f.setRenderer(_63e);}},addFeatures:function(_640){var tkid,_641=this.trackMap,_642=this.layer,_643=_642._trackIdField;_636.forEach(_640,function(_644){var _645=_644.attributes;tkid=_645[_643];var ary=(_641[tkid]=(_641[tkid]||[]));ary.push(_644);});var _646=_642._startTimeField,_647=_642.objectIdField;var _648=function(a,b){var _649=a.attributes[_646],_64a=b.attributes[_646];if(_649===_64a){return (a.attributes[_647]<b.attributes[_647])?-1:1;}else{return (_649<_64a)?-1:1;}};for(tkid in _641){_641[tkid].sort(_648);}},drawTracks:function(){var _64b=this.container;if(!_64b){return;}var _64c=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_64d,_64e=this.layer._trackIdField,_64f;for(tkid in _64c){ary=_64c[tkid];path=[];for(i=ary.length-1;i>=0;i--){_64d=ary[i].geometry;if(_64d){path.push([_64d.x,_64d.y]);}}_64f={};_64f[_64e]=tkid;if(path.length>0){_64b.add(new _638(new _639({paths:[path],spatialReference:sr}),null,_64f));}}},moveLatestToFront:function(){_636.forEach(this.getLatestObservations(),function(_650){var _651=_650._shape;_651&&_651._moveToFront();this._repaint(_650,null,true);},this.layer);},getLatestObservations:function(){var _652=[];if(!this.layer.renderer.latestObservationRenderer){return _652;}var _653=this.trackMap,tkid;for(tkid in _653){var ary=_653[tkid];_652.push(ary[ary.length-1]);}return _652;},clearTracks:function(){var _654=this.getLatestObservations();this.trackMap={};var _655=this.container;if(_655){_655.clear();}_636.forEach(_654,function(_656){this._repaint(_656,null,true);},this.layer);},isLatestObservation:function(_657){var _658=this.layer._trackIdField;var _659=this.trackMap[_657.attributes[_658]];if(_659){return (_659[_659.length-1]===_657);}return false;},destroy:function(){var _65a=this.container;if(_65a){_65a.clear();_65a._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_63b,_637);}return _63b;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(_65b,_65c,_65d,dom,_65e,_65f,has,_660){var _661=(_660._isElementShown=function(elem){var s=_65f.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_65e.get(elem,"type")!="hidden");});_660.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _65e.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _662=elem.contentDocument;if("designMode" in _662&&_662.designMode=="on"){return true;}body=_662.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _663=(_660.isTabNavigable=function(elem){if(_65e.get(elem,"disabled")){return false;}else{if(_65e.has(elem,"tabIndex")){return _65e.get(elem,"tabIndex")>=0;}else{return _660.hasDefaultTabStop(elem);}}});_660._getTabNavigable=function(root){var _664,last,_665,_666,_667,_668,_669={};function _66a(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _66b=function(_66c){for(var _66d=_66c.firstChild;_66d;_66d=_66d.nextSibling){if(_66d.nodeType!=1||(has("ie")<=9&&_66d.scopeName!=="HTML")||!_661(_66d)){continue;}if(_663(_66d)){var _66e=+_65e.get(_66d,"tabIndex");if(!_65e.has(_66d,"tabIndex")||_66e==0){if(!_664){_664=_66d;}last=_66d;}else{if(_66e>0){if(!_665||_66e<_666){_666=_66e;_665=_66d;}if(!_667||_66e>=_668){_668=_66e;_667=_66d;}}}var rn=_66a(_66d);if(_65e.get(_66d,"checked")&&rn){_669[rn]=_66d;}}if(_66d.nodeName.toUpperCase()!="SELECT"){_66b(_66d);}}};if(_661(root)){_66b(root);}function rs(node){return _669[_66a(node)]||node;};return {first:rs(_664),last:rs(last),lowest:rs(_665),highest:rs(_667)};};_660.getFirstInTabbingOrder=function(root,doc){var _66f=_660._getTabNavigable(dom.byId(root,doc));return _66f.lowest?_66f.lowest:_66f.first;};_660.getLastInTabbingOrder=function(root,doc){var _670=_660._getTabNavigable(dom.byId(root,doc));return _670.last?_670.last:_670.highest;};return {hasDefaultTabStop:_660.hasDefaultTabStop,isTabNavigable:_660.isTabNavigable,_getTabNavigable:_660._getTabNavigable,getFirstInTabbingOrder:_660.getFirstInTabbingOrder,getLastInTabbingOrder:_660.getLastInTabbingOrder};});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_671,lang,dd,_672){var _673=lang.getObject("date.islamic",true,_671);_673.getDaysInMonth=function(_674){return _674.getDaysInIslamicMonth(_674.getMonth(),_674.getFullYear());};_673.compare=function(_675,_676,_677){if(_675 instanceof _672){_675=_675.toGregorian();}if(_676 instanceof _672){_676=_676.toGregorian();}return dd.compare.apply(null,arguments);};_673.add=function(date,_678,_679){var _67a=new _672(date);switch(_678){case "day":_67a.setDate(date.getDate()+_679);break;case "weekday":var day=date.getDay();if(((day+_679)<5)&&((day+_679)>0)){_67a.setDate(date.getDate()+_679);}else{var _67b=0,_67c=0;if(day==5){day=4;_67c=(_679>0)?-1:1;}else{if(day==6){day=4;_67c=(_679>0)?-2:2;}}var add=(_679>0)?(5-day-1):-day;var _67d=_679-add;var div=parseInt(_67d/5);if(_67d%5!=0){_67b=(_679>0)?2:-2;}_67b=_67b+div*7+_67d%5+add;_67a.setDate(date.getDate()+_67b+_67c);}break;case "year":_67a.setFullYear(date.getFullYear()+_679);break;case "week":_679*=7;_67a.setDate(date.getDate()+_679);break;case "month":var _67e=date.getMonth();_67a.setMonth(_67e+_679);break;case "hour":_67a.setHours(date.getHours()+_679);break;case "minute":_67a._addMinutes(_679);break;case "second":_67a._addSeconds(_679);break;case "millisecond":_67a._addMilliseconds(_679);break;}return _67a;};_673.difference=function(_67f,_680,_681){_680=_680||new _672();_681=_681||"day";var _682=_680.getFullYear()-_67f.getFullYear();var _683=1;switch(_681){case "weekday":var days=Math.round(_673.difference(_67f,_680,"day"));var _684=parseInt(_673.difference(_67f,_680,"week"));var mod=days%7;if(mod==0){days=_684*5;}else{var adj=0;var aDay=_67f.getDay();var bDay=_680.getDay();_684=parseInt(days/7);mod=days%7;var _685=new _672(_67f);_685.setDate(_685.getDate()+(_684*7));var _686=_685.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_686+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_686+mod)<0:adj=2;}}}days+=adj;days-=(_684*2);}_683=days;break;case "year":_683=_682;break;case "month":var _687=(_680.toGregorian()>_67f.toGregorian())?_680:_67f;var _688=(_680.toGregorian()>_67f.toGregorian())?_67f:_680;var _689=_687.getMonth();var _68a=_688.getMonth();if(_682==0){_683=_687.getMonth()-_688.getMonth();}else{_683=12-_68a;_683+=_689;var i=_688.getFullYear()+1;var e=_687.getFullYear();for(i;i<e;i++){_683+=12;}}if(_680.toGregorian()<_67f.toGregorian()){_683=-_683;}break;case "week":_683=parseInt(_673.difference(_67f,_680,"day")/7);break;case "day":_683/=24;case "hour":_683/=60;case "minute":_683/=60;case "second":_683/=1000;case "millisecond":_683*=_680.toGregorian().getTime()-_67f.toGregorian().getTime();}return Math.round(_683);};return _673;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_68b,lang,_68c,_68d,_68e,has,_68f,_690,_691,_692,Task,_693){var _694=_68b(Task,{declaredClass:"esri.tasks.QueryTask",constructor:function(url,_695){this._handler=lang.hitch(this,this._handler);this._relationshipQueryHandler=lang.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=lang.hitch(this,this._executeForIdsHandler);this._countHandler=lang.hitch(this,this._countHandler);this.source=_695&&_695.source;this.gdbVersion=_695&&_695.gdbVersion;this.registerConnectEvents("esri.tasks.QueryTask",{"complete":["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]});},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_696,_697,_698,_699,_69a){var _69b=_69a.assembly,_69c=this._encode(lang.mixin({},this._url.query,{f:"json"},_696.toJson(_69b&&_69b[0]))),_69d=this._handler,_69e=this._errorHandler;if(this.source){var _69f={source:this.source.toJson()};_69c.layer=_68e.toJson(_69f);}if(this.gdbVersion){_69c.gdbVersion=this.gdbVersion;}return _690({url:this._url.path+"/query",content:_69c,callbackParamName:"callback",load:function(r,i){_69d(r,i,_697,_698,_69a.dfd);},error:function(r){_69e(r,_698,_69a.dfd);},callbackSuffix:_699});},executeRelationshipQuery:function(_6a0,_6a1,_6a2){var _6a3=this._encode(lang.mixin({},this._url.query,{f:"json"},_6a0.toJson())),_6a4=this._relationshipQueryHandler,_6a5=this._errorHandler;if(this.gdbVersion){_6a3.gdbVersion=this.gdbVersion;}var dfd=new _68d(_691._dfdCanceller);dfd._pendingDfd=_690({url:this._url.path+"/queryRelatedRecords",content:_6a3,callbackParamName:"callback",load:function(r,i){_6a4(r,i,_6a1,_6a2,dfd);},error:function(r){_6a5(r,_6a2,dfd);}});return dfd;},executeForIds:function(_6a6,_6a7,_6a8,_6a9){var _6aa=_6a9.assembly,_6ab=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_6a6.toJson(_6aa&&_6aa[0]))),_6ac=this._executeForIdsHandler,_6ad=this._errorHandler;if(this.source){var _6ae={source:this.source.toJson()};_6ab.layer=_68e.toJson(_6ae);}if(this.gdbVersion){_6ab.gdbVersion=this.gdbVersion;}return _690({url:this._url.path+"/query",content:_6ab,callbackParamName:"callback",load:function(r,i){_6ac(r,i,_6a7,_6a8,_6a9.dfd);},error:function(r){_6ad(r,_6a8,_6a9.dfd);}});},executeForCount:function(_6af,_6b0,_6b1,_6b2){var _6b3=_6b2.assembly,_6b4=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_6af.toJson(_6b3&&_6b3[0]))),_6b5=this._countHandler,_6b6=this._errorHandler;if(this.source){var _6b7={source:this.source.toJson()};_6b4.layer=_68e.toJson(_6b7);}if(this.gdbVersion){_6b4.gdbVersion=this.gdbVersion;}return _690({url:this._url.path+"/query",content:_6b4,callbackParamName:"callback",load:function(r,i){_6b5(r,i,_6b0,_6b1,_6b2.dfd);},error:function(r){_6b6(r,_6b1,_6b2.dfd);}});},_handler:function(_6b8,io,_6b9,_6ba,dfd){try{var _6bb=new _693(_6b8);this._successHandler([_6bb],"onComplete",_6b9,dfd);}catch(err){this._errorHandler(err,_6ba,dfd);}},_relationshipQueryHandler:function(_6bc,io,_6bd,_6be,dfd){try{var gt=_6bc.geometryType,sr=_6bc.spatialReference,_6bf={};_68c.forEach(_6bc.relatedRecordGroups,function(gr){var _6c0={};_6c0.geometryType=gt;_6c0.spatialReference=sr;_6c0.features=gr.relatedRecords;var fset=new _693(_6c0);_6bf[gr.objectId]=fset;});this._successHandler([_6bf],"onExecuteRelationshipQueryComplete",_6bd,dfd);}catch(err){this._errorHandler(err,_6be,dfd);}},_executeForIdsHandler:function(_6c1,io,_6c2,_6c3,dfd){try{this._successHandler([_6c1.objectIds],"onExecuteForIdsComplete",_6c2,dfd);}catch(err){this._errorHandler(err,_6c3,dfd);}},_countHandler:function(_6c4,io,_6c5,_6c6,dfd){try{var _6c7,_6c8=_6c4.features,ids=_6c4.objectIds;if(ids){_6c7=ids.length;}else{if(_6c8){throw new Error("Unable to perform query. Please check your parameters.");}else{_6c7=_6c4.count;}}this._successHandler([_6c7],"onExecuteForCountComplete",_6c5,dfd);}catch(err){this._errorHandler(err,_6c6,dfd);}}});_692._createWrappers(_694);if(has("extend-esri")){lang.setObject("tasks.QueryTask",_694,_68f);}return _694;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_6c9,_6ca,_6cb,_6cc,lang,on,has,_6cd){var _6ce=(_6cd.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_6cf,node,_6d0,obj,_6d1,_6d2,_6d3){if(obj!=this._obj){this.stop();this._initialDelay=_6d2||500;this._subsequentDelay=_6d1||0.9;this._minDelay=_6d3||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_6cf,_6d0);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_6d4,_6d5,_6d6,_6d7,_6d8,_6d9){if(_6d4.keyCode){_6d4.charOrCode=_6d4.keyCode;_6cc.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_6d4.charCode){_6d4.charOrCode=String.fromCharCode(_6d4.charCode);_6cc.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _6da=[on(node,_6ca._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_6d4.charOrCode&&(_6d4.ctrlKey===undefined||_6d4.ctrlKey==evt.ctrlKey)&&(_6d4.altKey===undefined||_6d4.altKey==evt.altKey)&&(_6d4.metaKey===undefined||_6d4.metaKey==(evt.metaKey||false))&&(_6d4.shiftKey===undefined||_6d4.shiftKey==evt.shiftKey)){_6cb.stop(evt);_6ce.trigger(evt,_6d5,node,_6d6,_6d4,_6d7,_6d8,_6d9);}else{if(_6ce._obj==_6d4){_6ce.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_6ce._obj==_6d4){_6ce.stop();}}))];return {remove:function(){_6c9.forEach(_6da,function(h){h.remove();});}};},addMouseListener:function(node,_6db,_6dc,_6dd,_6de,_6df){var _6e0=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_6ce.trigger(evt,_6db,node,_6dc,node,_6dd,_6de,_6df);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6ce.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6ce.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_6ce.trigger(evt,_6db,node,_6dc,node,_6dd,_6de,_6df);setTimeout(lang.hitch(this,_6ce.stop),50);}}))];return {remove:function(){_6c9.forEach(_6e0,function(h){h.remove();});}};},addListener:function(_6e1,_6e2,_6e3,_6e4,_6e5,_6e6,_6e7,_6e8){var _6e9=[this.addKeyListener(_6e2,_6e3,_6e4,_6e5,_6e6,_6e7,_6e8),this.addMouseListener(_6e1,_6e4,_6e5,_6e6,_6e7,_6e8)];return {remove:function(){_6c9.forEach(_6e9,function(h){h.remove();});}};}});return _6ce;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_6ea,lang,_6eb,_6ec,_6ed,_6ee,_6ef,_6f0,_6f1){return _6ea("dijit.form.DropDownButton",[_6ee,_6ef,_6f0],{baseClass:"dijitDropDownButton",templateString:_6f1,_fillContent:function(){if(this.srcNodeRef){var _6f2=_6eb("*",this.srcNodeRef);this.inherited(arguments,[_6f2[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _6f3=_6eb("[widgetId]",this.dropDownContainer)[0];this.dropDown=_6ec.byNode(_6f3);delete this.dropDownContainer;}if(this.dropDown){_6ed.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _6f4=this.dropDown;return (!!_6f4&&(!_6f4.href||_6f4.isLoaded));},loadDropDown:function(_6f5){var _6f6=this.dropDown;var _6f7=_6f6.on("load",lang.hitch(this,function(){_6f7.remove();_6f5();}));_6f6.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_6f8,lang,_6f9,has,_6fa,_6fb,_6fc,_6fd){var _6fe=_6f8(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_6ff,_700,_701,_702){this.origin=_6ff;this.cellWidth=_700.width;this.cellHeight=_700.height;this.mapWidth=_701.width;this.mapHeight=_701.height;this.srInfo=_702;},setResolution:function(_703){this._resolution=(_703.xmax-_703.xmin)/this.mapWidth;if(this.srInfo){var _704=Math.round((2*this.srInfo.valid[1])/this._resolution),_705=Math.round(_704/this.cellWidth);this._frameStats=[_705,0,_705-1];}},getCellCoordinates:function(_706){var res=this._resolution,_707=this.origin;return {row:Math.floor((_707.y-_706.y)/(this.cellHeight*res)),col:Math.floor((_706.x-_707.x)/(this.cellWidth*res))};},normalize:function(col){var _708=this._frameStats;if(_708){var _709=_708[0],m180=_708[1],p180=_708[2];if(col<m180){col=col%_709;col=col<m180?col+_709:col;}else{if(col>p180){col=col%_709;}}}return col;},intersects:function(_70a,_70b){var _70c=this.srInfo;if(_70c){return _6f9.some(_70b._getParts(_70c),function(_70d){return _70a.intersects(_70d.extent);});}else{return _70a.intersects(_70b);}},getCellExtent:function(row,col){var res=this._resolution,_70e=this.origin,_70f=this.cellWidth,_710=this.cellHeight;return new _6fc((col*_70f*res)+_70e.x,_70e.y-((row+1)*_710*res),((col+1)*_70f*res)+_70e.x,_70e.y-(row*_710*res),new _6fb(_70e.spatialReference.toJson()));},getLatticeID:function(_711){var _712=this.getCellCoordinates({x:_711.xmin,y:_711.ymax}),_713=this.getCellCoordinates({x:_711.xmax,y:_711.ymin}),_714=_712.row,_715=_713.row,_716=this.normalize(_712.col),_717=this.normalize(_713.col);return _714+"_"+_715+"_"+_716+"_"+_717;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_718,_719){var _71a=this.getCellCoordinates({x:_718.xmin,y:_718.ymax}),_71b=this.getCellCoordinates({x:_718.xmax,y:_718.ymin}),_71c=_71a.row,_71d=_71b.row,_71e=_71a.col,_71f=_71b.col,_720=[],i,j,nj,_721=[],_722=[],len,xmin,xmax,ymin,ymax,_723=[],_724,_725;for(i=_71c;i<=_71d;i++){for(j=_71e;j<=_71f;j++){nj=this.normalize(j);_718=this.getCellExtent(i,nj);_720.push({row:i,col:nj,extent:_718,resolution:this._resolution});if(_719){_721.push(_718.xmin,_718.xmax);_722.push(_718.ymin,_718.ymax);}}}_71e=this.normalize(_71e);_71f=this.normalize(_71f);_721.sort(this.sorter);_722.sort(this.sorter);len=_721.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_721[i]===_721[i+1]){_721.splice(i,1);}}}len=_722.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_722[i]===_722[i+1]){_722.splice(i,1);}}}if(_721.length&&_722.length){xmin=_721[0];xmax=_721[_721.length-1];ymin=_722[0];ymax=_722[_722.length-1];len=_721.length;for(i=0;i<len;i++){_723.push([[_721[i],ymax],[_721[i],ymin]]);}len=_722.length;for(i=0;i<len;i++){_723.push([[xmin,_722[i]],[xmax,_722[i]]]);}_724=new _6fd({paths:_723,spatialReference:this.origin.spatialReference.toJson()});_725=_71c+"_"+_71d+"_"+_71e+"_"+_71f;_720.push({latticeID:_725,lattice:_724,resolution:this._resolution});}return {minRow:_71c,maxRow:_71d,minCol:_71e,maxCol:_71f,cells:_720};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_6fe,_6fa);}return _6fe;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(_726,dom,lang,_727,win,_728,_729){var _72a={_curFocus:null,_prevFocus:null,isCollapsed:function(){return _729.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=_728.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_72b){var _72c=win.doc,mark=_72b.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_72c.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_72c.body.createControlRange();_726.forEach(mark,function(n){rg.addElement(n);});}else{rg=_72c.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_72d){var node=!_728.curNode||(menu&&dom.isDescendant(_728.curNode,menu.domNode))?_729._prevFocus:_728.curNode;return {node:node,bookmark:node&&(node==_728.curNode)&&win.withGlobal(_72d||win.global,_729.getBookmark),openedForWindow:_72d};},_activeStack:[],registerIframe:function(_72e){return _728.registerIframe(_72e);},unregisterIframe:function(_72f){_72f&&_72f.remove();},registerWin:function(_730,_731){return _728.registerWin(_730,_731);},unregisterWin:function(_732){_732&&_732.remove();}};_728.focus=function(_733){if(!_733){return;}var node="node" in _733?_733.node:_733,_734=_733.bookmark,_735=_733.openedForWindow,_736=_734?_734.isCollapsed:false;if(node){var _737=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_737&&_737.focus){try{_737.focus();}catch(e){}}_728._onFocusNode(node);}if(_734&&win.withGlobal(_735||win.global,_729.isCollapsed)&&!_736){if(_735){_735.focus();}try{win.withGlobal(_735||win.global,_729.moveToBookmark,null,[_734]);}catch(e2){}}};_728.watch("curNode",function(name,_738,_739){_729._curFocus=_739;_729._prevFocus=_738;if(_739){_727.publish("focusNode",_739);}});_728.watch("activeStack",function(name,_73a,_73b){_729._activeStack=_73b;});_728.on("widget-blur",function(_73c,by){_727.publish("widgetBlur",_73c,by);});_728.on("widget-focus",function(_73d,by){_727.publish("widgetFocus",_73d,by);});lang.mixin(_729,_72a);return _729;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_73e,_73f,_740,_741,win,_742,_743){function _744(node,_745,_746,_747){var view=_742.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_73e.some(_745,function(_748){var _749=_748.corner;var pos=_748.pos;var _74a=0;var _74b={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_749.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_749.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_746){var res=_746(node,_748.aroundCorner,_749,_74b,_747);_74a=typeof res=="undefined"?0:res;}var _74c=node.style;var _74d=_74c.display;var _74e=_74c.visibility;if(_74c.display=="none"){_74c.visibility="hidden";_74c.display="";}var bb=_73f.position(node);_74c.display=_74d;_74c.visibility=_74e;var _74f={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_749.charAt(1)],_750={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_749.charAt(0)],_751=Math.max(view.l,_74f),_752=Math.max(view.t,_750),endX=Math.min(view.l+view.w,_74f+bb.w),endY=Math.min(view.t+view.h,_750+bb.h),_753=endX-_751,_754=endY-_752;_74a+=(bb.w-_753)+(bb.h-_754);if(best==null||_74a<best.overflow){best={corner:_749,aroundCorner:_748.aroundCorner,x:_751,y:_752,w:_753,h:_754,overflow:_74a,spaceAvailable:_74b};}return !_74a;});if(best.overflow&&_746){_746(node,best.aroundCorner,best.corner,best.spaceAvailable,_747);}var l=_73f.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _755={at:function(node,pos,_756,_757){var _758=_73e.map(_756,function(_759){var c={corner:_759,pos:{x:pos.x,y:pos.y}};if(_757){c.pos.x+=_759.charAt(1)=="L"?_757.x:-_757.x;c.pos.y+=_759.charAt(0)=="T"?_757.y:-_757.y;}return c;});return _744(node,_758);},around:function(node,_75a,_75b,_75c,_75d){var _75e=(typeof _75a=="string"||"offsetWidth" in _75a)?_73f.position(_75a,true):_75a;if(_75a.parentNode){var _75f=_740.getComputedStyle(_75a).position=="absolute";var _760=_75a.parentNode;while(_760&&_760.nodeType==1&&_760.nodeName!="BODY"){var _761=_73f.position(_760,true),pcs=_740.getComputedStyle(_760);if(/relative|absolute/.test(pcs.position)){_75f=false;}if(!_75f&&/hidden|auto|scroll/.test(pcs.overflow)){var _762=Math.min(_75e.y+_75e.h,_761.y+_761.h);var _763=Math.min(_75e.x+_75e.w,_761.x+_761.w);_75e.x=Math.max(_75e.x,_761.x);_75e.y=Math.max(_75e.y,_761.y);_75e.h=_762-_75e.y;_75e.w=_763-_75e.x;}if(pcs.position=="absolute"){_75f=true;}_760=_760.parentNode;}}var x=_75e.x,y=_75e.y,_764="w" in _75e?_75e.w:(_75e.w=_75e.width),_765="h" in _75e?_75e.h:(_741.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_75e.height+", width:"+_764+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_75e.height+", w:"+_764+" }","","2.0"),_75e.h=_75e.height);var _766=[];function push(_767,_768){_766.push({aroundCorner:_767,corner:_768,pos:{x:{"L":x,"R":x+_764,"M":x+(_764>>1)}[_767.charAt(1)],y:{"T":y,"B":y+_765,"M":y+(_765>>1)}[_767.charAt(0)]}});};_73e.forEach(_75b,function(pos){var ltr=_75c;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _769=_744(node,_766,_75d,{w:_764,h:_765});_769.aroundNodePos=_75e;return _769;}};return _743.place=_755;});},"esri/tasks/Task":function(){define("esri/tasks/Task",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils","esri/Evented"],function(_76a,lang,_76b,has,_76c,_76d,_76e,_76f){var Task=_76a(_76f,{declaredClass:"esri.tasks._Task",constructor:function(url){if(url&&lang.isString(url)){this._url=_76e.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);this.registerConnectEvents("esri.tasks._Task",{"error":["error"]});},_useSSL:function(){var _770=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_770&&_770.path){_770.path=_770.path.replace(re,rep);}},_encode:function(_771,_772,_773){var _774,type,_775={},i,p,pl;for(i in _771){if(i==="declaredClass"){continue;}_774=_771[i];type=typeof _774;if(_774!==null&&_774!==undefined&&type!=="function"){if(lang.isArray(_774)){_775[i]=[];pl=_774.length;for(p=0;p<pl;p++){_775[i][p]=this._encode(_774[p]);}}else{if(type==="object"){if(_774.toJson){var json=_774.toJson(_773&&_773[i]);if(_774.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_775[i]=_772?json:_76b.toJson(json);}}else{_775[i]=_774;}}}}return _775;},_successHandler:function(args,_776,_777,dfd){if(_776){this[_776].apply(this,args);}if(_777){_777.apply(null,args);}if(dfd){_76d._resDfd(dfd,args);}},_errorHandler:function(err,_778,dfd){this.onError(err);if(_778){_778(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_779){this.normalization=_779;},onError:function(){}});if(has("extend-esri")){_76c.Task=Task;}return Task;});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_77a,lang,_77b,_77c){var _77d=_77a("dijit.form.NumberTextBoxMixin",null,{pattern:_77b.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_77b.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_77e){var _77f=typeof _77e.places=="number"?_77e.places:0;if(_77f){_77f++;}if(typeof _77e.max!="number"){_77e.max=9*Math.pow(10,15-_77f);}if(typeof _77e.min!="number"){_77e.min=-9*Math.pow(10,15-_77f);}this.inherited(arguments,[_77e]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _780=this.format(val,this.constraints);if(_780!==undefined){this.textbox.value=_780;}}this.inherited(arguments);},format:function(_781,_782){var _783=String(_781);if(typeof _781!="number"){return _783;}if(isNaN(_781)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_781,_782))&&_782.exponent!==false&&/\de[-+]?\d/i.test(_783)){return _783;}if(this.editOptions&&this.focused){_782=lang.mixin({},_782,this.editOptions);}return this._formatter(_781,_782);},_parser:_77b.parse,parse:function(_784,_785){var v=this._parser(_784,lang.mixin({},_785,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_784,_785);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_786){return (_786==null||_786==="")?NaN:this.inherited(arguments);},serialize:function(_787,_788){return (typeof _787!="number"||isNaN(_787))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_789,_78a,_78b){if(_789!==undefined&&_78b===undefined){_78b=String(_789);if(typeof _789=="number"){if(isNaN(_789)){_78b="";}else{if(("rangeCheck" in this&&this.rangeCheck(_789,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_78b)){_78b=undefined;}}}else{if(!_789){_78b="";_789=NaN;}else{_789=undefined;}}}this.inherited(arguments,[_789,_78a,_78b]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_77b._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_78c){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _78d=_77a("dijit.form.NumberTextBox",[_77c,_77d],{baseClass:"dijitTextBox dijitNumberTextBox"});_78d.Mixin=_77d;return _78d;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_78e,lang,_78f,has,_790,_791,_792,_793,_794,_795,_796){var _797=_78e(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _798=this.features,sr=json.spatialReference,_799=_795.getGeometryType(json.geometryType);sr=(this.spatialReference=new _793(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_78f.forEach(_798,function(_79a,i){var _79b=_79a.geometry&&_79a.geometry.spatialReference;_798[i]=new _792((_799&&_79a.geometry)?new _799(_79a.geometry):null,_79a.symbol&&_796.fromJson(_79a.symbol),_79a.attributes);if(_798[i].geometry&&!_79b){_798[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_79c){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_795.getJsonType(this.features[0].geometry);}json.features=_794._encodeGraphics(this.features,_79c);}json.exceededTransferLimit=this.exceededTransferLimit;return _791.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_797,_790);}return _797;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_79d,_79e,_79f,_7a0,has,_7a1,lang,_7a2,_7a3,_7a4,_7a5,_7a6,_7a7){function _7a8(){};function _7a9(_7aa){return function(obj,_7ab,_7ac,_7ad){if(obj&&typeof _7ab=="string"&&obj[_7ab]==_7a8){return obj.on(_7ab.substring(2).toLowerCase(),lang.hitch(_7ac,_7ad));}return _7aa.apply(_79f,arguments);};};_79d.around(_79f,"connect",_7a9);if(_7a1.connect){_79d.around(_7a1,"connect",_7a9);}var _7ae=_7a0("dijit._Widget",[_7a5,_7a6,_7a7],{onClick:_7a8,onDblClick:_7a8,onKeyDown:_7a8,onKeyPress:_7a8,onKeyUp:_7a8,onMouseDown:_7a8,onMouseMove:_7a8,onMouseOut:_7a8,onMouseOver:_7a8,onMouseLeave:_7a8,onMouseEnter:_7a8,onMouseUp:_7a8,constructor:function(_7af){this._toConnect={};for(var name in _7af){if(this[name]===_7a8){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_7af[name];delete _7af[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_7a8){return _79f.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_7b0){_7a1.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_7b0);},attr:function(name,_7b1){if(_79e.isDebug){var _7b2=arguments.callee._ach||(arguments.callee._ach={}),_7b3=(arguments.callee.caller||"unknown caller").toString();if(!_7b2[_7b3]){_7a1.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_7b3,"","2.0");_7b2[_7b3]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_7a1.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_7a2("[widgetId]",this.containerNode).map(_7a4.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){_7a3(0,function(){var _7b4=["dijit/_base"];require(_7b4);});}return _7ae;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_7b5,keys,_7b6,has,_7b7,win,_7b8){var ret=_7b6("dijit._OnDijitClickMixin",null,{connect:function(obj,_7b9,_7ba){return this.inherited(arguments,[obj,_7b9=="ondijitclick"?_7b8:_7b9,_7ba]);}});ret.a11yclick=_7b8;return ret;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_7bb,_7bc,_7bd,lang){lang.extend(_7bc,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _7bd("dijit._FocusMixin",null,{_focusManager:_7bb});});},"dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_7be,dd){var _7bf=_7be("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _7c0;if(date>0){for(_7c0=this.getDaysInIslamicMonth(this._month,this._year);date>_7c0;date-=_7c0,_7c0=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_7c0=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_7c0=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_7c0;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_7c1){this._year+=Math.floor(_7c1/12);if(_7c1>0){this._month=Math.floor(_7c1%12);}else{this._month=Math.floor(((_7c1%12)+12)%12);}},setHours:function(){var _7c2=arguments.length;var _7c3=0;if(_7c2>=1){_7c3=parseInt(arguments[0]);}if(_7c2>=2){this._minutes=parseInt(arguments[1]);}if(_7c2>=3){this._seconds=parseInt(arguments[2]);}if(_7c2==4){this._milliseconds=parseInt(arguments[3]);}while(_7c3>=24){this._date++;var _7c4=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_7c4){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_7c4;}_7c3-=24;}this._hours=_7c3;},_addMinutes:function(_7c5){_7c5+=this._minutes;this.setMinutes(_7c5);this.setHours(this._hours+parseInt(_7c5/60));return this;},_addSeconds:function(_7c6){_7c6+=this._seconds;this.setSeconds(_7c6);this._addMinutes(parseInt(_7c6/60));return this;},_addMilliseconds:function(_7c7){_7c7+=this._milliseconds;this.setMilliseconds(_7c7);this._addSeconds(parseInt(_7c7/1000));return this;},setMinutes:function(_7c8){this._minutes=_7c8%60;return this;},setSeconds:function(_7c9){this._seconds=_7c9%60;return this;},setMilliseconds:function(_7ca){this._milliseconds=_7ca%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _7cb=this._year;var _7cc=this._month;var _7cd=this._date;var _7ce=_7cd+Math.ceil(29.5*_7cc)+(_7cb-1)*354+Math.floor((3+(11*_7cb))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_7ce-0.5)+0.5,_7cf=wjd-this._GREGORIAN_EPOCH,_7d0=Math.floor(_7cf/146097),dqc=this._mod(_7cf,146097),cent=Math.floor(dqc/36524),_7d1=this._mod(dqc,36524),quad=Math.floor(_7d1/1461),_7d2=this._mod(_7d1,1461),_7d3=Math.floor(_7d2/365),year=(_7d0*400)+(cent*100)+(quad*4)+_7d3;if(!(cent==4||_7d3==4)){year++;}var _7d4=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _7d5=wjd-_7d4;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _7d6=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _7d7=Math.floor((((_7d5+_7d6)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_7d7)-362)/12)+((_7d7<=2)?0:(dd.isLeapYear(new Date(year,_7d7,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _7d8=new Date(year,(_7d7-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _7d8;},fromGregorian:function(_7d9){var date=new Date(_7d9);var _7da=date.getFullYear(),_7db=date.getMonth(),gDay=date.getDate();var _7dc=(this._GREGORIAN_EPOCH-1)+(365*(_7da-1))+Math.floor((_7da-1)/4)+(-Math.floor((_7da-1)/100))+Math.floor((_7da-1)/400)+Math.floor((((367*(_7db+1))-362)/12)+(((_7db+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_7dc=Math.floor(_7dc)+0.5;var days=_7dc-this._ISLAMIC_EPOCH;var _7dd=Math.floor((30*days+10646)/10631);var _7de=Math.ceil((days-29-this._yearStart(_7dd))/29.5);_7de=Math.min(_7de,11);var hDay=Math.ceil(days-this._monthStart(_7dd,_7de))+1;this._date=hDay;this._month=_7de;this._year=_7dd;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_7df){return Math.ceil(29.5*_7df)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_7e0,year){var _7e1=0;_7e1=29+((_7e0+1)%2);if(_7e0==11&&this._civilLeapYear(year)){_7e1++;}return _7e1;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_7bf.getDaysInIslamicMonth=function(_7e2){return new _7bf().getDaysInIslamicMonth(_7e2.getMonth(),_7e2.getFullYear());};return _7bf;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_7e3,_7e4,_7e5,_7e6,_7e7,lang,_7e8){lang.extend(_7e3,{waiRole:"",waiState:""});return _7e7("dijit._Templated",[_7e4,_7e5],{widgetsInTemplate:false,constructor:function(){_7e8.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_7e9,_7ea){this.inherited(arguments);var _7eb=lang.isArray(_7e9)?_7e9:(_7e9.all||_7e9.getElementsByTagName("*"));var x=lang.isArray(_7e9)?0:-1;for(;x<_7eb.length;x++){var _7ec=(x==-1)?_7e9:_7eb[x];var role=_7ea(_7ec,"waiRole");if(role){_7ec.setAttribute("role",role);}var _7ed=_7ea(_7ec,"waiState");if(_7ed){_7e6.forEach(_7ed.split(/\s*,\s*/),function(_7ee){if(_7ee.indexOf("-")!=-1){var pair=_7ee.split("-");_7ec.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_7ef,_7f0){return _7ef("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _7f1=this.checked;this._set("checked",!_7f1);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_7f1);return ret;},_setCheckedAttr:function(_7f2,_7f3){this._set("checked",_7f2);var node=this.focusNode||this.domNode;_7f0.set(node,"checked",!!_7f2);if(_7f2){node.setAttribute("checked","");}else{node.removeAttribute("checked");}node.setAttribute(this._aria_attr,String(_7f2));this._handleOnChange(_7f2,_7f3);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_7f4,_7f5,dom,_7f6,_7f7,_7f8,lang,on,_7f9,has,_7fa,_7fb,win,_7fc,a11y,_7fd,_7fe){var _7ff=_7f5([_7fa,_7f8],{curNode:null,activeStack:[],constructor:function(){var _800=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_7f4.before(_7f7,"empty",_800);_7f4.before(_7f7,"destroy",_800);},registerIframe:function(_801){return this.registerWin(_801.contentWindow,_801);},registerWin:function(_802,_803){var _804=this;var _805=function(evt){_804._justMouseDowned=true;setTimeout(function(){_804._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_804._onTouchNode(_803||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_802.document.documentElement:_802.document;if(doc){if(has("ie")){_802.document.body.attachEvent("onmousedown",_805);var _806=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_804._onFocusNode(_803||evt.srcElement);}else{_804._onTouchNode(_803||evt.srcElement);}};doc.attachEvent("onfocusin",_806);var _807=function(evt){_804._onBlurNode(_803||evt.srcElement);};doc.attachEvent("onfocusout",_807);return {remove:function(){_802.document.detachEvent("onmousedown",_805);doc.detachEvent("onfocusin",_806);doc.detachEvent("onfocusout",_807);doc=null;}};}else{doc.body.addEventListener("mousedown",_805,true);doc.body.addEventListener("touchstart",_805,true);var _808=function(evt){_804._onFocusNode(_803||evt.target);};doc.addEventListener("focus",_808,true);var _809=function(evt){_804._onBlurNode(_803||evt.target);};doc.addEventListener("blur",_809,true);return {remove:function(){doc.body.removeEventListener("mousedown",_805,true);doc.body.removeEventListener("touchstart",_805,true);doc.removeEventListener("focus",_808,true);doc.removeEventListener("blur",_809,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _80a=[];try{while(node){var _80b=_7f6.get(node,"dijitPopupParent");if(_80b){node=_7fd.byId(_80b).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_7fc.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_80c=id&&_7fd.byId(id);if(_80c&&!(by=="mouse"&&_80c.get("disabled"))){_80a.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_80a,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_80d,by){var _80e=this.activeStack;this.set("activeStack",_80d);for(var _80f=0;_80f<Math.min(_80e.length,_80d.length);_80f++){if(_80e[_80f]!=_80d[_80f]){break;}}var _810;for(var i=_80e.length-1;i>=_80f;i--){_810=_7fd.byId(_80e[i]);if(_810){_810._hasBeenBlurred=true;_810.set("focused",false);if(_810._focusManager==this){_810._onBlur(by);}this.emit("widget-blur",_810,by);}}for(i=_80f;i<_80d.length;i++){_810=_7fd.byId(_80d[i]);if(_810){_810.set("focused",true);if(_810._focusManager==this){_810._onFocus(by);}this.emit("widget-focus",_810,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _811=new _7ff();_7f9(function(){var _812=_811.registerWin(_7fc.get(win.doc));if(has("ie")){_7fb.addOnWindowUnload(function(){if(_812){_812.remove();_812=null;}});}});_7fe.focus=function(node){_811.focus(node);};for(var attr in _811){if(!/^_/.test(attr)){_7fe.focus[attr]=typeof _811[attr]=="function"?lang.hitch(_811,attr):_811[attr];}}_811.watch(function(attr,_813,_814){_7fe.focus[attr]=_814;});return _811;});},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_815,has,_816){var util={};util={findFeatures:function(ids,_817,_818){var _819=_817.objectIdField;var _81a=_817.graphics;var _81b=_815.filter(_81a,function(_81c){return _815.some(ids,function(id){return _81c.attributes[_819]===id.objectId;});});if(_818){_818(_81b);}else{return _81b;}},getSelection:function(_81d){var _81e=[];_815.forEach(_81d,function(_81f){var _820=_81f.getSelectedFeatures();_815.forEach(_820,function(_821){_81e.push(_821);});});return _81e;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_816);}return util;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_822,on,_823){return _822("dijit.form._ListBase",null,{selected:null,_listConnect:function(_824,_825){var self=this;return self.own(on(self.containerNode,on.selector(function(_826,_827,_828){return _826.parentNode==_828;},_824),function(evt){evt.preventDefault();self[_825](evt,this);}));},selectFirstNode:function(){var _829=this.containerNode.firstChild;while(_829&&_829.style.display=="none"){_829=_829.nextSibling;}this._setSelectedAttr(_829);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _82a=this.selected;if(!_82a){this.selectFirstNode();}else{var next=_82a.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _82b=this.selected;if(!_82b){this.selectLastNode();}else{var prev=_82b.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _82c=this.selected;if(_82c){this.onDeselect(_82c);this.selected=null;}if(node){this.selected=node;_823.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_82d,_82e,_82f){var base=null;return _82d("dojo.store.Memory",base,{constructor:function(_830){for(var i in _830){this[i]=_830[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_82f,get:function(id){return this.data[this.index[id]];},getIdentity:function(_831){return _831[this.idProperty];},put:function(_832,_833){var data=this.data,_834=this.index,_835=this.idProperty;var id=_832[_835]=(_833&&"id" in _833)?_833.id:_835 in _832?_832[_835]:Math.random();if(id in _834){if(_833&&_833.overwrite===false){throw new Error("Object already exists");}data[_834[id]]=_832;}else{_834[id]=data.push(_832)-1;}return id;},add:function(_836,_837){(_837=_837||{}).overwrite=false;return this.put(_836,_837);},remove:function(id){var _838=this.index;var data=this.data;if(id in _838){data.splice(_838[id],1);this.setData(data);return true;}},query:function(_839,_83a){return _82e(this.queryEngine(_839,_83a)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_83b,_83c,_83d,keys,lang,has,_83e,_83f,_840,_841,_842,_843){var _844=_83c("dijit._editor.plugins.LinkDialog",_841,{buttonClass:_842,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_845){_83b(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_846,_847){var _848=this;this.tag=this.command=="insertImage"?"img":"a";var _849=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _84a=(this.dropDown=this.button.dropDown=new _846({title:_849[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_848._onOpenDialog();_846.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_848,"_onCloseDialog"),0);}}));_849.urlRegExp=this.urlRegExp;_849.id=_847.getUniqueId(this.editor.id);this._uniqueId=_849.id;this._setContent(_84a.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_83f.substitute(this.linkDialogTemplate,_849));_84a.startup();this._urlInput=_847.byId(this._uniqueId+"_urlInput");this._textInput=_847.byId(this._uniqueId+"_textInput");this._setButton=_847.byId(this._uniqueId+"_setButton");this.connect(_847.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _84b=this._urlInput.get("value");return this._urlRegExp.test(_84b)||this._emailRegExp.test(_84b);});this.connect(_84a.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_84a.onExecute();_84a.execute(_84a.get("value"));}}});_845();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _84c=function(url){var _84d=false;var _84e=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_84d=true;}}}}else{if(self._userAtRxp.test(url)){_84e=true;}}}}if(_84d){self._urlInput.set("value","http://"+url);}if(_84e){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_84c(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_84f){this.dropDown.set({parserScope:"dojo",content:_84f});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_843.getSelection(this.editor.window);var _850=sel.getRangeAt(0);var a=_850.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_83f.substitute(this.htmlTemplate,args));_83e("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_83d.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_851;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_851=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_851||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_843.getSelection(this.editor.window);if(sel.rangeCount){var _852=sel.getRangeAt(0);a=_852.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_852.startContainer===_852.endContainer){fc=_852.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_83d.get(t,"href")){var _853=this.editor;this.editor._sCall("selectElement",[t]);_853.onDisplayChanged();if(_853._updateTimer){_853._updateTimer.remove();delete _853._updateTimer;}_853.onNormalizedDisplayChanged();var _854=this.button;setTimeout(function(){_854.set("disabled",false);_854.loadAndOpenDropDown().then(function(){if(_854.dropDown.focus){_854.dropDown.focus();}});},10);}}}});var _855=_83c("dijit._editor.plugins.ImgLinkDialog",[_844],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_83d.get(t,"src")){var _856=this.editor;this.editor._sCall("selectElement",[t]);_856.onDisplayChanged();if(_856._updateTimer){_856._updateTimer.remove();delete _856._updateTimer;}_856.onNormalizedDisplayChanged();var _857=this.button;setTimeout(function(){_857.set("disabled",false);_857.loadAndOpenDropDown().then(function(){if(_857.dropDown.focus){_857.dropDown.focus();}});},10);}}}});_841.registry["createLink"]=function(){return new _844({command:"createLink"});};_841.registry["insertImage"]=function(){return new _855({command:"insertImage"});};_844.ImgLinkDialog=_855;return _844;});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_858){var _859={};lang.setObject("dojo.date.stamp",_859);_859.fromISOString=function(_85a,_85b){if(!_859._isoRegExp){_859._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _85c=_859._isoRegExp.exec(_85a),_85d=null;if(_85c){_85c.shift();if(_85c[1]){_85c[1]--;}if(_85c[6]){_85c[6]*=1000;}if(_85b){_85b=new Date(_85b);_858.forEach(_858.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _85b["get"+prop]();}),function(_85e,_85f){_85c[_85f]=_85c[_85f]||_85e;});}_85d=new Date(_85c[0]||1970,_85c[1]||0,_85c[2]||1,_85c[3]||0,_85c[4]||0,_85c[5]||0,_85c[6]||0);if(_85c[0]<100){_85d.setFullYear(_85c[0]||1970);}var _860=0,_861=_85c[7]&&_85c[7].charAt(0);if(_861!="Z"){_860=((_85c[8]||0)*60)+(Number(_85c[9])||0);if(_861!="-"){_860*=-1;}}if(_861){_860-=_85d.getTimezoneOffset();}if(_860){_85d.setTime(_85d.getTime()+_860*60000);}}return _85d;};_859.toISOString=function(_862,_863){var _864=function(n){return (n<10)?"0"+n:n;};_863=_863||{};var _865=[],_866=_863.zulu?"getUTC":"get",date="";if(_863.selector!="time"){var year=_862[_866+"FullYear"]();date=["0000".substr((year+"").length)+year,_864(_862[_866+"Month"]()+1),_864(_862[_866+"Date"]())].join("-");}_865.push(date);if(_863.selector!="date"){var time=[_864(_862[_866+"Hours"]()),_864(_862[_866+"Minutes"]()),_864(_862[_866+"Seconds"]())].join(":");var _867=_862[_866+"Milliseconds"]();if(_863.milliseconds){time+="."+(_867<100?"0":"")+_864(_867);}if(_863.zulu){time+="Z";}else{if(_863.selector!="time"){var _868=_862.getTimezoneOffset();var _869=Math.abs(_868);time+=(_868>0?"-":"+")+_864(Math.floor(_869/60))+":"+_864(_869%60);}}_865.push(time);}return _865.join("T");};return _859;});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_86a,_86b,_86c){return _86a("dijit.form.MappedTextBox",_86c,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_86b.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_86d,dom,lang,_86e,_86f,_870){function _871(_872){return {id:_872.value,value:_872.value,name:lang.trim(_872.innerText||_872.textContent||"")};};return _86d("dijit.form.DataList",_86f,{constructor:function(_873,_874){this.domNode=dom.byId(_874);lang.mixin(this,_873);if(this.id){_870.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_86e("option",this.domNode).map(_871)}]);},destroy:function(){_870.remove(this.id);},fetchSelectedItem:function(){var _875=_86e("> option[selected]",this.domNode)[0]||_86e("> option",this.domNode)[0];return _875&&_871(_875);}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_876,_877,keys,lang,has,_878,_879,_87a,_87b,_87c){return _876("dijit.form._Spinner",_87a,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_87b,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_87d,_87e,_87f){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_87e*_87f),false);_87c.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_880,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_880==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_877.stop(evt);var _881=evt.wheelDelta/120;if(Math.floor(_881)!=_881){_881=evt.wheelDelta>0?1:-1;}var _882=evt.detail?(evt.detail*-1):_881;if(_882!==0){var node=this[(_882>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_882,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_883){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_884,_885){this.focusNode.setAttribute("aria-valuenow",_884);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_878.wheel,"_mouseWheeled");this.own(_879.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_879.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_879.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_879.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_886,lang,has,_887,_888,_889,_88a){var _88b=_886([_88a],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_88c){this.featureLayer=_88c;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_88d){var _88e=this.featureLayer,_88f=_88e.objectIdField,oid=_88d.attributes[_88f];this._addFeatureIIf(oid,_88d);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _890=this.featureLayer;if(_890._collection){_890._fireUpdateStart();_890._refresh(true);_890._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_891){var id="_"+_891.name+_891.layerId+_891._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _892=this.featureLayer;if(_892._collection){return;}_892._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_893=this.featureLayer,_894=_893.getDefinitionExpression();var _895=new _889();_895.outFields=_893.getOutFields();_895.where=_894||"1=1";_895.returnGeometry=true;_895.outSpatialReference=new _888(map.spatialReference.toJson());_895.timeExtent=_893.getTimeDefinition();_895.maxAllowableOffset=_893._maxOffset;if(_893._ts){_895._ts=(new Date()).getTime();}var _896;if(_893._usePatch){_896=this._getRequestId(_893);this._cancelPendingRequest(null,_896);}_893._task.execute(_895,this._drawFeatures,this._queryErrorHandler,_896);},_drawFeatures:function(_897){this._purgeRequests();var _898=_897.features,_899=this.featureLayer,_89a=_899.objectIdField,i,len=_898.length,_89b,oid;for(i=0;i<len;i++){_89b=_898[i];oid=_89b.attributes[_89a];this._addFeatureIIf(oid,_89b);this._incRefCount(oid);}this._applyTimeFilter(true);_899._fireUpdateEnd(null,_897.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_897.exceededTransferLimit){_899.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _89c=this.featureLayer;_89c._errorHandler(err);_89c._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_88b,_887);}return _88b;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_89d,dom,_89e,_89f){return _89d("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_89e.stop(e);return false;}var _8a0=this.onClick(e)===false;if(!_8a0&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _8a1=_89f.byNode(node);if(_8a1&&typeof _8a1._onSubmit=="function"){_8a1._onSubmit(e);_8a0=true;break;}}}if(_8a0){e.preventDefault();}return !_8a0;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_8a2){this._set("label",_8a2);(this.containerNode||this.focusNode).innerHTML=_8a2;}});});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_8a3,has,_8a4,_8a5,_8a6,_8a7,_8a8,_8a9){if(has("dijit-legacy-requires")){_8a5(0,function(){var _8aa=["dijit/form/_FormValueWidget"];require(_8aa);});}return _8a3("dijit.form._FormWidget",[_8a6,_8a8,_8a7,_8a9],{setDisabled:function(_8ab){_8a4.deprecated("setDisabled("+_8ab+") is deprecated. Use set('disabled',"+_8ab+") instead.","","2.0");this.set("disabled",_8ab);},setValue:function(_8ac){_8a4.deprecated("dijit.form._FormWidget:setValue("+_8ac+") is deprecated.  Use set('value',"+_8ac+") instead.","","2.0");this.set("value",_8ac);},getValue:function(){_8a4.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_8ad,_8ae,keys,_8af,_8b0){return _8ad("dijit.form.NumberSpinner",[_8af,_8b0.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_8b1){var tc=this.constraints,v=isNaN(val),_8b2=!isNaN(tc.max),_8b3=!isNaN(tc.min);if(v&&_8b1!=0){val=(_8b1>0)?_8b3?tc.min:_8b2?tc.max:0:_8b2?this.constraints.max:_8b3?tc.min:0;}var _8b4=val+_8b1;if(v||isNaN(_8b4)){return val;}if(_8b2&&(_8b4>tc.max)){_8b4=tc.max;}if(_8b3&&(_8b4<tc.min)){_8b4=tc.min;}return _8b4;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _8b5=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _8b5=="number"){this._setValueAttr(_8b5,false);}_8ae.stop(e);}}});});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_8b6,_8b7,lang,when,_8b8,_8b9){return _8b7("dijit.form.FilteringSelect",[_8b8,_8b9],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_8ba,_8bb,_8bc,_8bd){if((_8bb&&_8bb[this.searchAttr]!==this._lastQuery)||(!_8bb&&_8ba.length&&this.store.getIdentity(_8ba[0])!=this._lastQuery)){return;}if(!_8ba.length){this.set("value","",_8bd||(_8bd===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_8ba[0],_8bd);}},_openResultList:function(_8be,_8bf,_8c0){if(_8bf[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_8c1,_8c2,_8c3,item){if(!this._onChangeActive){_8c2=null;}if(item===undefined){if(_8c1===null||_8c1===""){_8c1="";if(!lang.isString(_8c3)){this._setDisplayedValueAttr(_8c3||"",_8c2);return;}}var self=this;this._lastQuery=_8c1;when(this.store.get(_8c1),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_8c2);});}else{this.valueNode.value=_8c1;this.inherited(arguments);}},_setItemAttr:function(item,_8c4,_8c5){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_8c6,_8c7){if(_8c6==null){_8c6="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_8c7=false;}if(this.store){this.closeDropDown();var _8c8=lang.clone(this.query);var qs=this._getDisplayQueryString(_8c6),q;if(this.store._oldAPI){q=qs;}else{q=_8b6.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_8c8[this.searchAttr]=q;this.textbox.value=_8c6;this._lastDisplayedValue=_8c6;this._set("displayedValue",_8c6);var _8c9=this;var _8ca={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_8ca,this.fetchProperties);this._fetchHandle=this.store.query(_8c8,_8ca);when(this._fetchHandle,function(_8cb){_8c9._fetchHandle=null;_8c9._callbackSetLabel(_8cb||[],_8c8,_8ca,_8c7);},function(err){_8c9._fetchHandle=null;if(!_8c9._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_8cc,_8cd,has,_8ce){return _8cc("dijit.form.SimpleTextarea",_8ce,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_8cd.add(this.textbox,"dijitTextAreaCols");}},filter:function(_8cf){if(_8cf){_8cf=_8cf.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _8d0=parseInt(this.maxLength);var _8d1=this.textbox.value.replace(/\r/g,"");var _8d2=_8d1.length-_8d0;if(_8d2>0){var _8d3=this.textbox;if(_8d3.selectionStart){var pos=_8d3.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_8d1.substring(0,pos-_8d2-cr)+_8d1.substring(pos-cr);_8d3.setSelectionRange(pos-_8d2,pos-_8d2);}else{if(this.ownerDocument.selection){_8d3.focus();var _8d4=this.ownerDocument.selection.createRange();_8d4.moveStart("character",-_8d2);_8d4.text="";_8d4.select();}}}}this.inherited(arguments);}});});},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_8d5){var _8d6={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_8d6,_8d5);}return _8d6;});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_8d7,_8d8,_8d9,lang,_8da,_8db){var _8dc=_8d9("dijit._editor.plugins.TextColor",_8da,{buttonClass:_8db,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_8dd){_8d7(["../../ColorPalette"],lang.hitch(this,function(_8de){this.dropDown=new _8de({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_8df){self.editor.execCommand(self.command,_8df);}});_8dd();}));};},updateState:function(){var _8e0=this.editor;var _8e1=this.command;if(!_8e0||!_8e0.isLoaded||!_8e1.length){return;}if(this.button){var _8e2=this.get("disabled");this.button.set("disabled",_8e2);if(_8e2){return;}var _8e3;try{_8e3=_8e0.queryCommandValue(_8e1)||"";}catch(e){_8e3="";}}if(_8e3==""){_8e3="#000000";}if(_8e3=="transparent"){_8e3="#ffffff";}if(typeof _8e3=="string"){if(_8e3.indexOf("rgb")>-1){_8e3=_8d8.fromRgb(_8e3).toHex();}}else{_8e3=((_8e3&255)<<16)|(_8e3&65280)|((_8e3&16711680)>>>16);_8e3=_8e3.toString(16);_8e3="#000000".slice(0,7-_8e3.length)+_8e3;}this.value=_8e3;var _8e4=this.button.dropDown;if(_8e4&&_8e3!==_8e4.get("value")){_8e4.set("value",_8e3,false);}}});_8da.registry["foreColor"]=function(){return new _8dc({command:"foreColor"});};_8da.registry["hiliteColor"]=function(){return new _8dc({command:"hiliteColor"});};return _8dc;});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,_8e5){var _8e6={getType:function(){if(win.doc.getSelection){var _8e7="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _8e8=oSel.getRangeAt(0);if((_8e8.startContainer==_8e8.endContainer)&&((_8e8.endOffset-_8e8.startOffset)==1)&&(_8e8.startContainer.nodeType!=3)){_8e7="control";}}return _8e7;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _8e9=win.global.getSelection();return _8e9?_8e9.toString():"";}else{if(_8e5._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _8ea=win.global.getSelection();if(_8ea&&_8ea.rangeCount){var i;var html="";for(i=0;i<_8ea.rangeCount;i++){var frag=_8ea.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(_8e5._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(_8e5._editor.selection.getType()=="control"){if(win.doc.getSelection){var _8eb=win.global.getSelection();return _8eb.anchorNode.childNodes[_8eb.anchorOffset];}else{var _8ec=win.doc.selection.createRange();if(_8ec&&_8ec.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(_8e5._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _8ed=win.global.getSelection();if(_8ed){var node=_8ed.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_8ee){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_8ef){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _8f0=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _8f1=String(tags[i]).toLowerCase();if(_8f0==_8f1){return _8f1;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_8f2){if(win.doc.getSelection){var _8f3=win.global.getSelection();if(_8f3.removeAllRanges){if(_8f2){_8f3.collapseToStart();}else{_8f3.collapseToEnd();}}else{_8f3.collapse(_8f2);}}else{var _8f4=win.doc.selection.createRange();_8f4.collapse(_8f2);_8f4.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_8f5,_8f6){var doc=win.doc;var _8f7;_8f5=dom.byId(_8f5);if(win.doc.getSelection){var _8f8=win.global.getSelection();if(has("opera")){if(_8f8.rangeCount){_8f7=_8f8.getRangeAt(0);}else{_8f7=doc.createRange();}_8f7.setStart(_8f5,0);_8f7.setEnd(_8f5,(_8f5.nodeType==3)?_8f5.length:_8f5.childNodes.length);_8f8.addRange(_8f7);}else{_8f8.selectAllChildren(_8f5);}}else{_8f7=_8f5.ownerDocument.body.createTextRange();_8f7.moveToElementText(_8f5);if(!_8f6){try{_8f7.select();}catch(e){}}}},selectElement:function(_8f9,_8fa){var _8fb;_8f9=dom.byId(_8f9);var doc=_8f9.ownerDocument;var _8fc=win.global;if(doc.getSelection){var _8fd=_8fc.getSelection();_8fb=doc.createRange();if(_8fd.removeAllRanges){if(has("opera")){if(_8fd.getRangeAt(0)){_8fb=_8fd.getRangeAt(0);}}_8fb.selectNode(_8f9);_8fd.removeAllRanges();_8fd.addRange(_8fb);}}else{try{var tg=_8f9.tagName?_8f9.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_8fb=win.body(doc).createControlRange();}else{_8fb=win.body(doc).createRange();}_8fb.addElement(_8f9);if(!_8fa){_8fb.select();}}catch(e){this.selectElementChildren(_8f9,_8fa);}}},inSelection:function(node){if(node){var _8fe;var doc=win.doc;var _8ff;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){_8ff=sel.getRangeAt(0);}if(_8ff&&_8ff.compareBoundaryPoints&&doc.createRange){try{_8fe=doc.createRange();_8fe.setStart(node,0);if(_8ff.compareBoundaryPoints(_8ff.START_TO_END,_8fe)===1){return true;}}catch(e){}}}else{_8ff=doc.selection.createRange();try{_8fe=node.ownerDocument.body.createControlRange();if(_8fe){_8fe.addElement(node);}}catch(e1){try{_8fe=node.ownerDocument.body.createTextRange();_8fe.moveToElementText(node);}catch(e2){}}if(_8ff&&_8fe){if(_8ff.compareEndPoints("EndToStart",_8fe)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_8e6);return _8e6;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_900,_901,_902,_903,_904,_905,_906,has,_907){var _908=_905("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _909=this.declaredClass,_90a=this;return _902.substitute(tmpl,this,function(_90b,key){if(key.charAt(0)=="!"){_90b=lang.getObject(key.substr(1),false,_90a);}if(typeof _90b=="undefined"){throw new Error(_909+" template:"+key);}if(_90b==null){return "";}return key.charAt(0)=="!"?_90b:_90b.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_903(this.templatePath,{sanitize:true});}var _90c=_908.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_90c)){node=_906.toDom(this._stringRepl(_90c),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_90c);}}else{node=_90c.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_90d){var dest=this.containerNode;if(_90d&&dest){while(_90d.hasChildNodes()){dest.appendChild(_90d.firstChild);}}},_attachTemplateNodes:function(_90e,_90f){var _910=lang.isArray(_90e)?_90e:(_90e.all||_90e.getElementsByTagName("*"));var x=lang.isArray(_90e)?0:-1;for(;x<0||_910[x];x++){var _911=(x==-1)?_90e:_910[x];if(this.widgetsInTemplate&&(_90f(_911,"dojoType")||_90f(_911,"data-dojo-type"))){continue;}var _912=_90f(_911,"dojoAttachPoint")||_90f(_911,"data-dojo-attach-point");if(_912){var _913,_914=_912.split(/\s*,\s*/);while((_913=_914.shift())){if(lang.isArray(this[_913])){this[_913].push(_911);}else{this[_913]=_911;}this._attachPoints.push(_913);}}var _915=_90f(_911,"dojoAttachEvent")||_90f(_911,"data-dojo-attach-event");if(_915){var _916,_917=_915.split(/\s*,\s*/);var trim=lang.trim;while((_916=_917.shift())){if(_916){var _918=null;if(_916.indexOf(":")!=-1){var _919=_916.split(":");_916=trim(_919[0]);_918=trim(_919[1]);}else{_916=trim(_916);}if(!_918){_918=_916;}this._attachEvents.push(this.connect(_911,_900[_916]||_916,_918));}}}}},destroyRendering:function(){_904.forEach(this._attachPoints,function(_91a){delete this[_91a];},this);this._attachPoints=[];_904.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_908._templateCache={};_908.getCachedTemplate=function(_91b,_91c,doc){var _91d=_908._templateCache;var key=_91b;var _91e=_91d[key];if(_91e){try{if(!_91e.ownerDocument||_91e.ownerDocument==(doc||document)){return _91e;}}catch(e){}_906.destroy(_91e);}_91b=_902.trim(_91b);if(_91c||_91b.match(/\$\{([^\}]+)\}/g)){return (_91d[key]=_91b);}else{var node=_906.toDom(_91b,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_91b);}return (_91d[key]=node);}};if(has("ie")){_907.addOnWindowUnload(function(){var _91f=_908._templateCache;for(var key in _91f){var _920=_91f[key];if(typeof _920=="object"){_906.destroy(_920);}delete _91f[key];}});}lang.extend(_901,{dojoAttachEvent:"",dojoAttachPoint:""});return _908;});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_921,_922,_923,keys,lang,has,win,_924,_925,_926,_927,_928){return _921("dijit._editor.plugins.EnterKeyHandling",_925,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_929){if(this.editor===_929){return;}this.editor=_929;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_929.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_929.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_923.stop(e);}}});if(has("ie")>=9){this.connect(_929.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_929.addKeyHandler(13,0,0,h);_929.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_928)){var _92a=this.editor._sCall("getAncestorElement",["LI"]);if(!_92a){_926.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _92b=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_92b){_92b.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_92a.parentNode.parentNode.nodeName=="LI"){_92a=_92a.parentNode.parentNode;}}var fc=_92a.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_92a.insertBefore(fc.ownerDocument.createTextNode(" "),fc);var _92c=_927.create(this.editor.window);_92c.setStart(_92a.firstChild,0);var _92d=_927.getSelection(this.editor.window,true);_92d.removeAllRanges();_92d.addRange(_92c);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _92e,_92f,_930,_931,_932,_933,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _934=this.editor._sCall("getParentElement",[]);var _935=_927.getAncestor(_934,this.blockNodes);if(_935){if(_935.tagName=="LI"){return true;}_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);if(!_92f.collapsed){_92f.deleteContents();_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);}if(_927.atBeginningOfContainer(_935,_92f.startContainer,_92f.startOffset)){br=doc.createElement("br");_930=_927.create(this.editor.window);_935.insertBefore(br,_935.firstChild);_930.setStartAfter(br);_92e.removeAllRanges();_92e.addRange(_930);}else{if(_927.atEndOfContainer(_935,_92f.startContainer,_92f.startOffset)){_930=_927.create(this.editor.window);br=doc.createElement("br");_935.appendChild(br);_935.appendChild(doc.createTextNode(" "));_930.setStart(_935.lastChild,0);_92e.removeAllRanges();_92e.addRange(_930);}else{rs=_92f.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_931=doc.createTextNode(txt.substring(0,_92f.startOffset));_932=doc.createTextNode(txt.substring(_92f.startOffset));_933=doc.createElement("br");if(_932.nodeValue==""&&has("webkit")){_932=doc.createTextNode(" ");}_922.place(_931,rs,"after");_922.place(_933,_931,"after");_922.place(_932,_933,"after");_922.destroy(rs);_930=_927.create(this.editor.window);_930.setStart(_932,0);_92e.removeAllRanges();_92e.addRange(_930);return false;}return true;}}}else{_92e=_927.getSelection(this.editor.window);if(_92e.rangeCount){_92f=_92e.getRangeAt(0);if(_92f&&_92f.startContainer){if(!_92f.collapsed){_92f.deleteContents();_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);}rs=_92f.startContainer;if(rs&&rs.nodeType==3){var _936=false;var _937=_92f.startOffset;if(rs.length<_937){ret=this._adjustNodeAndOffset(rs,_937);rs=ret.node;_937=ret.offset;}txt=rs.nodeValue;_931=doc.createTextNode(txt.substring(0,_937));_932=doc.createTextNode(txt.substring(_937));_933=doc.createElement("br");if(!_932.length){_932=doc.createTextNode(" ");_936=true;}if(_931.length){_922.place(_931,rs,"after");}else{_931=rs;}_922.place(_933,_931,"after");_922.place(_932,_933,"after");_922.destroy(rs);_930=_927.create(this.editor.window);_930.setStart(_932,0);_930.setEnd(_932,_932.length);_92e.removeAllRanges();_92e.addRange(_930);if(_936&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _938;if(_92f.startOffset>=0){_938=rs.childNodes[_92f.startOffset];}var _933=doc.createElement("br");var _932=doc.createTextNode(" ");if(!_938){rs.appendChild(_933);rs.appendChild(_932);}else{_922.place(_933,_938,"before");_922.place(_932,_933,"after");}_930=_927.create(this.editor.window);_930.setStart(_932,0);_930.setEnd(_932,_932.length);_92e.removeAllRanges();_92e.addRange(_930);this.editor._sCall("collapse",[true]);}}}else{_926.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _939=true;_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);if(!_92f.collapsed){_92f.deleteContents();_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);}var _93a=_927.getBlockAncestor(_92f.endContainer,null,this.editor.editNode);var _93b=_93a.blockNode;if((this._checkListLater=(_93b&&(_93b.nodeName=="LI"||_93b.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_93b;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_93b.innerHTML)){_93b.innerHTML="";if(has("webkit")){_930=_927.create(this.editor.window);_930.setStart(_93b,0);_92e.removeAllRanges();_92e.addRange(_930);}this._checkListLater=false;}return true;}if(!_93a.blockNode||_93a.blockNode===this.editor.editNode){try{_926.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_93a={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_93a.blockNode){if(_93a.blockNode!=this.editor.editNode&&(!(_93a.blockNode.textContent||_93a.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_93a.blockNode);return false;}}else{_93a.blockNode=this.editor.editNode;}_92e=_927.getSelection(this.editor.window);_92f=_92e.getRangeAt(0);}var _93c=doc.createElement(this.blockNodeForEnter);_93c.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_93a.blockNode);var _93d=_92f.endOffset;var node=_92f.endContainer;if(node.length<_93d){var ret=this._adjustNodeAndOffset(node,_93d);node=ret.node;_93d=ret.offset;}if(_927.atEndOfContainer(_93a.blockNode,node,_93d)){if(_93a.blockNode===_93a.blockContainer){_93a.blockNode.appendChild(_93c);}else{_922.place(_93c,_93a.blockNode,"after");}_939=false;_930=_927.create(this.editor.window);_930.setStart(_93c,0);_92e.removeAllRanges();_92e.addRange(_930);if(this.editor.height){_924.scrollIntoView(_93c);}}else{if(_927.atBeginningOfContainer(_93a.blockNode,_92f.startContainer,_92f.startOffset)){_922.place(_93c,_93a.blockNode,_93a.blockNode===_93a.blockContainer?"first":"before");if(_93c.nextSibling&&this.editor.height){_930=_927.create(this.editor.window);_930.setStart(_93c.nextSibling,0);_92e.removeAllRanges();_92e.addRange(_930);_924.scrollIntoView(_93c.nextSibling);}_939=false;}else{if(_93a.blockNode===_93a.blockContainer){_93a.blockNode.appendChild(_93c);}else{_922.place(_93c,_93a.blockNode,"after");}_939=false;if(_93a.blockNode.style){if(_93c.style){if(_93a.blockNode.style.cssText){_93c.style.cssText=_93a.blockNode.style.cssText;}}}rs=_92f.startContainer;var _93e;if(rs&&rs.nodeType==3){var _93f,_940;_93d=_92f.endOffset;if(rs.length<_93d){ret=this._adjustNodeAndOffset(rs,_93d);rs=ret.node;_93d=ret.offset;}txt=rs.nodeValue;_931=doc.createTextNode(txt.substring(0,_93d));_932=doc.createTextNode(txt.substring(_93d,txt.length));_922.place(_931,rs,"before");_922.place(_932,rs,"after");_922.destroy(rs);var _941=_931.parentNode;while(_941!==_93a.blockNode){var tg=_941.tagName;var _942=doc.createElement(tg);if(_941.style){if(_942.style){if(_941.style.cssText){_942.style.cssText=_941.style.cssText;}}}if(_941.tagName==="FONT"){if(_941.color){_942.color=_941.color;}if(_941.face){_942.face=_941.face;}if(_941.size){_942.size=_941.size;}}_93f=_932;while(_93f){_940=_93f.nextSibling;_942.appendChild(_93f);_93f=_940;}_922.place(_942,_941,"after");_931=_941;_932=_942;_941=_941.parentNode;}_93f=_932;if(_93f.nodeType==1||(_93f.nodeType==3&&_93f.nodeValue)){_93c.innerHTML="";}_93e=_93f;while(_93f){_940=_93f.nextSibling;_93c.appendChild(_93f);_93f=_940;}}_930=_927.create(this.editor.window);var _943;var _944=_93e;if(this.blockNodeForEnter!=="BR"){while(_944){_943=_944;_940=_944.firstChild;_944=_940;}if(_943&&_943.parentNode){_93c=_943.parentNode;_930.setStart(_93c,0);_92e.removeAllRanges();_92e.addRange(_930);if(this.editor.height){_924.scrollIntoView(_93c);}if(has("mozilla")){this._pressedEnterInBlock=_93a.blockNode;}}else{_939=true;}}else{_930.setStart(_93c,0);_92e.removeAllRanges();_92e.addRange(_930);if(this.editor.height){_924.scrollIntoView(_93c);}if(has("mozilla")){this._pressedEnterInBlock=_93a.blockNode;}}}}return _939;},_adjustNodeAndOffset:function(node,_945){while(node.length<_945&&node.nextSibling&&node.nextSibling.nodeType==3){_945=_945-node.length;node=node.nextSibling;}return {"node":node,"offset":_945};},removeTrailingBr:function(_946){var para=/P|DIV|LI/i.test(_946.tagName)?_946:this.editor._sCall("getParentOfType",[_946,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_922.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_947,lang,_948,_949,xhr,_94a,_94b,_94c,_94d){var _94e=_948("dojo.data.ItemFileReadStore",[_94a],{constructor:function(_94f){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_94f.url;this._ccUrl=_94f.url;this.url=_94f.url;this._jsonData=_94f.data;this.data=null;this._datatypeMap=_94f.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_950){return _94d.fromISOString(_950);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_94f.urlPreventCache!==undefined){this.urlPreventCache=_94f.urlPreventCache?true:false;}if(_94f.hierarchical!==undefined){this.hierarchical=_94f.hierarchical?true:false;}if(_94f.clearOnClose){this.clearOnClose=true;}if("failOk" in _94f){this.failOk=_94f.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_951){if(typeof _951!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_952,_953){var _954=this.getValues(item,_952);return (_954.length>0)?_954[0]:_953;},getValues:function(item,_955){this._assertIsItem(item);this._assertIsAttribute(_955);return (item[_955]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _956=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_956.push(key);}}return _956;},hasAttribute:function(item,_957){this._assertIsItem(item);this._assertIsAttribute(_957);return (_957 in item);},containsValue:function(item,_958,_959){var _95a=undefined;if(typeof _959==="string"){_95a=_94b.patternToRegExp(_959,false);}return this._containsValue(item,_958,_959,_95a);},_containsValue:function(item,_95b,_95c,_95d){return _949.some(this.getValues(item,_95b),function(_95e){if(_95e!==null&&!lang.isObject(_95e)&&_95d){if(_95e.toString().match(_95d)){return true;}}else{if(_95c===_95e){return true;}}});},isItem:function(_95f){if(_95f&&_95f[this._storeRefPropName]===this){if(this._arrayOfAllItems[_95f[this._itemNumPropName]]===_95f){return true;}}return false;},isItemLoaded:function(_960){return this.isItem(_960);},loadItem:function(_961){this._assertIsItem(_961.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_962,_963,_964){var _965=[],i,key;if(_962.query){var _966,_967=_962.queryOptions?_962.queryOptions.ignoreCase:false;var _968={};for(key in _962.query){_966=_962.query[key];if(typeof _966==="string"){_968[key]=_94b.patternToRegExp(_966,_967);}else{if(_966 instanceof RegExp){_968[key]=_966;}}}for(i=0;i<_963.length;++i){var _969=true;var _96a=_963[i];if(_96a===null){_969=false;}else{for(key in _962.query){_966=_962.query[key];if(!this._containsValue(_96a,key,_966,_968[key])){_969=false;}}}if(_969){_965.push(_96a);}}_964(_965,_962);}else{for(i=0;i<_963.length;++i){var item=_963[i];if(item!==null){_965.push(item);}}_964(_965,_962);}},_fetchItems:function(_96b,_96c,_96d){var self=this;if(this._loadFinished){this.filter(_96b,this._getItemsArray(_96b.queryOptions),_96c);}else{if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_96b,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_96c)});}else{this._loadInProgress=true;var _96e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _96f=xhr.get(_96e);_96f.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_96b,self._getItemsArray(_96b.queryOptions),_96c);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_96d(e,_96b);}});_96f.addErrback(function(_970){self._loadInProgress=false;_96d(_970,_96b);});var _971=null;if(_96b.abort){_971=_96b.abort;}_96b.abort=function(){var df=_96f;if(df&&df.fired===-1){df.cancel();df=null;}if(_971){_971.call(_96b);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_96b,this._getItemsArray(_96b.queryOptions),_96c);}catch(e){_96d(e,_96b);}}else{_96d(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_96b);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _972=this._queuedFetches[i],_973=_972.args,_974=_972.filter,_975=_972.findCallback;if(_974){_974(_973,this._getItemsArray(_973.queryOptions),_975);}else{this.fetchItemByIdentity(_973);}}this._queuedFetches=[];}},_getItemsArray:function(_976){if(_976&&_976.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_977){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_978){var _979=false,self=this;function _97a(_97b){return (_97b!==null)&&(typeof _97b==="object")&&(!lang.isArray(_97b)||_979)&&(!lang.isFunction(_97b))&&(_97b.constructor==Object||lang.isArray(_97b))&&(typeof _97b._reference==="undefined")&&(typeof _97b._type==="undefined")&&(typeof _97b._value==="undefined")&&self.hierarchical;};function _97c(_97d){self._arrayOfAllItems.push(_97d);for(var _97e in _97d){var _97f=_97d[_97e];if(_97f){if(lang.isArray(_97f)){var _980=_97f;for(var k=0;k<_980.length;++k){var _981=_980[k];if(_97a(_981)){_97c(_981);}}}else{if(_97a(_97f)){_97c(_97f);}}}}};this._labelAttr=_978.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_978.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_979=true;}_97c(item);item[this._rootItemPropName]=true;}var _982={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _983=item[key];if(_983!==null){if(!lang.isArray(_983)){item[key]=[_983];}}else{item[key]=[null];}}_982[key]=key;}}while(_982[this._storeRefPropName]){this._storeRefPropName+="_";}while(_982[this._itemNumPropName]){this._itemNumPropName+="_";}while(_982[this._reverseRefMap]){this._reverseRefMap+="_";}var _984;var _985=_978.identifier;if(_985){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_985;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_984=item[_985];var _986=_984[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_986)){this._itemsByIdentity[_986]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_985+"].  Value collided: ["+_986+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_985+"].  Value collided: ["+_986+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_984=item[key];for(var j=0;j<_984.length;++j){_983=_984[j];if(_983!==null&&typeof _983=="object"){if(("_type" in _983)&&("_value" in _983)){var type=_983._type;var _987=this._datatypeMap[type];if(!_987){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_987)){_984[j]=new _987(_983._value);}else{if(lang.isFunction(_987.deserialize)){_984[j]=_987.deserialize(_983._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_983._reference){var _988=_983._reference;if(!lang.isObject(_988)){_984[j]=this._getItemByIdentity(_988);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _989=this._arrayOfAllItems[k],_98a=true;for(var _98b in _988){if(_989[_98b]!=_988[_98b]){_98a=false;}}if(_98a){_984[j]=_989;}}}if(this.referenceIntegrity){var _98c=_984[j];if(this.isItem(_98c)){this._addReferenceToMap(_98c,item,key);}}}else{if(this.isItem(_983)){if(this.referenceIntegrity){this._addReferenceToMap(_983,item,key);}}}}}}}},_addReferenceToMap:function(_98d,_98e,_98f){},getIdentity:function(item){var _990=this._features["dojo.data.api.Identity"];if(_990===Number){return item[this._itemNumPropName];}else{var _991=item[_990];if(_991){return _991[0];}}return null;},fetchItemByIdentity:function(_992){var item,_993;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_992});}else{this._loadInProgress=true;var _994={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _995=xhr.get(_994);_995.addCallback(function(data){var _996=_992.scope?_992.scope:_947.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_992.identity);if(_992.onItem){_992.onItem.call(_996,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_992.onError){_992.onError.call(_996,error);}}});_995.addErrback(function(_997){self._loadInProgress=false;if(_992.onError){var _998=_992.scope?_992.scope:_947.global;_992.onError.call(_998,_997);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_992.identity);if(_992.onItem){_993=_992.scope?_992.scope:_947.global;_992.onItem.call(_993,item);}}}}else{item=this._getItemByIdentity(_992.identity);if(_992.onItem){_993=_992.scope?_992.scope:_947.global;_992.onItem.call(_993,item);}}},_getItemByIdentity:function(_999){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_999)){item=this._itemsByIdentity[_999];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_999)){item=this._arrayOfAllItems[_999];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _99a=this._features["dojo.data.api.Identity"];if(_99a===Number){return null;}else{return [_99a];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _99b={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _99c=xhr.get(_99b);_99c.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_99c.addErrback(function(_99d){throw _99d;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_94e,_94c);return _94e;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_99e,_99f){var _9a0={};lang.setObject("dojo.data.util.simpleFetch",_9a0);_9a0.errorHandler=function(_9a1,_9a2){if(_9a2.onError){var _9a3=_9a2.scope||_99e.global;_9a2.onError.call(_9a3,_9a1,_9a2);}};_9a0.fetchHandler=function(_9a4,_9a5){var _9a6=_9a5.abort||null,_9a7=false,_9a8=_9a5.start?_9a5.start:0,_9a9=(_9a5.count&&(_9a5.count!==Infinity))?(_9a8+_9a5.count):_9a4.length;_9a5.abort=function(){_9a7=true;if(_9a6){_9a6.call(_9a5);}};var _9aa=_9a5.scope||_99e.global;if(!_9a5.store){_9a5.store=this;}if(_9a5.onBegin){_9a5.onBegin.call(_9aa,_9a4.length,_9a5);}if(_9a5.sort){_9a4.sort(_99f.createSortFunction(_9a5.sort,this));}if(_9a5.onItem){for(var i=_9a8;(i<_9a4.length)&&(i<_9a9);++i){var item=_9a4[i];if(!_9a7){_9a5.onItem.call(_9aa,item,_9a5);}}}if(_9a5.onComplete&&!_9a7){var _9ab=null;if(!_9a5.onItem){_9ab=_9a4.slice(_9a8,_9a9);}_9a5.onComplete.call(_9aa,_9ab,_9a5);}};_9a0.fetch=function(_9ac){_9ac=_9ac||{};if(!_9ac.store){_9ac.store=this;}this._fetchItems(_9ac,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _9ac;};return _9a0;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_9ad,_9ae,_9af,i18n){return _9ae("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_9b0){this.value=_9b0;this.onChange(_9b0);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_9b1){var _9b2=this._createMenuItem();var _9b3=_9b1(item);if(_9b3.html){_9b2.innerHTML=_9b3.label;}else{_9b2.appendChild(_9b2.ownerDocument.createTextNode(_9b3.label));}if(_9b2.innerHTML==""){_9b2.innerHTML="&#160;";}this.applyTextDir(_9b2,(_9b2.innerText||_9b2.textContent||""));return _9b2;},createOptions:function(_9b4,_9b5,_9b6){this.items=_9b4;this.previousButton.style.display=(_9b5.start==0)?"none":"";_9af.set(this.previousButton,"id",this.id+"_prev");_9ad.forEach(_9b4,function(item,i){var _9b7=this._createOption(item,_9b6);_9b7.setAttribute("item",i);_9af.set(_9b7,"id",this.id+i);this.nextButton.parentNode.insertBefore(_9b7,this.nextButton);},this);var _9b8=false;if(_9b4.total&&!_9b4.total.then&&_9b4.total!=-1){if((_9b5.start+_9b5.count)<_9b4.total){_9b8=true;}else{if((_9b5.start+_9b5.count)>_9b4.total&&_9b5.count==_9b4.length){_9b8=true;}}}else{if(_9b5.count==_9b4.length){_9b8=true;}}this.nextButton.style.display=_9b8?"":"none";_9af.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _9b9=this.containerNode;while(_9b9.childNodes.length>2){_9b9.removeChild(_9b9.childNodes[_9b9.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_9ba,_9bb){var _9bc={};lang.setObject("dojo.colors",_9bc);var _9bd=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_9ba.fromRgb=function(_9be,obj){var m=_9be.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_9bb.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _9ba.fromArray(a,obj);}return _9ba.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_9bd(m1,m2,H+1/3)*256,_9bd(m1,m2,H)*256,_9bd(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _9ba.fromArray(a,obj);}}return null;};var _9bf=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_9ba.prototype.sanitize=function(){var t=this;t.r=Math.round(_9bf(t.r,0,255));t.g=Math.round(_9bf(t.g,0,255));t.b=Math.round(_9bf(t.b,0,255));t.a=_9bf(t.a,0,1);return this;};_9bc.makeGrey=_9ba.makeGrey=function(g,a){return _9ba.fromArray([g,g,g,a]);};lang.mixin(_9ba.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _9ba;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_9c0,_9c1,_9c2,dom,_9c3,_9c4,_9c5,_9c6,has,keys,lang,on,_9c7,_9c8,_9c9,_9ca,_9cb){return _9c0("dijit._HasDropDown",_9cb,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _9cc=this.dropDown,_9cd=false;if(e&&this._opened){var c=_9c5.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_9cd){if(_9c4.contains(t,"dijitPopup")){_9cd=true;}else{t=t.parentNode;}}if(_9cd){t=e.target;if(_9cc.onItemClick){var _9ce;while(t&&!(_9ce=_9c8.byNode(t))){t=t.parentNode;}if(_9ce&&_9ce.onClick&&_9ce.getParent){_9ce.getParent().onItemClick(_9ce,e);}}return;}}}if(this._opened){if(_9cc.focus&&_9cc.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_9cc.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_9c2.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _9cf={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_9c4.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_9cf+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _9d0=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_9d0,"keydown",lang.hitch(this,"_onKey")),on(_9d0,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_9d1=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_9c2.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_9c2.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_9d1.tagName||"").toLowerCase()!=="input"||(_9d1.type&&_9d1.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_9c2.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _9d2=_9c9.curNode&&this.dropDown&&dom.isDescendant(_9c9.curNode,this.dropDown.domNode);this.closeDropDown(_9d2);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_9d3){_9d3();},loadAndOpenDropDown:function(){var d=new _9c1(),_9d4=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_9d4);}else{_9d4();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _9d5=this.dropDown,_9d6=_9d5.domNode,_9d7=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_9d6.style.width){this._explicitDDWidth=true;}if(_9d6.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _9d8={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_9d8.width="";}if(!this._explicitDDHeight){_9d8.height="";}_9c6.set(_9d6,_9d8);var _9d9=this.maxHeight;if(_9d9==-1){var _9da=_9c7.getBox(this.ownerDocument),_9db=_9c5.position(_9d7,false);_9d9=Math.floor(Math.max(_9db.y,_9da.h-(_9db.y+_9db.h)));}_9ca.moveOffScreen(_9d5);if(_9d5.startup&&!_9d5._started){_9d5.startup();}var mb=_9c5.getMarginSize(_9d6);var _9dc=(_9d9&&mb.h>_9d9);_9c6.set(_9d6,{overflowX:"visible",overflowY:_9dc?"auto":"visible"});if(_9dc){mb.h=_9d9;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_9d7.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_9d7.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_9d5.resize)){_9d5.resize(mb);}else{_9c5.setMarginBox(_9d6,mb);}}var _9dd=_9ca.open({parent:this,popup:_9d5,around:_9d7,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_9c3.set(self._popupStateNode,"popupActive",false);_9c4.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_9c3.set(this._popupStateNode,"popupActive","true");_9c4.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _9dd;},closeDropDown:function(_9de){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_9de){this.focus();}_9ca.close(this.dropDown);this._opened=false;}}});});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_9df,_9e0,lang,win,_9e1){_9e1.range={};_9e1.range.getIndex=function(node,_9e2){var ret=[],retR=[];var _9e3=node;var _9e4,n;while(node!=_9e2){var i=0;_9e4=node.parentNode;while((n=_9e4.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_9e4.childNodes.length);node=_9e4;}if(ret.length>0&&_9e3.nodeType==3){n=_9e3.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_9e3.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_9e1.range.getNode=function(_9e5,_9e6){if(!lang.isArray(_9e5)||_9e5.length==0){return _9e6;}var node=_9e6;_9df.every(_9e5,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_9e1.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _9e7=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_9e7(n1);var n2as=_9e7(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_9e1.range.getAncestor=function(node,_9e8,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_9e8.test(name)){return node;}node=node.parentNode;}return null;};_9e1.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_9e1.range.getBlockAncestor=function(node,_9e9,root){root=root||node.ownerDocument.body;_9e9=_9e9||_9e1.range.BlockTagNames;var _9ea=null,_9eb;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_9ea&&_9e9.test(name)){_9ea=node;}if(!_9eb&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_9eb=node;}node=node.parentNode;}return {blockNode:_9ea,blockContainer:_9eb||node.ownerDocument.body};};_9e1.range.atBeginningOfContainer=function(_9ec,node,_9ed){var _9ee=false;var _9ef=(_9ed==0);if(!_9ef&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_9ed))){_9ef=true;}}if(_9ef){var _9f0=node;_9ee=true;while(_9f0&&_9f0!==_9ec){if(_9f0.previousSibling){_9ee=false;break;}_9f0=_9f0.parentNode;}}return _9ee;};_9e1.range.atEndOfContainer=function(_9f1,node,_9f2){var _9f3=false;var _9f4=(_9f2==(node.length||node.childNodes.length));if(!_9f4&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_9f2))){_9f4=true;}}if(_9f4){var _9f5=node;_9f3=true;while(_9f5&&_9f5!==_9f1){if(_9f5.nextSibling){_9f3=false;break;}_9f5=_9f5.parentNode;}}return _9f3;};_9e1.range.adjacentNoneTextNode=function(_9f6,next){var node=_9f6;var len=(0-_9f6.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_9e1.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _9e1.range.W3CRange();}};_9e1.range.getSelection=function(_9f7,_9f8){if(_9f7.getSelection){return _9f7.getSelection();}else{var s=new _9e1.range.ie.selection(_9f7);if(!_9f8){s._getCurrentSelection();}return s;}};if(!window.getSelection){_9e1.range.ie={cachedSelection:{},selection:function(_9f9){this._ranges=[];this.addRange=function(r,_9fa){this._ranges.push(r);if(!_9fa){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _9fb=function(){var r=_9f9.document.selection.createRange();var type=_9f9.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _9e1.range.W3CRange(_9e1.range.ie.decomposeControlRange(r));}else{return new _9e1.range.W3CRange(_9e1.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_9fb();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_9fc){var _9fd=_9fc.item(0),_9fe=_9fc.item(_9fc.length-1);var _9ff=_9fd.parentNode,_a00=_9fe.parentNode;var _a01=_9e1.range.getIndex(_9fd,_9ff).o[0];var _a02=_9e1.range.getIndex(_9fe,_a00).o[0]+1;return [_9ff,_a01,_a00,_a02];},getEndPoint:function(_a03,end){var _a04=_a03.duplicate();_a04.collapse(!end);var _a05="EndTo"+(end?"End":"Start");var _a06=_a04.parentElement();var _a07,_a08,_a09;if(_a06.childNodes.length>0){_9df.every(_a06.childNodes,function(node,i){var _a0a;if(node.nodeType!=3){_a04.moveToElementText(node);if(_a04.compareEndPoints(_a05,_a03)>0){if(_a09&&_a09.nodeType==3){_a07=_a09;_a0a=true;}else{_a07=_a06;_a08=i;return false;}}else{if(i==_a06.childNodes.length-1){_a07=_a06;_a08=_a06.childNodes.length;return false;}}}else{if(i==_a06.childNodes.length-1){_a07=node;_a0a=true;}}if(_a0a&&_a07){var _a0b=_9e1.range.adjacentNoneTextNode(_a07)[0];if(_a0b){_a07=_a0b.nextSibling;}else{_a07=_a06.firstChild;}var _a0c=_9e1.range.adjacentNoneTextNode(_a07);_a0b=_a0c[0];var _a0d=_a0c[1];if(_a0b){_a04.moveToElementText(_a0b);_a04.collapse(false);}else{_a04.moveToElementText(_a06);}_a04.setEndPoint(_a05,_a03);_a08=_a04.text.length-_a0d;return false;}_a09=node;return true;});}else{_a07=_a06;_a08=0;}if(!end&&_a07.nodeType==1&&_a08==_a07.childNodes.length){var _a0e=_a07.nextSibling;if(_a0e&&_a0e.nodeType==3){_a07=_a0e;_a08=0;}}return [_a07,_a08];},setEndPoint:function(_a0f,_a10,_a11){var _a12=_a0f.duplicate(),node,len;if(_a10.nodeType!=3){if(_a11>0){node=_a10.childNodes[_a11-1];if(node){if(node.nodeType==3){_a10=node;_a11=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_a10=node.nextSibling;_a11=0;}else{_a12.moveToElementText(node.nextSibling?node:_a10);var _a13=node.parentNode;var _a14=_a13.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_a12.collapse(false);_a13.removeChild(_a14);}}}}else{_a12.moveToElementText(_a10);_a12.collapse(true);}}if(_a10.nodeType==3){var _a15=_9e1.range.adjacentNoneTextNode(_a10);var _a16=_a15[0];len=_a15[1];if(_a16){_a12.moveToElementText(_a16);_a12.collapse(false);if(_a16.contentEditable!="inherit"){len++;}}else{_a12.moveToElementText(_a10.parentNode);_a12.collapse(true);_a12.move("character",1);_a12.move("character",-1);}_a11+=len;if(_a11>0){if(_a12.move("character",_a11)!=_a11){console.error("Error when moving!");}}}return _a12;},decomposeTextRange:function(_a17){var _a18=_9e1.range.ie.getEndPoint(_a17);var _a19=_a18[0],_a1a=_a18[1];var _a1b=_a18[0],_a1c=_a18[1];if(_a17.htmlText.length){if(_a17.htmlText==_a17.text){_a1c=_a1a+_a17.text.length;}else{_a18=_9e1.range.ie.getEndPoint(_a17,true);_a1b=_a18[0],_a1c=_a18[1];}}return [_a19,_a1a,_a1b,_a1c];},setRange:function(_a1d,_a1e,_a1f,_a20,_a21,_a22){var _a23=_9e1.range.ie.setEndPoint(_a1d,_a1e,_a1f);_a1d.setEndPoint("StartToStart",_a23);if(!_a22){var end=_9e1.range.ie.setEndPoint(_a1d,_a20,_a21);}_a1d.setEndPoint("EndToEnd",end||_a23);return _a1d;}};_9e0("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_9e1.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_a24){_a24=parseInt(_a24);if(this.startContainer===node&&this.startOffset==_a24){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_a24;if(!this.endContainer){this.setEnd(node,_a24);}else{this._updateInternal();}},setEnd:function(node,_a25){_a25=parseInt(_a25);if(this.endContainer===node&&this.endOffset==_a25){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_a25;if(!this.startContainer){this.setStart(node,_a25);}else{this._updateInternal();}},setStartAfter:function(node,_a26){this._setPoint("setStart",node,_a26,1);},setStartBefore:function(node,_a27){this._setPoint("setStart",node,_a27,0);},setEndAfter:function(node,_a28){this._setPoint("setEnd",node,_a28,1);},setEndBefore:function(node,_a29){this._setPoint("setEnd",node,_a29,0);},_setPoint:function(what,node,_a2a,ext){var _a2b=_9e1.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_a2b.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_9e1.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _9e1.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _9e1.range;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_a2c,_a2d,fx,dom,_a2e,_a2f,_a30,lang,_a31,on,has,_a32,_a33,_a34,_a35,_a36,_a37,_a38){var _a39=_a2d("dijit._MasterTooltip",[_a34,_a35],{duration:_a32.defaultDuration,templateString:_a37,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _a36(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_a3a,_a3b,_a3c,rtl,_a3d){if(this.aroundNode&&this.aroundNode===_a3b&&this.containerNode.innerHTML==_a3a){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_a3a;if(_a3d){this.set("textDir",_a3d);}this.containerNode.align=rtl?"right":"left";var pos=_a33.around(this.domNode,_a3b,_a3c&&_a3c.length?_a3c:_a3e.defaultPosition,!rtl,lang.hitch(this,"orient"));var _a3f=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_a3f.y+((_a3f.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_a3f.x+((_a3f.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_a30.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_a3b;},orient:function(node,_a40,_a41,_a42,_a43){this.connectorNode.style.top="";var _a44=_a42.h,_a45=_a42.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_a40+"-"+_a41];this.domNode.style.width="auto";var size=_a2f.position(this.domNode);if(has("ie")==9){size.w+=2;}var _a46=Math.min((Math.max(_a45,1)),size.w);_a2f.setMarginBox(this.domNode,{w:_a46});if(_a41.charAt(0)=="B"&&_a40.charAt(0)=="B"){var bb=_a2f.position(node);var _a47=this.connectorNode.offsetHeight;if(bb.h>_a44){var _a48=_a44-((_a43.h+_a47)>>1);this.connectorNode.style.top=_a48+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_a43.h/2-_a47/2,0),bb.h-_a47)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_a45);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_a49){if(this._onDeck&&this._onDeck[1]==_a49){this._onDeck=null;}else{if(this.aroundNode===_a49){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_a2c.forEach(node.children,function(_a4a){this._setAutoTextDir(_a4a);},this);},_setTextDirAttr:function(_a4b){this._set("textDir",_a4b);if(_a4b=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_a38.showTooltip=function(_a4c,_a4d,_a4e,rtl,_a4f){if(_a4e){_a4e=_a2c.map(_a4e,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_a3e._masterTT){_a38._masterTT=_a3e._masterTT=new _a39();}return _a3e._masterTT.show(_a4c,_a4d,_a4e,rtl,_a4f);};_a38.hideTooltip=function(_a50){return _a3e._masterTT&&_a3e._masterTT.hide(_a50);};var _a3e=_a2d("dijit.Tooltip",_a34,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_a51){_a2c.forEach(this._connections||[],function(_a52){_a2c.forEach(_a52,function(_a53){_a53.remove();});},this);this._connectIds=_a2c.filter(lang.isArrayLike(_a51)?_a51:(_a51?[_a51]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_a2c.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_a54=this.selector,_a55=_a54?function(_a56){return on.selector(_a54,_a56);}:function(_a57){return _a57;},self=this;return [on(node,_a55(_a31.enter),function(){self._onHover(this);}),on(node,_a55("focusin"),function(){self._onHover(this);}),on(node,_a55(_a31.leave),lang.hitch(self,"_onUnHover")),on(node,_a55("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_a51);},addTarget:function(node){var id=node.id||node;if(_a2c.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_a2c.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_a2e.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_a2c.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_a58){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_a58);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_a59){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _a5a=this.getContent(_a59);if(!_a5a){return;}_a3e.show(_a5a,_a59,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_a59;this.onShow(_a59,this.position);},close:function(){if(this._connectNode){_a3e.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_a2c.forEach(this._connections||[],function(_a5b){_a2c.forEach(_a5b,function(_a5c){_a5c.remove();});},this);this.inherited(arguments);}});_a3e._MasterTooltip=_a39;_a3e.show=_a38.showTooltip;_a3e.hide=_a38.hideTooltip;_a3e.defaultPosition=["after-centered","before-centered"];return _a3e;});},"esri/layers/OnDemandMode":function(){define("esri/layers/OnDemandMode",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_a5d,_a5e,lang,_a5f,has,_a60,_a61,_a62,_a63,_a64){var _a65=_a5d([_a63],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_a66){this.featureLayer=_a66;this._featureMap={};this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _a67=this.featureLayer,_a68=_a67._srInfo;this._gridLayer=new _a64(new _a61(_a68?_a68.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_a67._tileWidth,height:_a67._tileHeight},{width:map.width,height:map.height},_a68);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_a69){var _a6a=this._gridLayer,geom=_a69.geometry,_a6b=[];if(!geom){return;}_a6b=_a6a.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _a6c=this._cellMap,i,cell,oid=_a69.attributes[this.featureLayer.objectIdField],_a6d,row,col;for(i=0;i<_a6b.length;i++){cell=_a6b[i];_a6d=cell.latticeID;row=cell.row;col=cell.col;if(_a6d){cell=(_a6c[_a6d]=(_a6c[_a6d]||cell));}else{_a6c[row]=_a6c[row]||{};cell=(_a6c[row][col]=(_a6c[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_a69);this._addFeatureIIf(oid,_a69);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_a5e.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_a5e.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_a5e.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_a5e.disconnect(this._zoomConnect);_a5e.disconnect(this._panConnect);_a5e.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _a6e=this.featureLayer,map=this.map;if(_a6e.suspended){return;}_a6e._fireUpdateStart();this._clearIIf();var _a6f=_a6e._trackManager;if(_a6f){_a6f.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_a70,cell){var id="_"+_a70.name+_a70.layerId+_a70._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_a71){this._exceeds=false;var _a72=this.featureLayer,map=this.map,_a73=_a71||map.extent,_a74=this._gridLayer.getCellsInExtent(_a73,_a72.latticeTiling),_a75=_a74.cells;if(!_a72.isEditable()){var _a76=this._cellMap;_a75=_a5f.filter(_a75,function(cell){if(cell.lattice){if(_a76[cell.latticeID]){return false;}}else{if(_a76[cell.row]&&_a76[cell.row][cell.col]){return false;}}return true;});}var _a77=_a72.getOutFields(),_a78=_a72.getDefinitionExpression(),time=_a72._getOffsettedTE(_a72._mapTimeExtent),_a79=_a72._usePatch,_a7a=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_a7b,_a7c;this._pending=this._pending||0;for(i=0;i<_a75.length;i++){cell=_a75[i];_a7b=new _a62();_a7b.geometry=cell.extent||cell.lattice;_a7b.outFields=_a77;_a7b.where=_a78;if(_a72.latticeTiling&&cell.extent){_a7b.spatialRelationship=_a62.SPATIAL_REL_CONTAINS;}_a7b.returnGeometry=true;_a7b.timeExtent=time;_a7b.maxAllowableOffset=_a72._maxOffset;if(_a72._ts){_a7b._ts=(new Date()).getTime();}_a7c=null;if(_a79){_a7c=this._getRequestId(_a72,cell);if(this._isPending(_a7c)){continue;}}this._pending++;_a7a.push(_a72._task.execute(_a7b,function(){var _a7d=cell;return function(_a7e){func.apply(self,[_a7e,_a7d]);};}.call(this),this._queryErrorHandler,_a7c));}this._removeOldCells(_a73);this._endCheck();},_drawFeatures:function(_a7f,cell){this._exceeds=this._exceeds||_a7f.exceededTransferLimit;this._finalizeIO();var _a80=this.featureLayer,map=this.map,_a81=map.extent,_a82=cell.extent,row=cell.row,col=cell.col,_a83=_a80.objectIdField,_a84=_a7f.features,_a85=this._gridLayer,_a86=this._cellMap,i,len,_a87=cell.latticeID,_a88=_a87?_a86[_a87]:(_a86[row]&&_a86[row][col]);if((cell.resolution!=_a85._resolution)||(_a87?(_a87!==_a85.getLatticeID(_a81)):(!_a85.intersects(_a82,_a81)))){if(_a88){this._removeCell(row,col,_a87);}}else{if(_a88){this._updateCell(_a88,_a84);}else{cell.features=_a84;if(_a87){_a86[_a87]=cell;}else{_a86[row]=_a86[row]||{};_a86[row][col]=cell;}len=_a84.length;for(i=0;i<len;i++){var _a89=_a84[i];var oid=_a89.attributes[_a83];this._addFeatureIIf(oid,_a89);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_a8a){if(this._pending===0){this._processIOQueue();var _a8b=this.featureLayer,_a8c=_a8b._trackManager;if(_a8c){_a8c.clearTracks();_a8c.addFeatures(_a8b.graphics);if(_a8b._ager){_a5f.forEach(_a8b.graphics,function(_a8d){if(_a8d._shape){_a8b._repaint(_a8d);}});}_a8c.moveLatestToFront();_a8c.drawTracks();}this.featureLayer._fireUpdateEnd(_a8a&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_a8b.onQueryLimitExceeded();}}},_processIOQueue:function(_a8e){this._ioQueue=_a5f.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_a8e){_a5f.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_a8f){var _a90=this._cellMap,_a91=this._gridLayer,_a92,_a93;for(_a92 in _a90){if(_a90[_a92]){var row=_a90[_a92],_a94=row.latticeID,_a95=0,_a96=0;if(_a94){_a95++;if(_a94!==_a91.getLatticeID(_a8f)){this._removeCell(null,null,_a94);_a96++;}}else{for(_a93 in row){if(row[_a93]){_a95++;var _a97=row[_a93].extent;if(!_a91.intersects(_a97,_a8f)){this._removeCell(_a92,_a93);_a96++;}}}}if(_a96===_a95){delete _a90[_a92];}}}},_updateCell:function(cell,_a98){var _a99=this.featureLayer,_a9a=_a99.objectIdField,_a9b=_a99._selectedFeatures,i,len=_a98.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _a9c=_a98[i];var oid=_a9c.attributes[_a9a];var _a9d=this._addFeatureIIf(oid,_a9c);if(_a9d===_a9c){this._incRefCount(oid);cell.features.push(_a9d);}else{if(!(oid in _a9b)){_a9d.setGeometry(_a9c.geometry);_a9d.setAttributes(_a9c.attributes);}}}},_removeCell:function(row,col,_a9e){var _a9f=this._cellMap,_aa0=this.featureLayer,_aa1=_aa0.objectIdField;var cell=_a9e?_a9f[_a9e]:(_a9f[row]&&_a9f[row][col]);if(cell){if(_a9e){delete _a9f[_a9e];}else{delete _a9f[row][col];}var _aa2=cell.features,i;for(i=0;i<_aa2.length;i++){var _aa3=_aa2[i];var oid=_aa3.attributes[_aa1];this._decRefCount(oid);if(oid in _aa0._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){lang.setObject("layers._OnDemandMode",_a65,_a60);}return _a65;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_aa4,_aa5,_aa6,keys,_aa7,_aa8,_aa9,_aaa){return _aa4("dijit.form._ComboBoxMenu",[_aa7,_aa8,_aaa,_aa9],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_aa5.add(this.previousButton,"dijitMenuItemRtl");_aa5.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_aa5.add(node,"dijitMenuItemHover");},onUnhover:function(node){_aa5.remove(node,"dijitMenuItemHover");},onSelect:function(node){_aa5.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_aa5.remove(node,"dijitMenuItemSelected");},_page:function(up){var _aab=0;var _aac=this.domNode.scrollTop;var _aad=_aa6.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_aab<_aad){var _aae=this.getHighlightedOption();if(up){if(!_aae.previousSibling||_aae.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_aae.nextSibling||_aae.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _aaf=this.domNode.scrollTop;_aab+=(_aaf-_aac)*(up?-1:1);_aac=_aaf;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_ab0,date,_ab1,_ab2,_ab3,_ab4,_ab5,_ab6,keys,lang,has,_ab7,_ab8,_ab9,_aba,_abb){var _abc=_ab2("dijit.Calendar",[_ab7,_ab8,_ab9],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_abd){_ab6.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_abd);},_createMonthWidget:function(){return new _abc._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_abe){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_abe);var _abf=this.dateModule.getDaysInMonth(date);var _ac0=this.currentFocus.getDate();date.setDate(Math.min(_ac0,_abf));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_ab4.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_ab4.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_ab4.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_ab4.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_ab4.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_ab4.contains(node,"dijitCalendarDisabledDate")){_ab4.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_ab4.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _ac1=-1,_ac2,_ac3=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_ac1=1;case keys.LEFT_ARROW:_ac2="day";if(!this.isLeftToRight()){_ac1*=-1;}break;case keys.DOWN_ARROW:_ac1=1;case keys.UP_ARROW:_ac2="week";break;case keys.PAGE_DOWN:_ac1=1;case keys.PAGE_UP:_ac2=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_ac3=this.dateModule.add(_ac3,"month",1);_ac2="day";case keys.HOME:_ac3=new this.dateClassObj(_ac3);_ac3.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_ac2){_ac3=this.dateModule.add(_ac3,_ac2,_ac1);}this._setCurrentFocusAttr(_ac3);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_ab5.stop(evt);}},onValueSelected:function(){},onChange:function(_ac4){this.onValueSelected(_ac4);},getClassForDate:function(){}});_abc._MonthDropDownButton=_ab2("dijit.Calendar._MonthDropDownButton",_abb,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _abc._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_ac5){var _ac6=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_ac5);this.dropDown.set("months",_ac6);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_ac6[_ac5.getMonth()]+"</div>";}});_abc._MonthDropDown=_ab2("dijit.Calendar._MonthDropDown",[_ab8,_aba],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_ac7){this.domNode.innerHTML=_ab0.map(_ac7,function(_ac8,idx){return _ac8?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_ac8+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_ab3.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_ab4.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _abc;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_ac9,_aca,_acb,_acc,dom,_acd,_ace,_acf,_ad0,_ad1,keys,lang,on,has,_ad2,_ad3,_ad4){function _ad5(){if(this._popupWrapper){_ace.destroy(this._popupWrapper);delete this._popupWrapper;}};var _ad6=_acc(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_ad7){var _ad8=_ad7._popupWrapper,node=_ad7.domNode;if(!_ad8){_ad8=_ace.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_ad7.ownerDocumentBody);_ad8.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_ad7._popupWrapper=_ad8;_aca.after(_ad7,"destroy",_ad5,true);}return _ad8;},moveOffScreen:function(_ad9){var _ada=this._createWrapper(_ad9);_ad0.set(_ada,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_adb){var _adc=this._createWrapper(_adb);_ad0.set(_adc,"display","none");},getTopPopup:function(){var _add=this._stack;for(var pi=_add.length-1;pi>0&&_add[pi].parent===_add[pi-1].widget;pi--){}return _add[pi];},open:function(args){var _ade=this._stack,_adf=args.popup,_ae0=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_acf.isBodyLtr(_adf.ownerDocument),_ae1=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_ade.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_ade[_ade.length-1].widget.domNode))){this.close(_ade[_ade.length-1].widget);}var _ae2=this._createWrapper(_adf);_acd.set(_ae2,{id:id,style:{zIndex:this._beginZIndex+_ade.length},"class":"dijitPopup "+(_adf.baseClass||_adf["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_adf.bgIframe){_adf.bgIframe=new _ad3(_ae2);}}var best=_ae1?_ad2.around(_ae2,_ae1,_ae0,ltr,_adf.orient?lang.hitch(_adf,"orient"):null):_ad2.at(_ae2,args,_ae0=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_ae2.style.display="";_ae2.style.visibility="visible";_adf.domNode.style.visibility="visible";var _ae3=[];_ae3.push(on(_ae2,_acb._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_ad1.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_ad1.stop(evt);var _ae4=this.getTopPopup();if(_ae4&&_ae4.onCancel){_ae4.onCancel();}}}})));if(_adf.onCancel&&args.onCancel){_ae3.push(_adf.on("cancel",args.onCancel));}_ae3.push(_adf.on(_adf.onExecute?"execute":"change",lang.hitch(this,function(){var _ae5=this.getTopPopup();if(_ae5&&_ae5.onExecute){_ae5.onExecute();}})));_ade.push({widget:_adf,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_ae3});if(_adf.onOpen){_adf.onOpen(best);}return best;},close:function(_ae6){var _ae7=this._stack;while((_ae6&&_ac9.some(_ae7,function(elem){return elem.widget==_ae6;}))||(!_ae6&&_ae7.length)){var top=_ae7.pop(),_ae8=top.widget,_ae9=top.onClose;if(_ae8.onClose){_ae8.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_ae8&&_ae8.domNode){this.hide(_ae8);}if(_ae9){_ae9();}}}});return (_ad4.popup=new _ad6());});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(_aea,_aeb,_aec,date,_aed,_aee,dom,_aef,_af0,lang,has,_af1,_af2,_af3,_af4){var _af5=_aeb("dijit.CalendarLite",[_af2,_af3],{templateString:_af4,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(_af6){return _af6&&!isNaN(_af6)&&typeof _af6=="object"&&_af6.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var _af7=new this.dateClassObj(this.value);_af7.setHours(0,0,0,0);if(_af7.getDate()<this.value.getDate()){_af7=this.dateModule.add(_af7,"hour",1);}return _af7;}else{return null;}},_setValueAttr:function(_af8,_af9){if(typeof _af8=="string"){_af8=_aee.fromISOString(_af8);}_af8=this._patchDate(_af8);if(this._isValidDate(_af8)&&!this.isDisabledDate(_af8,this.lang)){this._set("value",_af8);this.set("currentFocus",_af8);this._markSelectedDates([_af8]);if(this._created&&(_af9||typeof _af9=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(_afa){if(_afa){_afa=new this.dateClassObj(_afa);_afa.setHours(1,0,0,0);}return _afa;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var _afb=new this.dateClassObj(this.currentFocus);_afb.setDate(1);var _afc=_afb.getDay(),_afd=this.dateModule.getDaysInMonth(_afb),_afe=this.dateModule.getDaysInMonth(this.dateModule.add(_afb,"month",-1)),_aff=new this.dateClassObj(),_b00=_aec.getFirstDayOfWeek(this.lang);if(_b00>_afc){_b00-=7;}this._date2cell={};_aea.forEach(this.dateCells,function(_b01,idx){var i=idx+_b00;var date=new this.dateClassObj(_afb),_b02,_b03="dijitCalendar",adj=0;if(i<_afc){_b02=_afe-_afc+i+1;adj=-1;_b03+="Previous";}else{if(i>=(_afc+_afd)){_b02=i-_afc-_afd+1;adj=1;_b03+="Next";}else{_b02=i-_afc+1;_b03+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_b02);if(!this.dateModule.compare(date,_aff,"date")){_b03="dijitCalendarCurrentDate "+_b03;}if(this.isDisabledDate(date,this.lang)){_b03="dijitCalendarDisabledDate "+_b03;_b01.setAttribute("aria-disabled","true");}else{_b03="dijitCalendarEnabledDate "+_b03;_b01.removeAttribute("aria-disabled");_b01.setAttribute("aria-selected","false");}var _b04=this.getClassForDate(date,this.lang);if(_b04){_b03=_b04+" "+_b03;}_b01.className=_b03+"Month dijitCalendarDateTemplate";var _b05=date.valueOf();this._date2cell[_b05]=_b01;_b01.dijitDateValue=_b05;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var _b06=new this.dateClassObj(this.currentFocus);_b06.setDate(1);this.monthWidget.set("month",_b06);var y=_b06.getFullYear()-1;var d=new this.dateClassObj();_aea.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_b07){this.dateModule=_b07.datePackage?lang.getObject(_b07.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_b07.datePackage?lang.getObject(_b07.datePackage+".locale",false):_aed;},_createMonthWidget:function(){return _af5._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_b08=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_b09=_aec.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_af1.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _b08[_b09++%7];});var r=_af1.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _b0a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_b0a,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _b0b=lang.hitch(this,function(_b0c,part,_b0d){this.connect(this[_b0c],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_b0d));});});_b0b("incrementMonth","month",1);_b0b("decrementMonth","month",-1);_b0b("nextYearLabelNode","year",1);_b0b("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_b0e){var _b0f=this.currentFocus,_b10=this._getNodeByDate(_b0f);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_b0f,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _b11=this._getNodeByDate(date);_b11.setAttribute("tabIndex",this.tabIndex);if(this.focused||_b0e){_b11.focus();}if(_b10&&_b10!=_b11){if(has("webkit")){_b10.setAttribute("tabIndex","-1");}else{_b10.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){_af0.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_aef.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(_b12){_b12=this._patchDate(_b12);return _b12&&this._date2cell?this._date2cell[_b12.valueOf()]:null;},_markSelectedDates:function(_b13){function mark(_b14,cell){_aef.toggle(cell,"dijitCalendarSelectedDate",_b14);cell.setAttribute("aria-selected",_b14?"true":"false");};_aea.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=_aea.filter(_aea.map(_b13,this._getNodeByDate,this),function(n){return n;});_aea.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_af5._MonthWidget=_aeb("dijit.CalendarLite._MonthWidget",_af2,{_setMonthAttr:function(_b15){var _b16=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_b15),_b17=(has("ie")==6?"":"<div class='dijitSpacer'>"+_aea.map(_b16,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_b17+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_b16[_b15.getMonth()]+"</div>";}});return _af5;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b18,_b19,_b1a,_b1b,_b1c,_b1d,dom,_b1e,_b1f,_b20,_b21,_b22,has,_b23,lang,on,_b24,_b25,_b26,win,_b27,_b28){has.add("dijit-legacy-requires",!_b23.isAsync);if(has("dijit-legacy-requires")){_b24(0,function(){var _b29=["dijit/_base/manager"];_b18(_b29);});}var _b2a={};function _b2b(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b2c(attr){return function(val){_b1e[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b1d("dijit._WidgetBase",[_b25,_b27],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b2c("lang"),dir:"",_setDirAttr:_b2c("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b1b.blankGif||_b18.toUrl("dojo/resources/blank.gif"),postscript:function(_b2d,_b2e){this.create(_b2d,_b2e);},create:function(_b2f,_b30){this.srcNodeRef=dom.byId(_b30);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b2f){this.params=_b2f;lang.mixin(this,_b2f);}this.postMixInProperties();if(!this.id){this.id=_b28.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b28.add(this);this.buildRendering();var _b31;if(this.domNode){this._applyAttributes();var _b32=this.srcNodeRef;if(_b32&&_b32.parentNode&&this.domNode!==_b32){_b32.parentNode.replaceChild(this.domNode,_b32);_b31=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b31){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b33=ctor.prototype;for(var _b34 in _b33){if(_b34 in this.attributeMap){continue;}var _b35="_set"+_b34.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b35 in _b33){list.push(_b34);}}}var _b36={};for(var key in this.params||{}){_b36[key]=this[key];}_b19.forEach(list,function(attr){if(attr in _b36){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _b36){this.set(key,_b36[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b37=this.baseClass.split(" ");if(!this.isLeftToRight()){_b37=_b37.concat(_b19.map(_b37,function(name){return name+"Rtl";}));}_b1f.add(this.domNode,_b37);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b19.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b38){this._beingDestroyed=true;this.destroyDescendants(_b38);this.destroy(_b38);},destroy:function(_b39){this._beingDestroyed=true;this.uninitialize();function _b3a(w){if(w.destroyRecursive){w.destroyRecursive(_b39);}else{if(w.destroy){w.destroy(_b39);}}};_b19.forEach(this._connects,lang.hitch(this,"disconnect"));_b19.forEach(this._supportingWidgets,_b3a);if(this.domNode){_b19.forEach(_b28.findWidgets(this.domNode,this.containerNode),_b3a);}this.destroyRendering(_b39);_b28.remove(this.id);this._destroyed=true;},destroyRendering:function(_b3b){if(this.bgIframe){this.bgIframe.destroy(_b3b);delete this.bgIframe;}if(this.domNode){if(_b3b){_b1e.remove(this.domNode,"widgetId");}else{_b20.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b3b){_b20.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b3c){_b19.forEach(this.getChildren(),function(_b3d){if(_b3d.destroyRecursive){_b3d.destroyRecursive(_b3c);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b3e){var _b3f=this.domNode;if(lang.isObject(_b3e)){_b22.set(_b3f,_b3e);}else{if(_b3f.style.cssText){_b3f.style.cssText+="; "+_b3e;}else{_b3f.style.cssText=_b3e;}}this._set("style",_b3e);},_attrToDom:function(attr,_b40,_b41){_b41=arguments.length>=3?_b41:this.attributeMap[attr];_b19.forEach(lang.isArray(_b41)?_b41:[_b41],function(_b42){var _b43=this[_b42.node||_b42||"domNode"];var type=_b42.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b40)){_b40=lang.hitch(this,_b40);}var _b44=_b42.attribute?_b42.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b43.tagName){_b1e.set(_b43,_b44,_b40);}else{_b43.set(_b44,_b40);}break;case "innerText":_b43.innerHTML="";_b43.appendChild(this.ownerDocument.createTextNode(_b40));break;case "innerHTML":_b43.innerHTML=_b40;break;case "class":_b1f.replace(_b43,_b40,this[attr]);break;}},this);},get:function(name){var _b45=this._getAttrNames(name);return this[_b45.g]?this[_b45.g]():this[name];},set:function(name,_b46){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b47=this._getAttrNames(name),_b48=this[_b47.s];if(lang.isFunction(_b48)){var _b49=_b48.apply(this,Array.prototype.slice.call(arguments,1));}else{var _b4a=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_b4b,map,tag;tag=this[_b4a]&&this[_b4a].tagName;if(tag){_b4b=_b2a[tag]||(_b2a[tag]=_b2b(this[_b4a]));}map=name in this.attributeMap?this.attributeMap[name]:_b47.s in this?this[_b47.s]:((_b4b&&_b47.l in _b4b&&typeof _b46!="function")||/^aria-|^data-|^role$/.test(name))?_b4a:null;if(map!=null){this._attrToDom(name,_b46,map);}this._set(name,_b46);}return _b49||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_b4c){var _b4d=this[name];this[name]=_b4c;if(this._created&&_b4c!==_b4d){if(this._watchCallbacks){this._watchCallbacks(name,_b4d,_b4c);}this.emit("attrmodified-"+name,{detail:{prevValue:_b4d,newValue:_b4c}});}},emit:function(type,_b4e,_b4f){_b4e=_b4e||{};if(_b4e.bubbles===undefined){_b4e.bubbles=true;}if(_b4e.cancelable===undefined){_b4e.cancelable=true;}if(!_b4e.detail){_b4e.detail={};}_b4e.detail.widget=this;var ret,_b50=this["on"+type];if(_b50){ret=_b50.apply(this,_b4f?_b4f:[_b4e]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_b4e);}return ret;},on:function(type,func){var _b51=this._onMap(type);if(_b51){return _b1a.after(this,_b51,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b28.findWidgets(this.containerNode):[];},getParent:function(){return _b28.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_b52,_b53){return this.own(_b1c.connect(obj,_b52,this,_b53))[0];},disconnect:function(_b54){_b54.remove();},subscribe:function(t,_b55){return this.own(_b26.subscribe(t,lang.hitch(this,_b55)))[0];},unsubscribe:function(_b56){_b56.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b21.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b22.get(this.domNode,"display")!="none");},placeAt:function(_b57,_b58){var _b59=!_b57.tagName&&_b28.byId(_b57);if(_b59&&_b59.addChild&&(!_b58||typeof _b58==="number")){_b59.addChild(this,_b58);}else{var ref=_b59?(_b59.containerNode&&!/after|before|replace/.test(_b58||"")?_b59.containerNode:_b59.domNode):dom.byId(_b57,this.ownerDocument);_b20.place(this.domNode,ref,_b58);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_b5a){return _b5a;},applyTextDir:function(){},defer:function(fcn,_b5b){var _b5c=setTimeout(lang.hitch(this,function(){_b5c=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_b5b||0);return {remove:function(){if(_b5c){clearTimeout(_b5c);_b5c=null;}return null;}};}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/AttributeInspector-all",["esri/layers/FeatureLayer","esri/dijit/AttributeInspector"],function(_b5d,_b5e){return {};});