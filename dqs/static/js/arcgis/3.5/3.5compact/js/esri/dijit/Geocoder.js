/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:esri/dijit/templates/Geocoder.html":"<div class=\"${theme}\" role=\"presentation\">\r\n    <div class=\"${_GeocoderContainerClass}\" role=\"presentation\">\r\n    \t<div class=\"${_GeocoderClass}\" data-dojo-attach-point=\"containerNode\" role=\"presentation\">\r\n    \t\t<div title=\"${_i18n.widgets.Geocoder.main.searchButtonTitle}\" tabindex=\"0\" class=\"${_searchButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"submitNode\" data-dojo-attach-event=\"ondijitclick:_findThenSelect\" role=\"button\"></div>\r\n    \t\t<div aria-haspopup=\"true\" id=\"${id}_menu_button\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuButtonTitle}\" tabindex=\"0\" class=\"${_geocoderMenuArrowClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"geocoderMenuArrowNode\" role=\"button\" aria-expanded=\"false\" data-dojo-attach-event=\"ondijitclick:_toggleGeolocatorMenu\"></div>\r\n    \t\t<input aria-haspopup=\"true\" id=\"${id}_input\" tabindex=\"0\" placeholder=\"\" value=\"${value}\" autocomplete=\"off\" type=\"text\" data-dojo-attach-point=\"inputNode\" data-dojo-attach-event=\"ondijitclick:_inputClick\" role=\"textbox\">\r\n    \t\t<div tabindex=\"0\" class=\"${_clearButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"clearNode\" data-dojo-attach-event=\"ondijitclick:clear\" role=\"button\"></div>\r\n    \t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t</div>\r\n    \t<div class=\"${_resultsContainerClass}\" data-dojo-attach-point=\"resultsNode\" aria-labelledby=\"${id}_input\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t<div class=\"${_geocoderMenuClass}\" data-dojo-attach-point=\"geocoderMenuNode\" role=\"presentation\">\r\n    \t\t<div class=\"${_geocoderMenuHeaderClass}\">\r\n    \t\t\t${_i18n.widgets.Geocoder.main.geocoderMenuHeader}\r\n    \t\t\t<div role=\"button\" data-dojo-attach-point=\"geocoderMenuCloseNode\" data-dojo-attach-event=\"ondijitclick:_hideGeolocatorMenu\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuCloseTitle}\" tabindex=\"0\" class=\"${_geocoderMenuCloseClass}\"></div>\r\n    \t\t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t\t</div>\r\n    \t\t<div data-dojo-attach-point=\"geocoderMenuInsertNode\" aria-labelledby=\"${id}_menu_button\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t</div>\r\n    </div>\r\n</div>"}});define("esri/dijit/Geocoder",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/event","dojo/dom-construct","dojo/json","dojo/keys","dojo/on","dojo/query","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/templates/Geocoder.html","dojo/uacss","dijit/_OnDijitClickMixin","dijit/_TemplatedMixin","dijit/_WidgetBase","dijit/focus","esri/kernel","esri/SpatialReference","esri/graphic","esri/request","esri/geometry/Point","esri/geometry/Extent","esri/tasks/locator"],function(_1,_2,_3,_4,_5,_6,_7,_8,on,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17){var _18=_1([_f,_d,_e],{declaredClass:"esri.dijit.Geocoder",templateString:_b,constructor:function(_19,_1a){var _1b=this;_1b._setPublicDefaults();_1.safeMixin(_1b,_19);_1b._setPrivateDefaults();_1b.watch("value",_1b._updateValue);_1b.watch("theme",_1b._updateTheme);_1b.watch("activeGeocoder",_1b._setActiveGeocoder);_1b.watch("activeGeocoderIndex",_1b._setActiveGeocoderIndex);_1b.watch("geocoder",_1b._updateGeocoder);_1b.watch("arcgisGeocoder",_1b._updateGeocoder);},startup:function(){var _1c=this;if(!_1c._geocoders.length){console.log("No geocoders defined.");_1c.destroy();return;}if(!_1c.domNode){console.log("domNode is undefined.");_1c.destroy();return;}if(_1c.get("value")){_1c._checkStatus();}if(_1c.map){if(_1c.map.loaded){_1c._init();}else{_2.connect(_1c.map,"onLoad",function(){_1c._init();});}}else{_1c._init();}},postCreate:function(){var _1d=this;_1d._updateGeocoder();_1d._setDelegations();},destroy:function(){var i;var _1e=this;if(_1e._delegations){for(i=0;i<_1e._delegations.length;i++){_1e._delegations[i].remove();}}_6.empty(_1e.domNode);_1e.inherited(arguments);},clear:function(){var _1f=this;_1f.onClear();if(_1f.loaded){_9(_1f.inputNode).attr("value","");}_1f.set("value","");_1f.results=[];if(_1f.loaded){_9(_1f.containerNode).removeClass(_1f._hasValueClass);_9(_1f.clearNode).attr("title","");}_1f._hideMenus();_1f._hideLoading();},show:function(){var _20=this;if(_20.loaded){_9(_20.domNode).style("display","block");}},hide:function(){var _21=this;if(_21.loaded){_9(_21.domNode).style("display","none");}},find:function(_22){var _23=this;var def=new _4();if(_22){if(typeof _22==="string"){_23._queryDeferred(def,_22);}else{if(typeof _22==="object"&&_22.type==="point"){_23._reverseGeocodePoint(_22,def);}else{if(_22 instanceof Array&&_22.length===2){var pt=new _15(_22,new _12({wkid:4326}));_23._reverseGeocodePoint(pt,def);}else{def.cancel("Invalid find type");}}}}else{_23._queryDeferred(def,_23.get("value"));}return def;},focus:function(){var _24=this;if(_24.loaded){_10.focus(_24.inputNode);}},blur:function(){var _25=this;if(_25.loaded&&_10.curNode){_10.curNode.blur();}},select:function(e){var _26=this;_26.onSelect(e);_26._hideMenus();_26._hideLoading();if(_26.autoNavigate&&e&&e.hasOwnProperty("extent")&&_26.map){_26.map.setExtent(e.extent);}},onSelect:function(e){},onFindResults:function(e){},onAutoComplete:function(e){},onGeocoderSelect:function(e){},onClear:function(){},onEnterKeySelect:function(){},onLoad:function(){},_init:function(){var _27=this;_27.loaded=true;_27.onLoad();_27._hideMenus();},_queryDeferred:function(def,_28){var _29=this;_29._query({delay:0,search:_28}).then(function(_2a){_29.onFindResults(_2a);if(def){def.resolve(_2a);}},function(_2b){_29.onFindResults(_2b);if(def){def.resolve(_2b);}});},_reverseGeocodePoint:function(pt,def){var _2c=this;if(pt&&_2c.activeGeocoder){_2c._reverseTask=new _17(_2c.activeGeocoder.url);_2c._reverseTask.outSpatialReference=_2c._defaultSR;if(_2c.map){_2c._reverseTask.outSpatialReference=_2c.map.spatialReference;}var _2d=_2c.activeGeocoder.distance||1000;_2c._reverseTask.locationToAddress(pt,_2d,function(_2e){var _2f=_2c._hydrateResult(_2e);var obj={"results":[_2f],"geometry":pt};_2c.onFindResults(obj);if(def){def.resolve(obj);}},function(_30){def.resolve(_30);});}},_setPublicDefaults:function(){var _31=this;_31.autoComplete=false;_31.arcgisGeocoder=true;_31.set("value","");_31.set("theme","simpleGeocoder");_31.activeGeocoderIndex=0;_31.maxLocations=6;_31.minCharacters=3;_31.searchDelay=350;_31.geocoderMenu=true;_31.autoNavigate=true;_31.showResults=true;},_setPrivateDefaults:function(){var _32=this;_32._i18n=_a;_32._deferreds=[];_32.results=[];_32._defaultSR=new _12(4326);_32._GeocoderContainerClass="esriGeocoderContainer";_32._GeocoderClass="esriGeocoder";_32._GeocoderMultipleClass="esriGeocoderMultiple";_32._GeocoderIconClass="esriGeocoderIcon";_32._GeocoderActiveClass="esriGeocoderActive";_32._loadingClass="esriGeocoderLoading";_32._resultsContainerClass="esriGeocoderResults";_32._resultsItemClass="esriGeocoderResult";_32._resultsItemEvenClass="esriGeocoderResultEven";_32._resultsItemOddClass="esriGeocoderResultOdd";_32._resultsItemFirstClass="esriGeocoderResultFirst";_32._resultsItemLastClass="esriGeocoderResultLast";_32._resultsPartialMatchClass="esriGeocoderResultPartial";_32._searchButtonClass="esriGeocoderSearch";_32._clearButtonClass="esriGeocoderReset";_32._hasValueClass="esriGeocoderHasValue";_32._geocoderMenuClass="esriGeocoderMenu";_32._geocoderMenuHeaderClass="esriGeocoderMenuHeader";_32._geocoderMenuCloseClass="esriGeocoderMenuClose";_32._activeMenuClass="esriGeocoderMenuActive";_32._geocoderMenuArrowClass="esriGeocoderMenuArrow";_32._geocoderSelectedClass="esriGeocoderSelected";_32._geocoderSelectedCheckClass="esriGeocoderSelectedCheck";_32._GeocoderClearClass="esriGeocoderClearFloat";},_setEsriGeocoder:function(){var _33=this;if(_33.arcgisGeocoder){if(typeof _33.arcgisGeocoder==="object"){_33._arcgisGeocoder=_33.arcgisGeocoder;}else{_33._arcgisGeocoder={};}if(!_33._arcgisGeocoder.url){_33._arcgisGeocoder.url=location.protocol+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer";}if(!_33._arcgisGeocoder.name){_33._arcgisGeocoder.name=_a.widgets.Geocoder.esriGeocoderName;}if(!_33._arcgisGeocoder.hasOwnProperty("localSearchOptions")){_33._arcgisGeocoder.localSearchOptions={minScale:150000,distance:12000};}_33.arcgisGeocoder=_33._arcgisGeocoder;}else{_33.arcgisGeocoder=false;}},_setActiveGeocoder:function(){var _34=this;_34.activeGeocoder=_34._geocoders[_34.activeGeocoderIndex];_34._updatePlaceholder();},_setGeocoderList:function(){var _35=this;var _36=[];if(_35.arcgisGeocoder){_36=_36.concat([_35._arcgisGeocoder]);}if(_35.geocoders&&_35.geocoders.length){_36=_36.concat(_35.geocoders);}_35._geocoders=_36;},_updateGeocoder:function(){var _37=this;_37.set("activeGeocoderIndex",0);_37._setEsriGeocoder();_37._setGeocoderList();_37._setActiveGeocoder();_37._insertGeocoderMenuItems();},_updatePlaceholder:function(){var _38=this;if(_38.loaded){_38._placeholder="";if(_38.activeGeocoder&&_38.activeGeocoder.placeholder){_38._placeholder=_38.activeGeocoder.placeholder;}_9(_38.inputNode).attr("placeholder",_38._placeholder);_9(_38.submitNode).attr("title",_38._placeholder);}},_updateValue:function(_39,_3a,_3b){var _3c=this;if(_3c.loaded&&!_3c._ignoreUpdateValue){_9(_3c.inputNode).attr("value",_3b);_3c._checkStatus();}},_updateTheme:function(_3d,_3e,_3f){var _40=this;if(_40.loaded){_9(_40.domNode).removeClass(_3e).addClass(_3f);}},_setActiveGeocoderIndex:function(_41,_42,_43){var _44=this;_44.activeGeocoderIndex=_43;_44._setActiveGeocoder();_44._hideMenus();_44._insertGeocoderMenuItems();var evt={attr:_44.activeGeocoder,oldVal:_42,newVal:_43};_44.onGeocoderSelect(evt);},_query:function(e){var _45=this;if(!e){e={delay:0};}if(!e.search){e.search=_45.get("value");}var def=new _4();_45._deferreds.push(def);_45._queryTimer=setTimeout(function(){_45._performQuery(def,e);},e.delay);return def;},_performQuery:function(def,e){var _46=this;if(e.search){_46._hideGeolocatorMenu();_46._showLoading();var _47;var _48=_46.activeGeocoder.outFields||"";var _49="";if(_46.activeGeocoder.prefix){_49+=_46.activeGeocoder.prefix;}_49+=e.search;if(_46.activeGeocoder.suffix){_49+=_46.activeGeocoder.suffix;}if(_46.activeGeocoder===_46._arcgisGeocoder){var _4a=_46._defaultSR;if(_46.map){_4a=_46.map.spatialReference;}_47={"text":_49,"outSR":_4a.wkid||_7.stringify(_4a.toJson()),"f":"json"};if(_46.map&&_46.activeGeocoder.localSearchOptions&&_46.activeGeocoder.localSearchOptions.hasOwnProperty("distance")&&_46.activeGeocoder.localSearchOptions.hasOwnProperty("minScale")){var _4b=_46.map.extent.getCenter().normalize();var _4c=_46.map.getScale();if(!_46.activeGeocoder.localSearchOptions.minScale||(_4c&&_4c<=parseFloat(_46.activeGeocoder.localSearchOptions.minScale))){_47.location=_7.stringify(_4b.toJson());_47.distance=_46.activeGeocoder.localSearchOptions.distance;}}if(_48){_47.outFields=_48;}if(_46.maxLocations){_47.maxLocations=_46.maxLocations;}if(_46.activeGeocoder.sourceCountry){_47.sourceCountry=_46.activeGeocoder.sourceCountry;}if(_46.activeGeocoder.searchExtent){var _4d={"xmin":_46.activeGeocoder.searchExtent.xmin,"ymin":_46.activeGeocoder.searchExtent.ymin,"xmax":_46.activeGeocoder.searchExtent.xmax,"ymax":_46.activeGeocoder.searchExtent.ymax,"spatialReference":_46.activeGeocoder.searchExtent.spatialReference.toJson()};_47.bbox=_7.stringify(_4d);}var _4e=_14({url:_46.activeGeocoder.url+"/find",content:_47,handleAs:"json",callbackParamName:"callback",load:function(_4f){_46._receivedResults(_4f.locations,def);}});}else{_47={address:{}};if(_46.activeGeocoder.singleLineFieldName){_47.address[_46.activeGeocoder.singleLineFieldName]=_49;}else{_47.address["Single Line Input"]=_49;}if(_48){_47.outFields=[_48];}if(_46.activeGeocoder.searchExtent){_47.searchExtent=_46.activeGeocoder.searchExtent;}_46._task=new _17(_46.activeGeocoder.url);_46._task.outSpatialReference=_46._defaultSR;if(_46.map){_46._task.outSpatialReference=_46.map.spatialReference;}_46._task.addressToLocations(_47,function(_50){_46._receivedResults(_50,def);},function(_51){_46._receivedResults(_51,def);});}}else{_46._hideLoading();def.resolve();}},_showResults:function(e){var _52=this;_52._hideGeolocatorMenu();var _53="";if(_52.results&&_52.results.length&&_52.resultsNode){var _54=_52.get("value"),i;var _55=new RegExp("("+_54+")","gi");_53+="<ul role=\"presentation\">";for(i=0;i<_52.results.length;++i){var _56=_52._resultsItemClass+" ";if(i%2===0){_56+=_52._resultsItemOddClass;}else{_56+=_52._resultsItemEvenClass;}if(i===0){_56+=" "+_52._resultsItemFirstClass;}else{if(i===(_52.results.length-1)){_56+=" "+_52._resultsItemLastClass;}}_53+="<li data-text=\""+_52.results[i].name+"\" data-item=\"true\" data-index=\""+i+"\" role=\"menuitem\" tabindex=\"0\" class=\""+_56+"\">"+_52.results[i].name.replace(_55,"<strong class=\""+_52._resultsPartialMatchClass+"\">"+_54+"</strong>")+"</li>";}_53+="</ul>";if(_52.resultsNode){_52.resultsNode.innerHTML=_53;}_52._showResultsMenu();}},_autocomplete:function(){var _57=this;_57._query({delay:_57.searchDelay,search:_57.get("value")}).then(function(_58){_57.onAutoComplete(_58);if(_57.showResults){_57._showResults(_58);}});},_receivedResults:function(_59,def){var _5a=this;_5a._hideLoading();var _5b=_5a._hydrateResults(_59);_5a.results=_5b;var obj={"results":_5b,"value":_5a.get("value")};def.resolve(obj);},_showLoading:function(){var _5c=this;if(_5c.loaded){_9(_5c.containerNode).addClass(_5c._loadingClass);}},_hideLoading:function(){var _5d=this;if(_5d.loaded){_9(_5d.containerNode).removeClass(_5d._loadingClass);}},_showGeolocatorMenu:function(){var _5e=this;if(_5e.loaded){_9(_5e.containerNode).addClass(_5e._activeMenuClass);_9(_5e.geocoderMenuNode).style("display","block");_9(_5e.geocoderMenuInsertNode).attr("aria-hidden","false");_9(_5e.geocoderMenuArrowNode).attr("aria-expanded","true");}},_hideGeolocatorMenu:function(){var _5f=this;if(_5f.loaded){var _60=_9(_5f.containerNode);_60.removeClass(_5f._activeMenuClass);_9(_5f.geocoderMenuNode).style("display","none");_9(_5f.geocoderMenuInsertNode).attr("aria-hidden","true");_9(_5f.geocoderMenuArrowNode).attr("aria-expanded","false");}},_toggleGeolocatorMenu:function(){var _61=this;_61._hideResultsMenu();if(_61.loaded){var _62=_9(_61.geocoderMenuNode).style("display");if(_62[0]==="block"){_61._hideGeolocatorMenu();}else{_61._showGeolocatorMenu();}}},_showResultsMenu:function(){var _63=this;if(_63.loaded){_9(_63.containerNode).addClass(_63._GeocoderActiveClass);_9(_63.resultsNode).style("display","block");_9(_63.resultsNode).attr("aria-hidden","false");}},_hideResultsMenu:function(){var _64=this;if(_64.loaded){_9(_64.resultsNode).style("display","none");_9(_64.containerNode).removeClass(_64._GeocoderActiveClass);_9(_64.resultsNode).attr("aria-hidden","true");}},_hideMenus:function(){var _65=this;_65._hideGeolocatorMenu();_65._hideResultsMenu();},_insertGeocoderMenuItems:function(){var _66=this;if(_66.loaded){if(_66.geocoderMenu&&_66._geocoders.length>1){var _67="";var _68="",i;_67+="<ul role=\"presentation\">";for(i=0;i<_66._geocoders.length;i++){_68=_66._resultsItemClass+" ";if(i%2===0){_68+=_66._resultsItemOddClass;}else{_68+=_66._resultsItemEvenClass;}if(i===_66.activeGeocoderIndex){_68+=" "+_66._geocoderSelectedClass;}if(i===0){_68+=" "+_66._resultsItemFirstClass;}else{if(i===(_66._geocoders.length-1)){_68+=" "+_66._resultsItemLastClass;}}var _69=_66._geocoders[i].name||_a.widgets.Geocoder.main.untitledGeocoder;_67+="<li data-index=\""+i+"\" data-item=\"true\" role=\"menuitem\" tabindex=\"0\" class=\""+_68+"\">";_67+="<div class=\""+_66._geocoderSelectedCheckClass+"\"></div>";_67+=_69;_67+="<div class=\""+_66._GeocoderClearClass+"\"></div>";_67+="</li>";}_67+="</ul>";_66.geocoderMenuInsertNode.innerHTML=_67;_9(_66.geocoderMenuNode).style("display","none");_9(_66.geocoderMenuArrowNode).style("display","block");_9(_66.containerNode).addClass(_66._GeocoderMultipleClass);}else{_66.geocoderMenuInsertNode.innerHTML="";_9(_66.geocoderMenuNode).style("display","none");_9(_66.geocoderMenuArrowNode).style("display","none");_9(_66.containerNode).removeClass(_66._GeocoderMultipleClass);}}},_checkStatus:function(){var _6a=this;if(_6a.loaded){if(_6a.get("value")){_9(_6a.containerNode).addClass(_6a._hasValueClass);_9(_6a.clearNode).attr("title",_a.widgets.Geocoder.main.clearButtonTitle);}else{_6a.clear();}}},_setDelegations:function(){var _6b=this;_6b._delegations=[];var _6c=on(document,"click",function(e){_6b._hideResultsMenu(e);});_6b._delegations.push(_6c);var _6d=on(_6b.inputNode,"keyup",function(e){_6b._inputKeyUp(e);});_6b._delegations.push(_6d);var _6e=on(_6b.inputNode,"keydown",function(e){_6b._inputKeyDown(e);});_6b._delegations.push(_6e);var _6f=on(_6b.geocoderMenuArrowNode,"keydown",_6b._geocoderMenuButtonKeyDown());_6b._delegations.push(_6f);var _70=on(_6b.resultsNode,"[data-item=\"true\"]:click, [data-item=\"true\"]:keydown",function(e){clearTimeout(_6b._queryTimer);var _71=_9("[data-item=\"true\"]",_6b.resultsNode);var _72=parseInt(_9(this).attr("data-index")[0],10);var _73=_9(this).attr("data-text");var _74;if(e.type==="click"||(e.type==="keydown"&&e.keyCode===_8.ENTER)){_9(_6b.inputNode).attr("value",_73);_6b.set("value",_73);if(_6b.results&&_6b.results[_72]){_6b.select(_6b.results[_72]);}}else{if(e.type==="keydown"&&e.keyCode===_8.UP_ARROW){_5.stop(e);_74=_72-1;if(_74<0){_6b.inputNode.focus();}else{_71[_74].focus();}}else{if(e.type==="keydown"&&e.keyCode===_8.DOWN_ARROW){_5.stop(e);_74=_72+1;if(_74>=_71.length){_6b.inputNode.focus();}else{_71[_74].focus();}}else{if(e.keyCode===_8.ESCAPE){clearTimeout(_6b._queryTimer);_6b._hideMenus();}}}}});_6b._delegations.push(_70);var _75=on(_6b.geocoderMenuInsertNode,"[data-item=\"true\"]:click, [data-item=\"true\"]:keydown",function(e){var _76=_9("[data-item=\"true\"]",_6b.geocoderMenuInsertNode);var _77=parseInt(_9(this).attr("data-index")[0],10);var _78;if(e.type==="click"||(e.type==="keydown"&&e.keyCode===_8.ENTER)){_6b._setActiveGeocoderIndex(null,null,_77);_6b._hideGeolocatorMenu();}else{if(e.type==="keydown"&&e.keyCode===_8.UP_ARROW){_5.stop(e);_78=_77-1;if(_78<0){_6b.geocoderMenuArrowNode.focus();}else{_76[_78].focus();}}else{if(e.type==="keydown"&&e.keyCode===_8.DOWN_ARROW){_5.stop(e);_78=_77+1;if(_78>=_76.length){_6b.geocoderMenuArrowNode.focus();}else{_76[_78].focus();}}else{if(e.keyCode===_8.ESCAPE){_6b._hideGeolocatorMenu();}}}}});_6b._delegations.push(_75);},_findThenSelect:function(){var _79=this;_79.find().then(function(_7a){if(_7a.results&&_7a.results.length){_79.select(_7a.results[0]);_79.onEnterKeySelect();}});},_inputKeyUp:function(e){var _7b=this;if(e){clearTimeout(_7b._queryTimer);var _7c=_7b.inputNode.value;_7b._ignoreUpdateValue=true;_7b.set("value",_7c);_7b._ignoreUpdateValue=false;var _7d=0;if(_7c){_7d=_7c.length;}var _7e=_9("[data-item=\"true\"]",_7b.resultsNode);if(e.keyCode===e.copyKey||e.ctrlKey||e.shiftKey||e.metaKey||e.altKey||e.keyCode===e.ALT||e.keyCode===e.CTRL||e.keyCode===e.META||e.keyCode===e.shiftKey||e.keyCode===_8.UP_ARROW||e.keyCode===_8.DOWN_ARROW||e.keyCode===_8.LEFT_ARROW||e.keyCode===_8.RIGHT_ARROW){return;}else{if(e&&e.keyCode===_8.ENTER){_7b._findThenSelect();}else{if(e&&e.keyCode===_8.ESCAPE){clearTimeout(_7b._queryTimer);_7b._hideMenus();}else{if(_7b.autoComplete&&_7d>=_7b.minCharacters){_7b._autocomplete();}else{_7b._hideMenus();}}}}_7b._checkStatus();}},_cancelDeferreds:function(){var _7f=this;if(_7f._deferreds.length){for(var i=0;i<_7f._deferreds.length;i++){_7f._deferreds[i].cancel("stop query");_7f._deferreds.splice(i,1);}}},_inputKeyDown:function(e){var _80=this;var _81=_9("[data-item=\"true\"]",_80.resultsNode);if(e&&e.keyCode===_8.TAB){_80._hideMenus();_80._cancelDeferreds();return;}else{if(e&&e.keyCode===_8.UP_ARROW){_5.stop(e);_80._cancelDeferreds();var _82=_81.length;if(_82){_81[_82-1].focus();}}else{if(e&&e.keyCode===_8.DOWN_ARROW){_5.stop(e);_80._cancelDeferreds();if(_81[0]){_81[0].focus();}}}}},_geocoderMenuButtonKeyDown:function(e){var _83=this;var _84=_9("[data-item=\"true\"]",_83.geocoderMenuInsertNode);if(e&&e.keyCode===_8.UP_ARROW){_5.stop(e);_83._showGeolocatorMenu();var _85=_84.length;if(_85){_84[_85-1].focus();}}else{if(e&&e.keyCode===_8.DOWN_ARROW){_5.stop(e);_83._showGeolocatorMenu();if(_84[0]){_84[0].focus();}}}},_inputClick:function(){var _86=this;_86._hideGeolocatorMenu();if(!_86.get("value")){_86.clear();_86._hideMenus();}_86._checkStatus();},_hydrateResult:function(e){var _87=this;var sR=_87._defaultSR;if(_87.map){sR=_87.map.spatialReference;}var _88={},_89;if(e.hasOwnProperty("extent")){_88.extent=new _16(e.extent);_88.extent.setSpatialReference(new _12(sR));if(e.hasOwnProperty("name")){_88.name=e.name;}if(e.hasOwnProperty("feature")){_88.feature=new _13(e.feature);_89=_88.feature.geometry;if(_89){_89.setSpatialReference(sR);}}}else{if(e.hasOwnProperty("location")){var _8a=new _15(e.location.x,e.location.y,sR);if(_87.map){_88.extent=_87.map.extent.centerAt(_8a);}else{_88.extent=new _16({"xmin":_8a.x-0.25,"ymin":_8a.y-0.25,"xmax":_8a.x+0.25,"ymax":_8a.y+0.25,"spatialReference":{"wkid":4326}});}if(e.hasOwnProperty("address")&&typeof e.address==="string"){_88.name=e.address;}else{if(e.hasOwnProperty("address")&&typeof e.address==="object"){var _8b="";if(e.address.Address){_8b+=e.address.Address+" ";}if(e.address.City){_8b+=e.address.City+" ";}if(e.address.Region){_8b+=e.address.Region+" ";}if(e.address.Postal){_8b+=e.address.Postal+" ";}if(e.address.CountryCode){_8b+=e.address.CountryCode+" ";}_88.name=_3.trim(_8b);}}var _8c={};if(e.hasOwnProperty("attributes")){_8c=e.attributes;}if(e.hasOwnProperty("score")){_8c.score=e.score;}_88.feature=new _13(_8a,null,_8c,null);}}return _88;},_hydrateResults:function(e){var _8d=this;var _8e=[];if(e&&e.length){var i=0;for(i;i<e.length&&i<_8d.maxLocations;i++){var _8f=_8d._hydrateResult(e[i]);_8e.push(_8f);}}return _8e;}});if(_c("extend-esri")){_3.setObject("dijit.Geocoder",_18,_11);}return _18;});